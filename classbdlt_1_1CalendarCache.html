<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: Class bdlt::CalendarCache</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacebdlt.html">bdlt</a>      </li>
      <li><a class="el" href="classbdlt_1_1CalendarCache.html">bdlt::CalendarCache</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>bdlt::CalendarCache Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="bdlt::CalendarCache" -->
<p><code>#include &lt;<a class="el" href="bdlt__calendarcache_8h_source.html">bdlt_calendarcache.h</a>&gt;</code></p>

<p><a href="classbdlt_1_1CalendarCache-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbdlt_1_1CalendarCache.html#a7c37b3169823451177dfe0a62e756ca0">CalendarCache</a> (<a class="el" href="classbdlt_1_1CalendarLoader.html">CalendarLoader</a> *loader, <a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *basicAllocator=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbdlt_1_1CalendarCache.html#afd5d059d823c1512f206bf7ff91fe83a">CalendarCache</a> (<a class="el" href="classbdlt_1_1CalendarLoader.html">CalendarLoader</a> *loader, const <a class="el" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a> &amp;timeout, <a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *basicAllocator=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbdlt_1_1CalendarCache.html#a5abf7caab2ee0e1000e0afde465f42ca">~CalendarCache</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt; const <a class="el" href="classbdlt_1_1Calendar.html">Calendar</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbdlt_1_1CalendarCache.html#a1143ebddb2abd58f44f224f758881d37">getCalendar</a> (const char *calendarName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbdlt_1_1CalendarCache.html#aecb2952e3edae257ef6efa54f271ed46">invalidate</a> (const char *calendarName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbdlt_1_1CalendarCache.html#a426bb3f44950cace66e722739d7d55a6">invalidateAll</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt; const <a class="el" href="classbdlt_1_1Calendar.html">Calendar</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbdlt_1_1CalendarCache.html#adec8fe93f53cefa267746328a24d0bae">lookupCalendar</a> (const char *calendarName) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbdlt_1_1Datetime.html">Datetime</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbdlt_1_1CalendarCache.html#a3f94ec58d8ebcbf359ccf681fa6e7913">lookupLoadTime</a> (const char *calendarName) const </td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class implements an efficient cache of <em>read-only</em> <code><a class="el" href="classbdlt_1_1Calendar.html">bdlt::Calendar</a></code> objects that are loaded into the cache, using a calendar loader supplied at construction, as a side-effect of the <code>getCalendar</code> manipulator. Calendars in the cache can be invalidated, and removed from the cache via the <code>invalidate</code> and <code>invalidateAll</code> methods. In addition, calendars in the cache can be made to expire based on a timeout that may be optionally supplied at construction. The <code><a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt;const <a class="el" href="classbdlt_1_1Calendar.html">bdlt::Calendar</a>&gt;</code> objects returned from the <code>getCalendar</code> and <code>lookupCalendar</code> methods allow for the safe removal of calendars from the cache that may still have outstanding references to them.</p>
<p>This container is <em>exception</em> <em>neutral</em> with no guarantee of rollback: if an exception is thrown during the invocation of a method on a pre-existing instance, the container is left in a valid state, but its value is undefined. In no event is memory leaked.</p>
<p>This class is fully thread-safe (see <code>bsldoc_glossary</code>). </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7c37b3169823451177dfe0a62e756ca0"></a><!-- doxytag: member="bdlt::CalendarCache::CalendarCache" ref="a7c37b3169823451177dfe0a62e756ca0" args="(CalendarLoader *loader, bslma::Allocator *basicAllocator=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bdlt::CalendarCache::CalendarCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbdlt_1_1CalendarLoader.html">CalendarLoader</a> *&nbsp;</td>
          <td class="paramname"> <em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *&nbsp;</td>
          <td class="paramname"> <em>basicAllocator</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create an empty calendar cache that uses the specified <code>loader</code> to load calendars on demand and has no timeout. Optionally specify a <code>basicAllocator</code> used to supply memory. If <code>basicAllocator</code> is 0, the currently installed default allocator is used. Calendars loaded into this cache remain valid for retrieval until they have been explicitly invalidated (via either the <code>invalidate</code> or <code>invalidateAll</code> methods), or until this object is destroyed. The behavior is undefined unless <code>loader</code> and the indicated allocator remain valid throughout the lifetime of this cache. </p>

</div>
</div>
<a class="anchor" id="afd5d059d823c1512f206bf7ff91fe83a"></a><!-- doxytag: member="bdlt::CalendarCache::CalendarCache" ref="afd5d059d823c1512f206bf7ff91fe83a" args="(CalendarLoader *loader, const bsls::TimeInterval &amp;timeout, bslma::Allocator *basicAllocator=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bdlt::CalendarCache::CalendarCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbdlt_1_1CalendarLoader.html">CalendarLoader</a> *&nbsp;</td>
          <td class="paramname"> <em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *&nbsp;</td>
          <td class="paramname"> <em>basicAllocator</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create an empty calendar cache that uses the specified <code>loader</code> to load calendars on demand and has the specified <code>timeout</code> interval indicating the length of time that calendars remain valid for subsequent retrieval from the cache after they have been loaded. Optionally specify a <code>basicAllocator</code> used to supply memory. If <code>basicAllocator</code> is 0, the currently installed default allocator is used. The behavior is undefined unless <code>loader</code> and the indicated allocator remain valid throughout the lifetime of this cache, and <code>bsls::TimeInterval(0) &lt;= timeout &lt;= bsls::TimeInterval(INT_MAX)</code>. Note that a <code>timeout</code> value of 0 indicates that a calendar will be loaded into the cache by <em>each</em> (successful) call to the <code>getCalendar</code> manipulator. </p>

</div>
</div>
<a class="anchor" id="a5abf7caab2ee0e1000e0afde465f42ca"></a><!-- doxytag: member="bdlt::CalendarCache::~CalendarCache" ref="a5abf7caab2ee0e1000e0afde465f42ca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bdlt::CalendarCache::~CalendarCache </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy this object. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1143ebddb2abd58f44f224f758881d37"></a><!-- doxytag: member="bdlt::CalendarCache::getCalendar" ref="a1143ebddb2abd58f44f224f758881d37" args="(const char *calendarName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt;const <a class="el" href="classbdlt_1_1Calendar.html">Calendar</a>&gt; bdlt::CalendarCache::getCalendar </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>calendarName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a shared pointer providing non-modifiable access to the calendar having the specified <code>calendarName</code> in this calendar cache, loading the calendar into the cache using the loader that was supplied at construction if the calendar is not already present in the cache or if the calendar has expired (i.e., per a timeout optionally supplied at construction). If the loader fails, whether in loading a calendar for the first time or in reloading a calendar that has expired, return an empty shared pointer. </p>

</div>
</div>
<a class="anchor" id="aecb2952e3edae257ef6efa54f271ed46"></a><!-- doxytag: member="bdlt::CalendarCache::invalidate" ref="aecb2952e3edae257ef6efa54f271ed46" args="(const char *calendarName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bdlt::CalendarCache::invalidate </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>calendarName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Invalidate the calendar having the specified <code>calendarName</code> in this calendar cache, and remove it from the cache. If a calendar having <code>calendarName</code> is not present in this cache, this method has no effect. Return the number of calendars that were invalidated. Note that a calendar that has been invalidated in the cache remains valid to all outstanding references to it, obtained via earlier calls to the <code>getCalendar</code> and <code>lookupCalendar</code> methods, until all of those references have been destroyed. </p>

</div>
</div>
<a class="anchor" id="a426bb3f44950cace66e722739d7d55a6"></a><!-- doxytag: member="bdlt::CalendarCache::invalidateAll" ref="a426bb3f44950cace66e722739d7d55a6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bdlt::CalendarCache::invalidateAll </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Invalidate all calendars in this calendar cache, and remove them from the cache. Return the number of calendars that were invalidated. Note that a calendar that has been invalidated in the cache remains valid to all outstanding references to it, obtained via earlier calls to the <code>getCalendar</code> and <code>lookupCalendar</code> methods, until all of those references have been destroyed. </p>

</div>
</div>
<a class="anchor" id="adec8fe93f53cefa267746328a24d0bae"></a><!-- doxytag: member="bdlt::CalendarCache::lookupCalendar" ref="adec8fe93f53cefa267746328a24d0bae" args="(const char *calendarName) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt;const <a class="el" href="classbdlt_1_1Calendar.html">Calendar</a>&gt; bdlt::CalendarCache::lookupCalendar </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>calendarName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a shared pointer providing non-modifiable access to the calendar having the specified <code>calendarName</code> in this calendar cache. If the calendar having <code>calendarName</code> is not found in the cache, or if the calendar has expired (i.e., per a timeout optionally supplied at construction), return an empty shared pointer. </p>

</div>
</div>
<a class="anchor" id="a3f94ec58d8ebcbf359ccf681fa6e7913"></a><!-- doxytag: member="bdlt::CalendarCache::lookupLoadTime" ref="a3f94ec58d8ebcbf359ccf681fa6e7913" args="(const char *calendarName) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbdlt_1_1Datetime.html">Datetime</a> bdlt::CalendarCache::lookupLoadTime </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>calendarName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the datetime, in Coordinated Universal <a class="el" href="classbdlt_1_1Time.html">Time</a> (UTC), at which the calendar having the specified <code>calendarName</code> was loaded into this calendar cache. If the calendar having <code>calendarName</code> is not found in the cache, or if the calendar has expired (i.e., per a timeout optionally supplied at construction), return <code><a class="el" href="namespacebdet.html#a7cc67ae2240c06a6a70bf001c5a858b5">Datetime()</a></code>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="bdlt__calendarcache_8h_source.html">bdlt_calendarcache.h</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:50:34 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
