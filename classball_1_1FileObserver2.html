<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: Class ball::FileObserver2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespaceball.html">ball</a>      </li>
      <li><a class="el" href="classball_1_1FileObserver2.html">ball::FileObserver2</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>ball::FileObserver2 Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="ball::FileObserver2" --><!-- doxytag: inherits="ball::Observer" -->
<p><code>#include &lt;<a class="el" href="ball__fileobserver2_8h_source.html">ball_fileobserver2.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ball::FileObserver2:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classball_1_1FileObserver2.png" usemap="#ball::FileObserver2_map" alt=""/>
  <map id="ball::FileObserver2_map" name="ball::FileObserver2_map">
<area href="classball_1_1Observer.html" alt="ball::Observer" shape="rect" coords="0,0,120,24"/>
</map>
</div>

<p><a href="classball_1_1FileObserver2-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef bsl::function&lt; void(bsl::ostream <br class="typebreak"/>
&amp;, const <a class="el" href="classball_1_1Record.html">Record</a> &amp;)&gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#aa843dfff44428a636f7834dd72f60222">LogRecordFunctor</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef bsl::function&lt; void(int, <br class="typebreak"/>
const <a class="el" href="classbsl_1_1basic__string.html">bsl::string</a> &amp;)&gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a02c20d24e2576f1272ec7dbcbf303664">OnFileRotationCallback</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#ac8eb6c75ddfde049d24048b6cf3149df">BSLMF_NESTED_TRAIT_DECLARATION</a> (<a class="el" href="classball_1_1FileObserver2.html">FileObserver2</a>, <a class="el" href="structbslma_1_1UsesBslmaAllocator.html">bslma::UsesBslmaAllocator</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#aff1b167e25ac03c8cffcb51ae4484f0e">FileObserver2</a> (<a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *basicAllocator=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a887a37a740a229fbbfa24ee052103a07">~FileObserver2</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a718f84a42e6f4e22a059f1c9b9bfb6cf">disableFileLogging</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a62b5f1825749c1ff3edcdc8fdc6a4522">disableLifetimeRotation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a70f3c4be04ad2933efe8f200a5e9f2a2">disableTimeIntervalRotation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#aca50f27025f3357fd7cafd7b3b70fb73">disableSizeRotation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a3f7695dd99c10311c411939750f3c9b5">disablePublishInLocalTime</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#ac1402c1eae7cd725d88602bd46ffe2f3">enableFileLogging</a> (const char *logFilenamePattern)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a47c3a1361fe636d4a17c5e69e3b5f1b5">enableFileLogging</a> (const char *logFilenamePattern, bool appendTimestampFlag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a90f55588156a307ad88ad9d62614b1a4">enablePublishInLocalTime</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#abbcd6d09319d6efd6e16adba02adf94a">publish</a> (const <a class="el" href="classball_1_1Record.html">Record</a> &amp;record, const <a class="el" href="classball_1_1Context.html">Context</a> &amp;context)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#ab4a016cad4b0eeae1c16f67da9b56a2f">publish</a> (const <a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt; const <a class="el" href="classball_1_1Record.html">Record</a> &gt; &amp;record, const <a class="el" href="classball_1_1Context.html">Context</a> &amp;context)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a9ee79d804584e6ef28cce76b990d4936">releaseRecords</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#af903ed636013d89394db26cf862ce61b">forceRotation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a00361b6bcdf64fda3d1ee9b8660a015b">rotateOnSize</a> (int size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a4c3cac93a11ed3a820fc28b5c7eee93d">rotateOnLifetime</a> (const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;timeInterval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a0a26f453cfed608f1a1d691a3e098b1f">rotateOnTimeInterval</a> (const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;interval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a1b9514862e635b92101d5edcebf2dc22">rotateOnTimeInterval</a> (const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;interval, const <a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> &amp;referenceStartTime)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#afb2c8b2b2181bb399e5f8515f54511ab">setLogFileFunctor</a> (const <a class="el" href="classball_1_1FileObserver2.html#aa843dfff44428a636f7834dd72f60222">LogRecordFunctor</a> &amp;logFileFunctor)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#ac112928fc3d8680de1e33bfc40683d6a">setOnFileRotationCallback</a> (const <a class="el" href="classball_1_1FileObserver2.html#a02c20d24e2576f1272ec7dbcbf303664">OnFileRotationCallback</a> &amp;onRotationCallback)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a00baf5ba8678eaa046961e338faf27a4">isFileLoggingEnabled</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a82e329e7de77359a0cfaf712990b4ace">isFileLoggingEnabled</a> (<a class="el" href="classbsl_1_1basic__string.html">bsl::string</a> *result) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#aa3cb011f3927701453a7528cfd2f0386">isPublishInLocalTimeEnabled</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#aa82534ed8d8110a3afcc513bb4e6e5ee">rotationLifetime</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a3acef51ea487fcfd68b1639fe1382820">rotationSize</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1FileObserver2.html#a09df7777b4648882f0ab6ef2702154ec">localTimeOffset</a> () const </td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class implements the <code><a class="el" href="classball_1_1Observer.html">Observer</a></code> protocol. The <code>publish</code> method of this class outputs the log records that it receives to a user-specified file. This class is thread-safe; different threads can operate on this object concurrently. This class is exception-neutral with no guarantee of rollback. In no event is memory leaked. </p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="aa843dfff44428a636f7834dd72f60222"></a><!-- doxytag: member="ball::FileObserver2::LogRecordFunctor" ref="aa843dfff44428a636f7834dd72f60222" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bsl::function&lt;void(bsl::ostream&amp;, const <a class="el" href="classball_1_1Record.html">Record</a>&amp;)&gt; <a class="el" href="classball_1_1FileObserver2.html#aa843dfff44428a636f7834dd72f60222">ball::FileObserver2::LogRecordFunctor</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><code>LogRecordFunctor</code> defines the type of the functor used for formatting log records to a stream. </p>

</div>
</div>
<a class="anchor" id="a02c20d24e2576f1272ec7dbcbf303664"></a><!-- doxytag: member="ball::FileObserver2::OnFileRotationCallback" ref="a02c20d24e2576f1272ec7dbcbf303664" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bsl::function&lt;void(int, const <a class="el" href="classbsl_1_1basic__string.html">bsl::string</a>&amp;)&gt; <a class="el" href="classball_1_1FileObserver2.html#a02c20d24e2576f1272ec7dbcbf303664">ball::FileObserver2::OnFileRotationCallback</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>An <code>OnFileRotationCallback</code> is an alias for a user-supplied callback function that is invoked after the file observer attempts to rotate its log file. The provided callback function takes two parameters: (1) an integer status value, 0 indicates a new log file was successfully created and a non-zero value indicates an error occurred while rotating the file (2) a string that, if a file rotation was successfully performed, indicates the name of the rotated log file. E.g.: <br/>
<br/>
</p>
<div class="fragment"><pre class="fragment">          <span class="keywordtype">void</span> onLogFileRotation(<span class="keywordtype">int</span>                rotationStatus,
                                 <span class="keyword">const</span> <a class="code" href="classbsl_1_1basic__string.html">bsl::string</a>&amp; rotatedLogFileName);
</pre></div><p><br/>
<br/>
 </p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aff1b167e25ac03c8cffcb51ae4484f0e"></a><!-- doxytag: member="ball::FileObserver2::FileObserver2" ref="aff1b167e25ac03c8cffcb51ae4484f0e" args="(bslma::Allocator *basicAllocator=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ball::FileObserver2::FileObserver2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *&nbsp;</td>
          <td class="paramname"> <em>basicAllocator</em> = <code>0</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a file observer with file logging initially disabled. Optionally specify a <code>basicAllocator</code> used to supply memory. If <code>basicAllocator</code> is 0, the currently installed default allocator is used. Note that, when enabled for file logging, the timestamp attribute of published records is written in UTC time by default. </p>

</div>
</div>
<a class="anchor" id="a887a37a740a229fbbfa24ee052103a07"></a><!-- doxytag: member="ball::FileObserver2::~FileObserver2" ref="a887a37a740a229fbbfa24ee052103a07" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ball::FileObserver2::~FileObserver2 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Close the log file of this file observer if file logging is enabled, and destroy this file observer. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac8eb6c75ddfde049d24048b6cf3149df"></a><!-- doxytag: member="ball::FileObserver2::BSLMF_NESTED_TRAIT_DECLARATION" ref="ac8eb6c75ddfde049d24048b6cf3149df" args="(FileObserver2, bslma::UsesBslmaAllocator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ball::FileObserver2::BSLMF_NESTED_TRAIT_DECLARATION </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classball_1_1FileObserver2.html">FileObserver2</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbslma_1_1UsesBslmaAllocator.html">bslma::UsesBslmaAllocator</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a718f84a42e6f4e22a059f1c9b9bfb6cf"></a><!-- doxytag: member="ball::FileObserver2::disableFileLogging" ref="a718f84a42e6f4e22a059f1c9b9bfb6cf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::disableFileLogging </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable file logging for this file observer. This method has no effect if file logging is not enabled. </p>

</div>
</div>
<a class="anchor" id="a62b5f1825749c1ff3edcdc8fdc6a4522"></a><!-- doxytag: member="ball::FileObserver2::disableLifetimeRotation" ref="a62b5f1825749c1ff3edcdc8fdc6a4522" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::disableLifetimeRotation </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable log file rotation based on periodic time interval for this file observer. This method has no effect if rotation-on-time-interval is not enabled.</p>
<p>DEPRECATED: Use <code>disableTimeIntervalRotation</code> instead. </p>

</div>
</div>
<a class="anchor" id="a70f3c4be04ad2933efe8f200a5e9f2a2"></a><!-- doxytag: member="ball::FileObserver2::disableTimeIntervalRotation" ref="a70f3c4be04ad2933efe8f200a5e9f2a2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::disableTimeIntervalRotation </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable log file rotation based on periodic time interval for this file observer. This method has no effect if rotation-on-time-interval is not enabled. </p>

</div>
</div>
<a class="anchor" id="aca50f27025f3357fd7cafd7b3b70fb73"></a><!-- doxytag: member="ball::FileObserver2::disableSizeRotation" ref="aca50f27025f3357fd7cafd7b3b70fb73" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::disableSizeRotation </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable log file rotation based on log file size for this file observer. This method has no effect if rotation-on-size is not enabled. </p>

</div>
</div>
<a class="anchor" id="a3f7695dd99c10311c411939750f3c9b5"></a><!-- doxytag: member="ball::FileObserver2::disablePublishInLocalTime" ref="a3f7695dd99c10311c411939750f3c9b5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::disablePublishInLocalTime </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable publishing of the timestamp attribute of records in local time by this file observer (time stamps will be in UTC time). This method has no effect if publishing in local time is not enabled. This method also disables using local time values when replacing <code>%</code>-escape sequences when generating a log file name (see <code>enableFileLogging</code>). </p>

</div>
</div>
<a class="anchor" id="ac1402c1eae7cd725d88602bd46ffe2f3"></a><!-- doxytag: member="ball::FileObserver2::enableFileLogging" ref="ac1402c1eae7cd725d88602bd46ffe2f3" args="(const char *logFilenamePattern)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ball::FileObserver2::enableFileLogging </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>logFilenamePattern</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enable logging of all messages published to this file observer to a file indicated by the specified <code>logFilenamePattern</code>. Return 0 on success, a positive value if file logging is already enabled, and a negative value otherwise. If file logging is already enabled, fail with no effect. The basename of <code>logFilenamePattern</code> may contain <code>%</code>-escape sequences that are interpreted as follows: <br/>
<br/>
</p>
<div class="fragment"><pre class="fragment">           %Y - current year (four digits with leading zeros)
           %M - current month (two digits with leading zeros)
           %D - current day (two digits with leading zeros)
           %h - current hour (two digits with leading zeros)
           %m - current minute (two digits with leading zeros)
           %s - current second (two digits with leading zeros)
           %T - current datetime, equivalent to <span class="stringliteral">&quot;%Y%M%D_%h%m%s&quot;</span>
           %p - process Id
</pre></div><p><br/>
<br/>
 Each time a log file is opened by this file observer (upon a successful call to this method and following each log file rotation) the name of the log file is derived from <code>logFilenamePattern</code> by interpreting the above recognized <code>%</code>-escape sequences. On rotation, the current log file is closed, and a new log-file name is derived. If the newly derived log-file name is the same as that of the current (rotated) log file, the current log file is renamed by appending a timestamp of the form ".%Y%M%D_%h%m%s". Then, the new log file is opened for logging. If the <code>isPublishInLocalTimeEnabled</code> attribute of this observer is <code>true</code>, the <code>%</code>-escape sequences related to time will be substituted with local time values, and UTC values otherwise. </p>

</div>
</div>
<a class="anchor" id="a47c3a1361fe636d4a17c5e69e3b5f1b5"></a><!-- doxytag: member="ball::FileObserver2::enableFileLogging" ref="a47c3a1361fe636d4a17c5e69e3b5f1b5" args="(const char *logFilenamePattern, bool appendTimestampFlag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ball::FileObserver2::enableFileLogging </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>logFilenamePattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>appendTimestampFlag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><b>DEPRECATED</b>: Use <code>enableFileLogging(logFilenamePattern)</code> instead (use the ".%T" pattern to replicate <code>appendTimestampFlag</code> being enabled).</p>
<p>Enable logging of all messages published to this file observer to a file indicated by the specified <code>logFilenamePattern</code> and append a timestamp to the log filename if specified <code>appendTimestampFlag</code> is set to <code>true</code>. Return 0 on success, a positive value if file logging is already enabled, and a negative value otherwise. If file logging is already enabled, fail with no effect. If the <code>appendTimestampFlag</code> is <code>true</code> and <code>logFilenamePattern</code> does not contain any <code>%</code>-escape sequence, this method behaves as if ".%T" is appended to <code>logFilenamePattern</code>. </p>

</div>
</div>
<a class="anchor" id="a90f55588156a307ad88ad9d62614b1a4"></a><!-- doxytag: member="ball::FileObserver2::enablePublishInLocalTime" ref="a90f55588156a307ad88ad9d62614b1a4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::enablePublishInLocalTime </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enable publishing of the timestamp attribute of records in local time by this file observer. This method has no effect if publishing in local time is already enabled. This method also enables using local time values when replacing <code>%</code>-escape sequences when generating a log file name (see <code>enableFileLogging</code>). </p>

</div>
</div>
<a class="anchor" id="abbcd6d09319d6efd6e16adba02adf94a"></a><!-- doxytag: member="ball::FileObserver2::publish" ref="abbcd6d09319d6efd6e16adba02adf94a" args="(const Record &amp;record, const Context &amp;context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::publish </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classball_1_1Record.html">Record</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classball_1_1Context.html">Context</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process the specified log <code>record</code> having the specified publishing <code>context</code> by writing <code>record</code> and <code>context</code> to a file if file logging is enabled for this file observer. The method has no effect if file logging is not enabled. </p>

<p>Reimplemented from <a class="el" href="classball_1_1Observer.html#abbc4be4bd050d9922bf23351b40cd314">ball::Observer</a>.</p>

</div>
</div>
<a class="anchor" id="ab4a016cad4b0eeae1c16f67da9b56a2f"></a><!-- doxytag: member="ball::FileObserver2::publish" ref="ab4a016cad4b0eeae1c16f67da9b56a2f" args="(const bsl::shared_ptr&lt; const Record &gt; &amp;record, const Context &amp;context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::publish </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt; const <a class="el" href="classball_1_1Record.html">Record</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classball_1_1Context.html">Context</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process the record referred by the specified shared pointer <code>record</code> by writing the record and the specified <code>context</code> of the record to a file if file logging is enabled for this file observer. The method has no effect if file logging is not enabled. </p>

<p>Reimplemented from <a class="el" href="classball_1_1Observer.html#a8500c2bf27d837051867c0db6557a072">ball::Observer</a>.</p>

</div>
</div>
<a class="anchor" id="a9ee79d804584e6ef28cce76b990d4936"></a><!-- doxytag: member="ball::FileObserver2::releaseRecords" ref="a9ee79d804584e6ef28cce76b990d4936" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::releaseRecords </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Discard any shared reference to a <code><a class="el" href="classball_1_1Record.html">Record</a></code> object that was supplied to the <code>publish</code> method, and is held by this observer. Note that this operation should be called if resources underlying the previously provided shared-pointers must be released. </p>

<p>Reimplemented from <a class="el" href="classball_1_1Observer.html#a12a582bec075f1b2769de6ebe961188b">ball::Observer</a>.</p>

</div>
</div>
<a class="anchor" id="af903ed636013d89394db26cf862ce61b"></a><!-- doxytag: member="ball::FileObserver2::forceRotation" ref="af903ed636013d89394db26cf862ce61b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::forceRotation </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Forcefully perform a log file rotation by this file observer. Close the current log file, rename the log file if necessary, and open a new log file. See the "Rotated File Naming" section under @DESCRIPTION in the component-level documentation for details on filenames of the rotated log files. This method has no effect if file logging is not enabled. </p>

</div>
</div>
<a class="anchor" id="a00361b6bcdf64fda3d1ee9b8660a015b"></a><!-- doxytag: member="ball::FileObserver2::rotateOnSize" ref="a00361b6bcdf64fda3d1ee9b8660a015b" args="(int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::rotateOnSize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set this file observer to perform log file rotation when the size of the file exceeds the specified <code>size</code> (in kilo-bytes). This rule replaces any rotation-on-size rule currently in effect. The behavior is undefined unless <code>size &gt; 0</code>. </p>

</div>
</div>
<a class="anchor" id="a4c3cac93a11ed3a820fc28b5c7eee93d"></a><!-- doxytag: member="ball::FileObserver2::rotateOnLifetime" ref="a4c3cac93a11ed3a820fc28b5c7eee93d" args="(const bdlt::DatetimeInterval &amp;timeInterval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::rotateOnLifetime </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>timeInterval</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set this file observer to perform a periodic log-file rotation at multiples of the specified <code>interval</code>. The behavior is undefined unless <code>0 &lt; interval.totalMilliseconds()</code>. This rule replaces any rotation-on-time-interval rule currently in effect.</p>
<p>DEPRECATED: Use <code>rotateOnTimeInterval</code> instead. </p>

</div>
</div>
<a class="anchor" id="a0a26f453cfed608f1a1d691a3e098b1f"></a><!-- doxytag: member="ball::FileObserver2::rotateOnTimeInterval" ref="a0a26f453cfed608f1a1d691a3e098b1f" args="(const bdlt::DatetimeInterval &amp;interval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::rotateOnTimeInterval </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>interval</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1b9514862e635b92101d5edcebf2dc22"></a><!-- doxytag: member="ball::FileObserver2::rotateOnTimeInterval" ref="a1b9514862e635b92101d5edcebf2dc22" args="(const bdlt::DatetimeInterval &amp;interval, const bdlt::Datetime &amp;referenceStartTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::rotateOnTimeInterval </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>referenceStartTime</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set this file observer to perform a periodic log-file rotation at multiples of the specified <code>interval</code>. Optionally, specify <code>referenceStartTime</code> indicating the <em>local</em> datetime to use as the starting point for computing the periodic rotation schedule. <code>referenceStartTime</code> is interpreted using the local-time offset at the time this object was constructed. If <code>referenceStartTime</code> is unspecified, the current time is used. The behavior is undefined unless <code>0 &lt; interval.totalMilliseconds()</code>. This rule replaces any rotation-on-time-interval rule currently in effect. Note that <code>referenceStartTime</code> may be a fixed time in the past. E.g., a reference time of <code>bdlt::Datetime(1, 1, 1)</code> and an interval of 24 hours would configure a periodic rotation at midnight each day. </p>

</div>
</div>
<a class="anchor" id="afb2c8b2b2181bb399e5f8515f54511ab"></a><!-- doxytag: member="ball::FileObserver2::setLogFileFunctor" ref="afb2c8b2b2181bb399e5f8515f54511ab" args="(const LogRecordFunctor &amp;logFileFunctor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::setLogFileFunctor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classball_1_1FileObserver2.html#aa843dfff44428a636f7834dd72f60222">LogRecordFunctor</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>logFileFunctor</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the formatting functor used when writing records to the log file of this file observer to the specified <code>logFileFunctor</code>. Note that a default format is in effect until this method is called. </p>

</div>
</div>
<a class="anchor" id="ac112928fc3d8680de1e33bfc40683d6a"></a><!-- doxytag: member="ball::FileObserver2::setOnFileRotationCallback" ref="ac112928fc3d8680de1e33bfc40683d6a" args="(const OnFileRotationCallback &amp;onRotationCallback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::FileObserver2::setOnFileRotationCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classball_1_1FileObserver2.html#a02c20d24e2576f1272ec7dbcbf303664">OnFileRotationCallback</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>onRotationCallback</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the specified <code>onRotationCallback</code> to be invoked after each time this file observer attempts perform a log file rotation. The behavior is undefined if the supplied function calls either <code>setOnFileRotationCallback</code>, <code>forceRotation</code>, or <code>publish</code> on this file observer (i.e., the supplied callback should <em>not</em> attempt to write to the <code>ball</code> log). </p>

</div>
</div>
<a class="anchor" id="a00baf5ba8678eaa046961e338faf27a4"></a><!-- doxytag: member="ball::FileObserver2::isFileLoggingEnabled" ref="a00baf5ba8678eaa046961e338faf27a4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ball::FileObserver2::isFileLoggingEnabled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a82e329e7de77359a0cfaf712990b4ace"></a><!-- doxytag: member="ball::FileObserver2::isFileLoggingEnabled" ref="a82e329e7de77359a0cfaf712990b4ace" args="(bsl::string *result) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ball::FileObserver2::isFileLoggingEnabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbsl_1_1basic__string.html">bsl::string</a> *&nbsp;</td>
          <td class="paramname"> <em>result</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return <code>true</code> if file logging is enabled for this file observer, and <code>false</code> otherwise. Load the optionally specified <code>result</code> with the name of the current log file if file logging is enabled, and leave <code>result</code> unaffected otherwise. </p>

</div>
</div>
<a class="anchor" id="aa3cb011f3927701453a7528cfd2f0386"></a><!-- doxytag: member="ball::FileObserver2::isPublishInLocalTimeEnabled" ref="aa3cb011f3927701453a7528cfd2f0386" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ball::FileObserver2::isPublishInLocalTimeEnabled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return <code>true</code> if this file observer writes the timestamp attribute of records that it publishes in local time, and <code>false</code> otherwise. </p>

</div>
</div>
<a class="anchor" id="aa82534ed8d8110a3afcc513bb4e6e5ee"></a><!-- doxytag: member="ball::FileObserver2::rotationLifetime" ref="aa82534ed8d8110a3afcc513bb4e6e5ee" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> ball::FileObserver2::rotationLifetime </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the lifetime of the log file that will trigger a file rotation by this file observer if rotation-on-lifetime is in effect, and a 0 time interval otherwise. </p>

</div>
</div>
<a class="anchor" id="a3acef51ea487fcfd68b1639fe1382820"></a><!-- doxytag: member="ball::FileObserver2::rotationSize" ref="a3acef51ea487fcfd68b1639fe1382820" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ball::FileObserver2::rotationSize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the size (in kilo-bytes) of the log file that will trigger a file rotation by this file observer if rotation-on-size is in effect, and 0 otherwise. </p>

</div>
</div>
<a class="anchor" id="a09df7777b4648882f0ab6ef2702154ec"></a><!-- doxytag: member="ball::FileObserver2::localTimeOffset" ref="a09df7777b4648882f0ab6ef2702154ec" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> ball::FileObserver2::localTimeOffset </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><b>DEPRECATED</b>: Use <code><a class="el" href="structbdlt_1_1LocalTimeOffset.html">bdlt::LocalTimeOffset</a></code> instead.</p>
<p>Return the difference between the local time and UTC time in effect when this file observer was constructed. Note that this value remains unchanged during the lifetime of this object and therefore may become incorrect when the difference between the local time and UTC time changes (e.g., when transitioning into or out of daylight savings time). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ball__fileobserver2_8h_source.html">ball_fileobserver2.h</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Oct 15 2015 14:34:27 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
