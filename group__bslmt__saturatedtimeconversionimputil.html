<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: bslmt_saturatedtimeconversionimputil Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bslmt_saturatedtimeconversionimputil<br/>
<small>
[<a class="el" href="group__bslmt.html">Package bslmt</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide special narrowing conversions for time types.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebslmt.html">bslmt</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide special narrowing conversions for time types. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="structbslmt_1_1SaturatedTimeConversionImpUtil.html">bslmt::SaturatedTimeConversionImpUtil</a> </td><td>saturating time conversions.  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component defines a namespace containing static functions that perform narrowing conversions on time-related types, <code><a class="el" href="structbslmt_1_1SaturatedTimeConversionImpUtil.html">bslmt::SaturatedTimeConversionImpUtil</a></code>. The provided conversions "saturate", meaning that for input values outside the representable range of the destination variable, the destination variable will be set to its maximum or minimum value (whichever is closer to the input value). Such saturating conversions are typically used to implement functions with a time-out (e.g., <code><a class="el" href="classbslmt_1_1Condition.html#a84ad228f7f596a9bb0b80e1b2cbc02a8">bslmt::Condition::timedWait</a></code>) where a user-supplied time-out must be converted to a different time type before calling a system-library function. In such situations it is often simpler, safer, and within contract to perform a saturating conversion, rather than either return an error status or define complex undefined behavior for the function. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Suppose we need to assign a value held in a <code><a class="el" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a></code> to an <code>unsigned int</code>, where the <code>unsigned int</code> is to contain an equivalent time interval expressed in milliseconds. A <code><a class="el" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a></code> is able to represent intervals that are outside the range of intervals that can be represented by an <code>unsigned int</code> number of milliseconds (e.g., any negative time interval). <code><a class="el" href="structbslmt_1_1SaturatedTimeConversionImpUtil.html">bslmt::SaturatedTimeConversionImpUtil</a></code> handles values outside the representable range of the destination type by "saturating", that is values outside the representable range of the destination type will be assigned the maximum or minimum representable value of the destination type (whichever is closer to the source value). </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we define variables of our source (<code><a class="el" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a></code>) and destination (<code>unsigned int</code>) types: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> destinationInterval;
  <a class="code" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a> sourceInterval;
</pre></div><br/>
<br/>
 Then, we try a value that does not require saturation and observe that <code>toMillisec</code> converts it without modification (beyond loss of precision): <br/>
<br/>
<div class="fragment"><pre class="fragment">  sourceInterval.<a class="code" href="classbsls_1_1TimeInterval.html#a324afc98a7cb41b43aa79f3cf8d2617f">setInterval</a>(4, 321000000);
  <a class="code" href="structbslmt_1_1SaturatedTimeConversionImpUtil.html#a6d1f92b25e98e2b2e1929b6a2ce2a81a">bslmt::SaturatedTimeConversionImpUtil::toMillisec</a>(
                                       &amp;destinationInterval, sourceInterval);
  assert(4321 == destinationInterval);
</pre></div><br/>
<br/>
 Next, we calculate the maximum value that can be represented in an <code>unsigned int</code> number of milliseconds, and verify that converting an equivalent <code><a class="el" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a></code> does not modify the value: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxDestinationInterval =
                                    bsl::numeric_limits&lt;unsigned int&gt;::max();
  <a class="code" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a> maximumTimeInterval(
                              maxDestinationInterval / 1000,
                              (maxDestinationInterval % 1000) * 1000 * 1000);
  <a class="code" href="structbslmt_1_1SaturatedTimeConversionImpUtil.html#a6d1f92b25e98e2b2e1929b6a2ce2a81a">bslmt::SaturatedTimeConversionImpUtil::toMillisec</a>(
                                 &amp;destinationInterval, maximumTimeInterval);
  assert(maxDestinationInterval == destinationInterval);
</pre></div><br/>
<br/>
 Now, we attempt to convert a value greater than the maximum representable in an <code>unsigned int</code> milliseconds and verify that the resulting value is the maximum representable <code>unsigned int</code> value: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a> aboveMaxInterval = maximumTimeInterval +
                                          <a class="code" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a>(0, 1000 * 1000);
  <a class="code" href="structbslmt_1_1SaturatedTimeConversionImpUtil.html#a6d1f92b25e98e2b2e1929b6a2ce2a81a">bslmt::SaturatedTimeConversionImpUtil::toMillisec</a>(
                                     &amp;destinationInterval, aboveMaxInterval);
  assert(maxDestinationInterval == destinationInterval);
</pre></div><br/>
<br/>
 Finally, we try a value less than 0 and observe the result of the saturated conversion is 0 (the minimum representable value): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a> belowMinimumInterval(-1, 0);
  <a class="code" href="structbslmt_1_1SaturatedTimeConversionImpUtil.html#a6d1f92b25e98e2b2e1929b6a2ce2a81a">bslmt::SaturatedTimeConversionImpUtil::toMillisec</a>(
                                 &amp;destinationInterval, belowMinimumInterval);
  assert(0 == destinationInterval);
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:49:01 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
