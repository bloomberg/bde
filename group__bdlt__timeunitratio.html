<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 2.23.1 OSS: bdlt_timeunitratio Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bdlt_timeunitratio<br/>
<small>
[<a class="el" href="group__bdlt.html">Package bdlt</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide constants characterizing ratios between common time units.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebdlt.html">bdlt</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Usage</a> <ul>
<li>
<a href="#3.1.1">Example 1: Breaking a Time Interval Into Component Parts</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide constants characterizing ratios between common time units. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="structbdlt_1_1TimeUnitRatio.html">bdlt::TimeUnitRatio</a> </td><td>namespace for common time-unit-ratio constants  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a utility <code>struct</code>, <code><a class="el" href="structbdlt_1_1TimeUnitRatio.html">bdlt::TimeUnitRatio</a></code>, that defines a namespace for constants that characterize the ratios between commonly used time units. Ratios are provided for combinations of all time units from a nanosecond up through a day. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Each constant defined in this namespace has at least two forms, a full form and an abbreviated form following the patterns: <br/>
<br/>
<div class="fragment"><pre class="fragment">  bdlt::TimeUnitRatio::k_SMALLUNITS_PER_LARGEUNIT
  bdlt::TimeUnitRatio::k_SU_PER_LU
</pre></div><br/>
<br/>
 Where <code>SMALLUNIT</code> and <code>LARGEUNIT</code> are members of the following group: <br/>
<br/>
<div class="fragment"><pre class="fragment">  NANOSECOND
  MICROSECOND
  MILLISECOND
  SECOND
  MINUTE
  HOUR
  DAY
</pre></div><br/>
<br/>
 and <code>SU</code> and <code>LU</code> are abbreviations in the following group: <br/>
<br/>
<div class="fragment"><pre class="fragment">  NS <span class="comment">// abbreviation for &#39;NANOSECOND&#39;</span>
  US <span class="comment">// abbreviation for &#39;MICROSECOND&#39;</span>
  MS <span class="comment">// abbreviation for &#39;MILLISECOND&#39;</span>
  S  <span class="comment">// abbreviation for &#39;SECOND&#39;</span>
  M  <span class="comment">// abbreviation for &#39;MINUTE&#39;</span>
  H  <span class="comment">// abbreviation for &#39;HOUR&#39;</span>
  D  <span class="comment">// abbreviation for &#39;DAY&#39;</span>
</pre></div><br/>
<br/>
 Note that <code>SMALLUNIT</code> (<code>SU</code>) is always a smaller unit than <code>LARGEUNIT</code> (<code>LU</code>). Thus, the (whole) number of microseconds in an hour is characterized by the constants: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbdlt_1_1TimeUnitRatio.html#ab8a74985a7c18cfaeb4bd17d8587d616">bdlt::TimeUnitRatio::k_MICROSECONDS_PER_HOUR</a>
  <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a278b6dd44cdd448b531fae9c60aefb55">bdlt::TimeUnitRatio::k_US_PER_H</a><span class="stringliteral">&#39;</span>
</pre></div><br/>
<br/>
 Additionally, ratios that can be represented by a 32-bit integer also have two corresponding 32-bit constants, having the same names as the constants described above, but incorporate a <code>_32</code> suffix. Thus, the number of milliseconds per minute is characterized by four constants: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbdlt_1_1TimeUnitRatio.html#add4d4be03bd9b4da9bfd3778faf7ec66">bdlt::TimeUnitRatio::k_MILLISECONDS_PER_MINUTE</a>
  <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a268ec0a100fdd0aadf3fc35cc3bed181">bdlt::TimeUnitRatio::k_MS_PER_M</a>
  <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a52e3be792f964d0de0e3387e089a2190">bdlt::TimeUnitRatio::k_MILLISECONDS_PER_MINUTE_32</a>
  <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a227759945ccc93cc3ef79eacd7cf4359">bdlt::TimeUnitRatio::k_MS_PER_M_32</a>
</pre></div><br/>
<br/>
 By providing both 64- and 32-bit versions of the constants, this component allows the programmer to minimize the use of casts in time unit calculations. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_breaking_a_time_interval_into_component_parts"></a> <a class="anchor" id="usage.example_1~3A_breaking_a_time_interval_into_component_parts"></a> <a class="anchor" id="description.usage.example_1~3A_breaking_a_time_interval_into_component_parts"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.1.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Breaking a Time Interval Into Component Parts: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Components that deal with time often need to convert between various units. Each component that needs to perform such conversions could derive the constants needed locally, but doing so would result in an inconsistent vocabulary across components, and multiple opportunities for bugs. <code><a class="el" href="structbdlt_1_1TimeUnitRatio.html">bdlt::TimeUnitRatio</a></code> achieves the desired consistency and avoids bugs by providing a single location for the constants used in such conversions. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Suppose we have a time interval described as an integral number of nanoseconds, and we need to break it down into its constituent second, millisecond, microsecond, and nanosecond parts. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we define a variable representing the number of nanoseconds that have elapsed since a particular event: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> interval = 62003004005;  <span class="comment">// nanoseconds since event</span>
</pre></div><br/>
<br/>
 Then, we extract the minutes part from the total, using the constant <code><a class="el" href="structbdlt_1_1TimeUnitRatio.html#a994995f2b03d74c002937e949292a480">bdlt::TimeUnitRatio::k_NS_PER_M</a></code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> minutesPart =
                                  interval / <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a994995f2b03d74c002937e949292a480">bdlt::TimeUnitRatio::k_NS_PER_M</a>;
</pre></div><br/>
<br/>
 Next, we calculate the remaining nanoseconds using the same constant: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> remainder = interval % <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a994995f2b03d74c002937e949292a480">bdlt::TimeUnitRatio::k_NS_PER_M</a>;
</pre></div><br/>
<br/>
 Then, we extract the seconds part from the remainder, using the constant <code><a class="el" href="structbdlt_1_1TimeUnitRatio.html#a7e1ade8e16c86f0c3c2fd914fd49e8d4">bdlt::TimeUnitRatio::k_NS_PER_S</a></code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> secondsPart =
                                 remainder / <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a7e1ade8e16c86f0c3c2fd914fd49e8d4">bdlt::TimeUnitRatio::k_NS_PER_S</a>;
</pre></div><br/>
<br/>
 Next, we calculate the remaining nanoseconds using the same constant: <br/>
<br/>
<div class="fragment"><pre class="fragment">  remainder %= <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a7e1ade8e16c86f0c3c2fd914fd49e8d4">bdlt::TimeUnitRatio::k_NS_PER_S</a>;
</pre></div><br/>
<br/>
 Then, we extract the milliseconds part from the remainder, using the constant <code><a class="el" href="structbdlt_1_1TimeUnitRatio.html#a6d1c5f3accc8d2fbed1b0d2223d53fa4">bdlt::TimeUnitRatio::k_NS_PER_MS</a></code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> millisecondsPart =
                                remainder / <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a6d1c5f3accc8d2fbed1b0d2223d53fa4">bdlt::TimeUnitRatio::k_NS_PER_MS</a>;
</pre></div><br/>
<br/>
 Next, we calculate the remaining nanoseconds using the same constant: <br/>
<br/>
<div class="fragment"><pre class="fragment">  remainder %= <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a6d1c5f3accc8d2fbed1b0d2223d53fa4">bdlt::TimeUnitRatio::k_NS_PER_MS</a>;
</pre></div><br/>
<br/>
 Then, we extract the microseconds part from the remainder, using the constant <code><a class="el" href="structbdlt_1_1TimeUnitRatio.html#a459257c9233679a9f1e66f26265b1fbb">bdlt::TimeUnitRatio::k_NS_PER_US</a></code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> microsecondsPart =
                                remainder / <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a459257c9233679a9f1e66f26265b1fbb">bdlt::TimeUnitRatio::k_NS_PER_US</a>;
</pre></div><br/>
<br/>
 Next, we calculate the remaining nanoseconds using the same constant: <br/>
<br/>
<div class="fragment"><pre class="fragment">  remainder %= <a class="code" href="structbdlt_1_1TimeUnitRatio.html#a459257c9233679a9f1e66f26265b1fbb">bdlt::TimeUnitRatio::k_NS_PER_US</a>;
</pre></div><br/>
<br/>
 Now, we extract the nanoseconds part, which is exactly the remainder we already have: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> nanosecondsPart = remainder;
</pre></div><br/>
<br/>
 Finally, we confirm that the parts we have extracted all have the correct values: <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(1 == minutesPart);
  assert(2 == secondsPart);
  assert(3 == millisecondsPart);
  assert(4 == microsecondsPart);
  assert(5 == nanosecondsPart);
</pre></div><br/>
<br/>
 Note that in practice, the number of nanoseconds since the event would be provided by some system utility, and not a constant as was shown here for purposes of exposition. </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Jun 2 2015 13:40:20 for BDE Release 2.23.1 OSS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
