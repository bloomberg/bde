<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 2.23.1 OSS: bslma_destructorguard Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bslma_destructorguard<br/>
<small>
[<a class="el" href="group__bslma.html">Package bslma</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a guard to unconditionally manage an object.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebslma.html">bslma</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a guard to unconditionally manage an object. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbslma_1_1DestructorGuard.html">bslma::DestructorGuard</a> </td><td>guard to unconditionally manage an object  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__bslma__destructorproctor.html" title="Provide a proctor to conditionally manage an object.">Component bslma_destructorproctor</a>, <a class="el" href="group__bslma__autodestructor.html" title="Provide a range proctor to manage an array of objects.">Component bslma_autodestructor</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a guard class template to unconditionally manage an (otherwise-unmanaged) object of parameterized <code>TYPE</code> supplied at construction. The managed object is destroyed automatically when the guard object goes out of scope by calling the (managed) object's destructor. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Suppose we have a situation where one of the two constructors will be called to create an object on the stack for performance reasons. The construction thus occurs within either of the branches of an <code>if</code> statement, so the object itself, to survive the end of the "then" or "else" block, must be constructed in a <code><a class="el" href="unionbsls_1_1ObjectBuffer.html">bsls::ObjectBuffer</a></code>. Once constructed, the object would not be destroyed automatically, so to make sure it will be destroyed, we place it under the management of a <code><a class="el" href="classbslma_1_1DestructorGuard.html">bslma::DestructorGuard</a></code>. After that, we know that however the routine exits -- either by a return or as a result of an exception being thrown -- the object will be destroyed. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">double</span> usageExample(<span class="keywordtype">double</span> startValue)
  {
      <a class="code" href="unionbsls_1_1ObjectBuffer.html">bsls::ObjectBuffer&lt;std::vector&lt;double&gt;</a> &gt; buffer;
      std::vector&lt;double&gt;&amp; myVec = buffer.<a class="code" href="unionbsls_1_1ObjectBuffer.html#a6bc8bb8e0767e20cfe4c3d41bbd8391d">object</a>();

      <span class="keywordflow">if</span> (startValue &gt;= 0) {
          <span class="keyword">new</span> (&amp;myVec) std::vector&lt;double&gt;(100, startValue);
      }
      <span class="keywordflow">else</span> {
          <span class="keyword">new</span> (&amp;myVec) std::vector&lt;double&gt;();
      }

      <span class="comment">//***********************************************************</span>
      <span class="comment">// Note the use of the destructor guard on &#39;myVec&#39; (below). *</span>
      <span class="comment">//***********************************************************</span>

      <a class="code" href="classbslma_1_1DestructorGuard.html">bslma::DestructorGuard&lt;std::vector&lt;double&gt;</a> &gt; guard(&amp;myVec);
</pre></div><br/>
<br/>
 Note that regardless of how this routine terminates, <code>myVec</code> will be destroyed. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="comment">// ...</span>

  myVec.push_back(3.0);
</pre></div><br/>
<br/>
 Note that <code>push_back</code> could allocate memory and therefore may throw. However, if it does, <code>myVec</code> will be destroyed automatically along with <code>guard</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordflow">if</span> (myVec[0] &gt;= 5.0) {
      <span class="keywordflow">return</span> 5.0;                                               <span class="comment">// RETURN</span>
</pre></div><br/>
<br/>
 Note that <code>myVec</code> is automatically destroyed as the function returns. <br/>
<br/>
<div class="fragment"><pre class="fragment">  }

  <span class="keywordflow">return</span> myVec[myVec.size() / 2];
</pre></div><br/>
<br/>
 Note that <code>myVec</code> is destroyed after the temporary containing the return value is created. <br/>
<br/>
<div class="fragment"><pre class="fragment">  }
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Jun 2 2015 13:40:21 for BDE Release 2.23.1 OSS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
