<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: bsls_platform Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Component bsls_platform<br/>
<small>
[<a class="el" href="group__bsls.html">Package bsls</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide compile-time support for platform/attribute identification.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
</table>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Macros</a> </li>
<li>
<a href="#4">Description</a> <ul>
<li>
<a href="#4.1">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide compile-time support for platform/attribute identification. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td>bsls::Platform </td><td>namespace for platform traits  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="macros"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Macros: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td>BSLS_PLATFORM_OS_* </td><td>operating system type, sub-type, and version  </td></tr>
</table>
BSLS_PLATFORM_CPU_* instruction set, instruction width, and version BSLS_PLATFORM_CMP_*: compiler vendor, and version BSLS_PLATFORM_AGGRESSIVE_INLINE: inline code for speed over text size </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="4"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component implements a suite of preprocessor macros and traits that identify and define platform-specific compile-time attributes. These attributes consist of the types and versions of (1) the operating system, (2) the processor(s), and (3) the compiler that together make up the platform. Many of the macros defined in this component are configured automatically at compile-time; compile-time switches are used to configure the rest. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Note that, for brevity, the <code>@</code> character in the following (alphabetically organized) tables is used to represent the characters <code>BSLS_PLATFORM</code> -- e.g., <code>@_OS_UNIX</code> represents <code>BSLS_PLATFORM_OS_UNIX</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  =============================================================
                           OPERATING SYSTEM
  -------------------------------------------------------------
              <a class="code" href="classBind__ImplSelector_1_1Type.html">Type</a>                Subtype               Version
  -----------------   -------------------   -------------------
   @_OS_UNIX           @_OS_AIX              @_OS_VER_MAJOR
                       @_OS_HPUX             @_OS_VER_MINOR
                       @_OS_LINUX
                       @_OS_FREEBSD
                       @_OS_SOLARIS
                       @_OS_SUNOS
                       @_OS_CYGWIN
                       @_OS_DARWIN

   @_OS_WINDOWS        @_OS_WIN9X
                       @_OS_WINNT
                       @_OS_WIN2K
                       @_OS_WINXP

  ============================================================
                              PROCESSOR
  ------------------------------------------------------------
          Instruction Set          Width                 Version
  ---------------    -------------------   -------------------
   @_CPU_88000        @_CPU_32_BIT          @_CPU_VER_MAJOR
   @_CPU_ALPHA        @_CPU_64_BIT          @_CPU_VER_MINOR
   @_CPU_HPPA
   @_CPU_X86
   @_CPU_IA64
   @_CPU_X86_64
   @_CPU_MIPS
   @_CPU_POWERPC
   @_CPU_SPARC

  =============================================================
                              COMPILER
  -------------------------------------------------------------
                      Vendor                Version
  -----------------   -------------------
   @_CMP_CLANG         @_CMP_VER_MAJOR
   @_CMP_EDG           @_CMP_VER_MINOR
   @_CMP_GNU
   @_CMP_HP
   @_CMP_IBM
   @_CMP_MSVC
   @_CMP_SUN

  =============================================================

  =============================================================
                              INLINING
  -------------------------------------------------------------
                                  Flag
  -----------------
   @_AGGRESSIVE_INLINE

  =============================================================
</pre></div><br/>
<br/>
 These macros are configured automatically, where possible. At a minimum, the generic operating system type (i.e., either <code>BSLS_PLATFORM_OS_UNIX</code> or <code>BSLS_PLATFORM_OS_WINDOWS</code>) is defined along with exactly one processor macro (e.g., <code>BSLS_PLATFORM_CPU_SPARC</code>) and exactly one compiler macro (e.g., <code>BSLS_PLATFORM_CMP_SUN</code>). Clients may need to supply additional macros (controlled via the <code>-D</code> option of a compiler) if further discrimination is required (e.g., based on sub-type or version of a specific operating system, processor, or compiler). Note that supplying a minor version number implies that the major version is also defined. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The aggressive inlining macro <code>BSLS_PLATFORM_AGGRESSIVE_INLINE</code> is defined as the <code>inline</code> keyword on all compilers except <code>BSLS_PLATFROM_CMP_IBM</code> and <code>BSLS_PLATFORM_CMP_SUN</code>, where it is left empty. This is required for some of our legacy applications where substantially growing the text size is not possible. Even on those platforms, the symbol will be defined as <code>inline</code> if <code>BDE_BUILD_TARGET_AGGRESSIVE_INLINE</code> is passed in via the <code>-D</code> option of the compiler. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="4.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Writing portable software sometimes involves specializing implementations to work with platform-specific interfaces. For example, a socket-level communications framework would need to operate differently on a platform having a Windows operating system than on one having a Unix one (but it is probably unnecessary to distinguish between their respective versions): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="comment">// my_socket.h</span>
<span class="preprocessor">  #include &lt;<a class="code" href="bsls__platform_8h.html" title="Provide compile-time support for platform/attribute identification.">bsls_platform.h</a>&gt;</span>

<span class="preprocessor">  #ifdef BSLS_PLATFORM_OS_WINDOWS</span>
<span class="preprocessor"></span><span class="preprocessor">      #ifndef INCLUDED_WINSOCK2</span>
<span class="preprocessor"></span><span class="preprocessor">      #include &lt;winsock2.h&gt;</span>
<span class="preprocessor">      #define INCLUDED_WINSOCK2</span>
<span class="preprocessor"></span><span class="preprocessor">      #endif</span>
<span class="preprocessor"></span><span class="preprocessor">  #endif</span>
<span class="preprocessor"></span>
  <span class="keyword">class </span>my_Socket {

<span class="preprocessor">  #ifdef BSLS_PLATFORM_OS_WINDOWS</span>
<span class="preprocessor"></span>      SOCKET d_socketObject;  <span class="comment">// Windows SOCKET handle</span>
<span class="preprocessor">  #else</span>
<span class="preprocessor"></span>      <span class="keywordtype">int</span> d_socketObject;     <span class="comment">// Unix socket descriptor</span>
<span class="preprocessor">  #endif</span>
<span class="preprocessor"></span>
  <span class="comment">// ...</span>

  };
</pre></div><br/>
<br/>
 Certain compile-time constants are also provided as preprocessor macros that encapsulate the capability of determining whether a machine is big-endian or little-endian across all supported platforms: <br/>
<br/>
<div class="fragment"><pre class="fragment">  BSLS_PLATFORM_IS_BIG_ENDIAN
  BSLS_PLATFORM_IS_LITTLE_ENDIAN
</pre></div><br/>
<br/>
 These macros are useful for writing platform-independent code, such as a function that converts the bytes in a <code>short</code> to network byte order (which is consistent with big-endian): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">short</span> convertToNetworkByteOrder(<span class="keywordtype">short</span> input)
      <span class="comment">// Return the specified &#39;input&#39; in network byte order.</span>
  {
<span class="preprocessor">  #ifdef BSLS_PLATFORM_IS_BIG_ENDIAN</span>
<span class="preprocessor"></span>      <span class="keywordflow">return</span> input;
<span class="preprocessor">  #else</span>
<span class="preprocessor"></span>      <span class="keywordflow">return</span> ((input &gt;&gt; 8) &amp; 0xFF) | ((input &amp; 0xFF) &lt;&lt; 8);
<span class="preprocessor">  #endif</span>
<span class="preprocessor">  }</span>
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:49:02 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
