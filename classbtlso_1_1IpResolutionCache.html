<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: Class btlso::IpResolutionCache</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacebtlso.html">btlso</a>      </li>
      <li><a class="el" href="classbtlso_1_1IpResolutionCache.html">btlso::IpResolutionCache</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>btlso::IpResolutionCache Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="btlso::IpResolutionCache" -->
<p><code>#include &lt;<a class="el" href="btlso__ipresolutioncache_8h_source.html">btlso_ipresolutioncache.h</a>&gt;</code></p>

<p><a href="classbtlso_1_1IpResolutionCache-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <br class="typebreak"/>
<a class="el" href="structbtlso_1_1ResolveUtil.html#a69b8accc22935530554d51f13afce6f7">ResolveUtil::ResolveByNameCallback</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a7abdaac87c9321eb5c73f770828a2149">ResolveByNameCallback</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a9632e3323fbf434825d5109da8aac64f">BSLMF_NESTED_TRAIT_DECLARATION</a> (<a class="el" href="classbtlso_1_1IpResolutionCache.html">IpResolutionCache</a>, <a class="el" href="structbslma_1_1UsesBslmaAllocator.html">bslma::UsesBslmaAllocator</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a8e3f229a56e21928c252581de34741dc">IpResolutionCache</a> (<a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *basicAllocator=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a57beb440d0016d7d55271dc50c17cc2e">IpResolutionCache</a> (<a class="el" href="classbtlso_1_1IpResolutionCache.html#a7abdaac87c9321eb5c73f770828a2149">ResolveByNameCallback</a> resolverCallback, <a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *basicAllocator=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a9e1c4330c803332b5c97da769faaf23c">removeAll</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a71530355a511789223b2ddd2f3942993">resolveAddress</a> (<a class="el" href="classbsl_1_1vector.html">bsl::vector</a>&lt; <a class="el" href="classbtlso_1_1IPv4Address.html">IPv4Address</a> &gt; *result, const char *hostname, int maxNumAddresses, int *errorCode=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#aac98a83fa08e70f1f4c2dc5029be897e">setTimeToLive</a> (const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#abfed6a2304c0a157ba9a22a9739e88b8">allocator</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a9d6a6b2df717c51f19205e6745f0d17b">lookupAddressRaw</a> (<a class="el" href="classbsl_1_1vector.html">bsl::vector</a>&lt; <a class="el" href="classbtlso_1_1IPv4Address.html">IPv4Address</a> &gt; *result, const char *hostname, int maxNumAddresses) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a7abdaac87c9321eb5c73f770828a2149">ResolveByNameCallback</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a831eccf0f86155898accf70369697dc4">resolverCallback</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a3f49022371cb2a2a03ac961c17c18054">timeToLive</a> () const </td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class provides an efficient mechanism for retrieving the IPv4 addresses of a host machine given its hostname. The first time a client requests the addresses for a hostname, those addresses are retrieved (using the <code>resolverCallback</code> supplied at construction), and cached for future use. Subsequent requests for the same hostname return the cached information (unless the information is stale). The cached addresses remains in the cache for a user-defined time, which defaults to one hour. Stored IP addresses older than the configured interval are considered stale, and a subsequent request for the associated hostname will refresh that set of IP addresses by calling the <code>resolverCallback</code>, supplied at construction.</p>
<p>This class: </p>
<ul>
<li>
is <em>exception-neutral</em>  </li>
<li>
is <em>fully</em> <em>thread-safe</em>  </li>
</ul>
<p>For terminology see <code>bsldoc_glossary</code>. </p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a7abdaac87c9321eb5c73f770828a2149"></a><!-- doxytag: member="btlso::IpResolutionCache::ResolveByNameCallback" ref="a7abdaac87c9321eb5c73f770828a2149" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structbtlso_1_1ResolveUtil.html#a69b8accc22935530554d51f13afce6f7">ResolveUtil::ResolveByNameCallback</a> <a class="el" href="classbtlso_1_1IpResolutionCache.html#a7abdaac87c9321eb5c73f770828a2149">btlso::IpResolutionCache::ResolveByNameCallback</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8e3f229a56e21928c252581de34741dc"></a><!-- doxytag: member="btlso::IpResolutionCache::IpResolutionCache" ref="a8e3f229a56e21928c252581de34741dc" args="(bslma::Allocator *basicAllocator=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btlso::IpResolutionCache::IpResolutionCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *&nbsp;</td>
          <td class="paramname"> <em>basicAllocator</em> = <code>0</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a57beb440d0016d7d55271dc50c17cc2e"></a><!-- doxytag: member="btlso::IpResolutionCache::IpResolutionCache" ref="a57beb440d0016d7d55271dc50c17cc2e" args="(ResolveByNameCallback resolverCallback, bslma::Allocator *basicAllocator=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btlso::IpResolutionCache::IpResolutionCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a7abdaac87c9321eb5c73f770828a2149">ResolveByNameCallback</a>&nbsp;</td>
          <td class="paramname"> <em>resolverCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *&nbsp;</td>
          <td class="paramname"> <em>basicAllocator</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a <code><a class="el" href="classbtlso_1_1IpResolutionCache.html">IpResolutionCache</a></code> object. Optionally specify <code>resolverCallback</code> used to resolve the IP addresses from a hostname. If <code>resolverCallback</code> is not specified, <code>AddressUtil::getAddressDefault</code> will be used. Optionally specify a <code>basicAllocator</code> used to supply memory. If <code>basicAllocator</code> is 0, the currently installed default allocator is used. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9632e3323fbf434825d5109da8aac64f"></a><!-- doxytag: member="btlso::IpResolutionCache::BSLMF_NESTED_TRAIT_DECLARATION" ref="a9632e3323fbf434825d5109da8aac64f" args="(IpResolutionCache, bslma::UsesBslmaAllocator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btlso::IpResolutionCache::BSLMF_NESTED_TRAIT_DECLARATION </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbtlso_1_1IpResolutionCache.html">IpResolutionCache</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbslma_1_1UsesBslmaAllocator.html">bslma::UsesBslmaAllocator</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9e1c4330c803332b5c97da769faaf23c"></a><!-- doxytag: member="btlso::IpResolutionCache::removeAll" ref="a9e1c4330c803332b5c97da769faaf23c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btlso::IpResolutionCache::removeAll </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove all cached data. </p>

</div>
</div>
<a class="anchor" id="a71530355a511789223b2ddd2f3942993"></a><!-- doxytag: member="btlso::IpResolutionCache::resolveAddress" ref="a71530355a511789223b2ddd2f3942993" args="(bsl::vector&lt; IPv4Address &gt; *result, const char *hostname, int maxNumAddresses, int *errorCode=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int btlso::IpResolutionCache::resolveAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbsl_1_1vector.html">bsl::vector</a>&lt; <a class="el" href="classbtlso_1_1IPv4Address.html">IPv4Address</a> &gt; *&nbsp;</td>
          <td class="paramname"> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>hostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxNumAddresses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>errorCode</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Load, into the specified <code>result</code>, the resolved IPv4 addresses of the host with the specified <code>hostname</code>, up to the specified <code>maxNumAddresses</code> on success. Optionally specify <code>errorCode</code> to store the error code returned by the resolver callback if the data is not cached. If <code>errorCode</code> is 0, the error code of the callback is ignored. If the cache already contains an entry for <code>hostname</code> younger than the configured time-to-live, that entry is loaded into <code>result</code>, otherwise, the callback supplied at construction is invoked to populate a new entry in the cache, and that entry is then loaded into <code>result</code>. Return 0 on success with no effect on the <code>errorCode</code>, and a non-zero value with no effect on <code>result</code> otherwise. The behavior is undefined unless <code>1 &lt;= maxNumAddresses</code>. </p>

</div>
</div>
<a class="anchor" id="aac98a83fa08e70f1f4c2dc5029be897e"></a><!-- doxytag: member="btlso::IpResolutionCache::setTimeToLive" ref="aac98a83fa08e70f1f4c2dc5029be897e" args="(const bdlt::DatetimeInterval &amp;value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btlso::IpResolutionCache::setTimeToLive </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the time the cached IP addresses for a particular hostname may exist before they are considered stale. A <code>value</code> of 0 seconds indicates the addresses will never expire. The behavior is undefined unless <code>0 &lt;= value.totalSeconds()</code>. Note that this function will affect data that is already cached. </p>

</div>
</div>
<a class="anchor" id="abfed6a2304c0a157ba9a22a9739e88b8"></a><!-- doxytag: member="btlso::IpResolutionCache::allocator" ref="abfed6a2304c0a157ba9a22a9739e88b8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a>* btlso::IpResolutionCache::allocator </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the allocator used by this object to supply memory. </p>

</div>
</div>
<a class="anchor" id="a9d6a6b2df717c51f19205e6745f0d17b"></a><!-- doxytag: member="btlso::IpResolutionCache::lookupAddressRaw" ref="a9d6a6b2df717c51f19205e6745f0d17b" args="(bsl::vector&lt; IPv4Address &gt; *result, const char *hostname, int maxNumAddresses) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int btlso::IpResolutionCache::lookupAddressRaw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbsl_1_1vector.html">bsl::vector</a>&lt; <a class="el" href="classbtlso_1_1IPv4Address.html">IPv4Address</a> &gt; *&nbsp;</td>
          <td class="paramname"> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>hostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxNumAddresses</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Load, into the specified <code>result</code>, the IPv4 addresses of the host with the specified <code>hostname</code> up to the specified <code>maxNumAddresses</code> if the data already exist in the cache (regardless of whether the addresses are stale). Return 0 if the data has been previously cached (by a call to <code>resolveAddress</code>), and a non-zero value with no effect on <code>result</code> otherwise. The behavior is undefined unless <code>1 &lt;= maxNumAddresses</code>. Note that this method will not refresh the addresses even if they become stale. </p>

</div>
</div>
<a class="anchor" id="a831eccf0f86155898accf70369697dc4"></a><!-- doxytag: member="btlso::IpResolutionCache::resolverCallback" ref="a831eccf0f86155898accf70369697dc4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbtlso_1_1IpResolutionCache.html#a7abdaac87c9321eb5c73f770828a2149">ResolveByNameCallback</a> btlso::IpResolutionCache::resolverCallback </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the address of the callback function that is used for resolving the IP addresses from a hostname when the hostname is not already in the cache or the IP addresses are stale. </p>

</div>
</div>
<a class="anchor" id="a3f49022371cb2a2a03ac961c17c18054"></a><!-- doxytag: member="btlso::IpResolutionCache::timeToLive" ref="a3f49022371cb2a2a03ac961c17c18054" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a>&amp; btlso::IpResolutionCache::timeToLive </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a reference providing non-modifiable access to the time a set of IP addresses for a particular hostname may exist in the cache before they become stale. Note that <code>0 &lt;= <a class="el" href="classbtlso_1_1IpResolutionCache.html#a3f49022371cb2a2a03ac961c17c18054">timeToLive()</a>.seconds()</code>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="btlso__ipresolutioncache_8h_source.html">btlso_ipresolutioncache.h</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:51:15 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
