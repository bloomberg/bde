<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: ball_recordstringformatter Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component ball_recordstringformatter<br/>
<small>
[<a class="el" href="group__ball.html">Package ball</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a record formatter that uses a <code>printf</code>-style format spec.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceball.html">ball</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Record Format Specification</a> </li>
<li>
<a href="#3.2">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a record formatter that uses a <code>printf</code>-style format spec. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classball_1_1RecordStringFormatter.html">ball::RecordStringFormatter</a> </td><td><code>printf</code>-style formatter for log records  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ball__record.html" title="Provide a container for all fields of a log record.">Component ball_record</a>, <a class="el" href="group__ball__recordattributes.html" title="Provide a container for a fixed set of fields suitable for logging.">Component ball_recordattributes</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a value-semantic function-object class, <code><a class="el" href="classball_1_1RecordStringFormatter.html">ball::RecordStringFormatter</a></code>, that is used to format log records according to a <code>printf</code>-style format specification (see "Record Format Specification" below). A format specification and a timestamp offset (in the form of a <code><a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a></code>) are optionally supplied upon construction of a <code><a class="el" href="classball_1_1RecordStringFormatter.html">ball::RecordStringFormatter</a></code> object (or simply "record formatter"). If a format specification is not supplied, a default one (defined below) is used. If a timestamp offset is not supplied, it defaults to 0. Both the format specification and timestamp offset of a record formatter can be modified following construction. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>An overloaded <code>operator()</code> is defined for <code><a class="el" href="classball_1_1RecordStringFormatter.html">ball::RecordStringFormatter</a></code> that takes a <code><a class="el" href="classball_1_1Record.html">ball::Record</a></code> and an <code>bsl::ostream</code> as arguments. This method formats the given record according to the format specification of the record formatter and outputs the result to the given stream. Additionally, each timestamp indicated in the format specification is biased by the timestamp offset of the record formatter prior to outputting it to the stream. This facilitates the logging of records in local time, if desired, in the event that the timestamp attribute of records are in UTC. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="record_format_specification"></a> <a class="anchor" id="description.record_format_specification"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Record Format Specification: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following table lists the <code>printf</code>-style (<code>%</code>-prefixed) conversion specifications, including their expansions, that are recognized within the format specification of a record formatter: <br/>
<br/>
<div class="fragment"><pre class="fragment">  %d - timestamp in <span class="stringliteral">&#39;DDMonYYYY_HH:MM:SS.mmm&#39;</span> format (27AUG2007_16:09:46.161)
  %i - timestamp in ISO 8601 format (without the millisecond field)
  %I - timestamp in ISO 8601 format (*with* the millisecond field)
  %p - process Id
  %t - thread Id
  %s - severity
  %f - filename (as provided by <span class="stringliteral">&#39;__FILE__&#39;</span>)
  %<a class="code" href="bdlf__bind__test_8h.html#a668ca44fb0cff177991f91ee5d5c1068">F</a> - filename abbreviated (basename of <span class="stringliteral">&#39;__FILE__&#39;</span> only)
  %l - line number (as provided by <span class="stringliteral">&#39;__LINE__&#39;</span>)
  %c - category name
  %m - log message
  %x - log message with non-printable characters in hex
  %X - log message entirely in hex
  %u - user-defined fields
  %% - single <span class="charliteral">&#39;%&#39;</span> character
</pre></div><br/>
<br/>
 (Note that <code>F</code> is used to indicate the shortened form of <code>__FILE__</code> rather than <code>f</code> because <code>f</code> was given its current interpretation in an earlier version of this component.) </dd></dl>
<dl class="user"><dt><b></b></dt><dd>In addition, the following <code>\</code>-escape sequences are interpolated in the formatted output as indicated when they occur in the format specification: <br/>
<br/>
<div class="fragment"><pre class="fragment">  \n - newline character
  \t - tab character
  \\ - single <span class="charliteral">&#39;\&#39;</span> character
</pre></div><br/>
<br/>
 Any other text included in the format specification of the record formatter is output verbatim. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>When not supplied at construction, the default format specification of a record formatter is: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="stringliteral">&quot;\n%d %p:%t %s %f:%l %c %m %u\n&quot;</span>
</pre></div><br/>
<br/>
 A default-formatted record having no user-defined fields will have the following appearance: <br/>
<br/>
<div class="fragment"><pre class="fragment"> 27AUG2007_16:09:46.161 2040:1 WARN subdir/process.cpp:542 FOO.BAR.BAZ &lt;text&gt;
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following snippets of code illustrate how to use an instance of <code><a class="el" href="classball_1_1RecordStringFormatter.html">ball::RecordStringFormatter</a></code> to format log records. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First we instantiate a record formatter with an explicit format specification (but we accept the default timestamp offset since it will not be used in this example): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classball_1_1RecordStringFormatter.html">ball::RecordStringFormatter</a> formatter(<span class="stringliteral">&quot;\n%t: %m\n&quot;</span>);
</pre></div><br/>
<br/>
 The chosen format specification indicates that, when a record is formatted using <code>formatter</code>, the thread Id attribute of the record will be output followed by the message attribute of the record. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Next we create a default <code><a class="el" href="classball_1_1Record.html">ball::Record</a></code> and set the thread Id and message attributes of the record to dummy values: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classball_1_1Record.html">ball::Record</a> record;

  record.<a class="code" href="classball_1_1Record.html#a9bb8119e7b614cc2afedccf02bba1aa1">fixedFields</a>().setThreadID(6);
  record.<a class="code" href="classball_1_1Record.html#a9bb8119e7b614cc2afedccf02bba1aa1">fixedFields</a>().setMessage(<span class="stringliteral">&quot;Hello, World!&quot;</span>);
</pre></div><br/>
<br/>
 The following "invocation" of the <code>formatter</code> function object formats <code>record</code> to <code>bsl::cout</code> according to the format specification supplied at construction: <br/>
<br/>
<div class="fragment"><pre class="fragment">  formatter(bsl::cout, record);
</pre></div><br/>
<br/>
 As a result of this call, the following is printed to <code>stdout</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  6: Hello, World!
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:26 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
