<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: baltzo_timezoneutil Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component baltzo_timezoneutil<br/>
<small>
[<a class="el" href="group__baltzo.html">Package baltzo</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide utilities for converting times among different time zones.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebaltzo.html">baltzo</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Valid, Ambiguous, and Invalid Local-Time Values</a> <ul>
<li>
<a href="#3.1.1">Daylight-Saving Time (DST) Policies and Disambiguation</a> </li>
<li>
<a href="#3.1.2">Result of <code>convertLocalToUtc</code> for Various <code>baltzo::DstPolicy</code> Values</a> </li>
</ul>
</li>
<li>
<a href="#3.2">Thread Safety</a> </li>
<li>
<a href="#3.3">Usage</a> <ul>
<li>
<a href="#3.3.1">Example 1: Converting a UTC time to a Local Time</a> </li>
<li>
<a href="#3.3.2">Example 2: Converting a Local Time in One Time Zone to Another Time Zone</a> </li>
<li>
<a href="#3.3.3">Example 3: Initializing a Local Time</a> </li>
<li>
<a href="#3.3.4">Example 4: Obtaining Information About a Time Value</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide utilities for converting times among different time zones. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="structbaltzo_1_1TimeZoneUtil.html">baltzo::TimeZoneUtil</a> </td><td>utilities for converting local time values  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__baltzo__localdatetime.html" title="Provide an attribute class for time-zone-aware datetime values.">Component baltzo_localdatetime</a>, <a class="el" href="group__baltzo__zoneinfo.html" title="Provide a value type to represent a time zone.">Component baltzo_zoneinfo</a>, <a class="el" href="group__baltzo__defaultzoneinfocache.html" title="Provide facilities to manage a default Zoneinfo cache object.">Component baltzo_defaultzoneinfocache</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a namespace, <code><a class="el" href="structbaltzo_1_1TimeZoneUtil.html">baltzo::TimeZoneUtil</a></code>, containing utility functions for converting time values to and from their corresponding local time representations in (possibly) different time zones. The primary methods provided include: <ul>
<li>
<code>convertLocalToLocalTime</code> and <code>convertUtcToLocalTime</code>, for converting a time to the corresponding local-time value in some time zone;  </li>
<li>
<code>convertLocalToUtc</code>, for converting a local-time value into the corresponding UTC time value;  </li>
<li>
<code>initLocalTime</code>, for initializing a local-time value.  </li>
</ul>
Additionally, the <code>loadLocalTimePeriod</code> and <code>loadLocalTimePeriodForUtc</code> methods enable clients to obtain information about a time value, such as whether the provided time is a daylight-saving time value. Finally note that, all of the functions in this utility component make use of a process-wide cache of time-zone information (see <a href="group__baltzo__defaultzoneinfocache.html" class="el"><code>baltzo_defaultzoneinfocache</code></a>). </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="valid,_ambiguous,_and_invalid_local-time_values"></a> <a class="anchor" id="description.valid,_ambiguous,_and_invalid_local-time_values"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Valid, Ambiguous, and Invalid Local-Time Values: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>There are intervals around each daylight-saving time transition where a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> object holding a local time may not describe a valid or unique clock time in the local time zone (see <a href="group__baltzo__localtimevalidity.html" class="el"><code>baltzo_localtimevalidity</code></a>). When interpreting a local-time value represented using a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> object with respect to a given time zone, there are three possible scenarios: </dd></dl>
<dl class="user"><dt><b></b></dt><dd><ol>
<li>
The local time is <em>valid</em> and <em>unique</em>: The local time representation is valid, and unique within the time zone (the most likely scenario). For example, in New York at "Aug 31, 2010 12:00AM", DST was in effect and the local-time offset from UTC was -4 hours.  </li>
<li>
The local time is <em>valid</em>, but <em>ambiguous</em>: The local time representation is valid, but could correctly be interpreted as either of two possible times, as may happen around a daylight-saving time transition where the local-time offset from UTC increases (e.g., in the United States local time "falls back" by an hour in the fall). Thus, a local time within such a transition period occurs twice, and is ambiguous without additional information. For example, in New York, daylight-saving time was in effect until "Nov 7, 2010 2:00AM" when clocks were set back by an hour; therefore, the time "Nov 7, 2010 1:30AM" occurred twice, and that description (as represented in a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> object) could refer to either of those two times.  </li>
<li>
The local time is <em>invalid</em>: The local-time representation doesn't correspond to a valid time within the given time zone, as may happen around a daylight-saving time transition where the offset from UTC decreases (e.g., in the United States local time "springs forward" by an hour in the spring). Thus, local times that are skipped during such a transition are invalid. For example, in New York, DST was in effect starting "Mar 14, 2010 2:00AM" when clocks are set forward an hour; therefore, the local time "Mar 14, 2010 2:30AM" never occurs.  </li>
</ol>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd>Note that the functions provided in this component guarantee a graceful handling of all three scenarios. Ambiguity and invalidity, when they arise, are resolved according to a user-supplied daylight-saving time policy that describes how to interpret the input time values (see <a href="group__baltzo__dstpolicy.html" class="el"><code>baltzo_dstpolicy</code></a>). </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="daylight-saving_time_(dst)_policies_and_disambiguation"></a> <a class="anchor" id="valid,_ambiguous,_and_invalid_local-time_values.daylight-saving_time_(dst)_policies_and_disambiguation"></a> <a class="anchor" id="description.valid,_ambiguous,_and_invalid_local-time_values.daylight-saving_time_(dst)_policies_and_disambiguation"></a> <a class="anchor" id="3.1.1"></a> </dd></dl>
<dl class="user"><dt><b>Daylight-Saving Time (DST) Policies and Disambiguation: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <code><a class="el" href="structbaltzo_1_1TimeZoneUtil.html">baltzo::TimeZoneUtil</a></code> methods that take, as input, a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> object representing a local time (i.e., a local-time value without a UTC offset) also accept an optional <code><a class="el" href="structbaltzo_1_1DstPolicy.html#a392cdbed1df44a61615076f793695b3d">baltzo::DstPolicy::Enum</a></code>. This (optional) argument policy allows clients to specify how they would like the operation to interpret the input value (as such a value may be ambiguous or invalid within the indicated time zone -- see above). Clients are, however, encouraged to use the default policy, <code>e_UNSPECIFIED</code>, unless there is some specific reason they require a different option. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Three enumerated <code><a class="el" href="structbaltzo_1_1DstPolicy.html">baltzo::DstPolicy</a></code> values are supported: </dd></dl>
<dl class="user"><dt><b></b></dt><dd><ol>
<li>
<p class="startli"><code>e_UNSPECIFIED</code> (default)</p>
<ul>
<li>
The client does not explicitly indicate whether the associated input time represents a daylight-saving time value, and the operation will determine how to interpret the time solely based on the input itself. If the input value is <em>valid</em> and <em>unique</em>, the operation will use its (unique) corresponding UTC value. If the input is either <em>ambiguous</em> or <em>invalid</em>, the operation will use the later of two potential interpretations of the input (determined, e.g., by applying the standard and daylight-saving time UTC offsets to the input). For <em>invalid</em> times, this choice reflects the assumption that the user most likely forgot to adjust their clock. For <em>ambiguous</em> times, this choice is arbitrary (but is consistent with common implementations of the C standard library). </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>e_STANDARD</code></p>
<ul>
<li>
Indicates that the operation should treat the associated input time value as a standard time, using the UTC value computed by applying the standard-time UTC offset. Note that the standard-time UTC offset is used even when the input time value is (unambiguously) <em>not</em> a standard time, which would result in a UTC time that does not correspond to a standard time within the time zone. </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>e_DST</code></p>
<ul>
<li>
Indicates that the operation should treat the associated input time value as a daylight-saving time, using the UTC value computed by applying the daylight-saving time UTC offset. Note that the daylight-saving-time UTC offset is used even when the input time value is (unambiguously) <em>not</em> a daylight-saving time, which would result in a UTC time that does not correspond to a daylight-saving time within the time zone.  </li>
</ul>
<p class="endli"></p>
</li>
</ol>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd>Note that these policies are intended to reflect the behavior of the C standard library function <code>mktime</code> and its interpretation of the <code>tm_isdst</code> value of the supplied <code>tm</code> structure. The behavior for the "unspecified" policy, however, is not strictly defined by either the ISO or POSIX standards, and varies among implementations. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="result_of_convertlocaltoutc_for_various_baltzo~3A~3Adstpolicy_values"></a> <a class="anchor" id="valid,_ambiguous,_and_invalid_local-time_values.result_of_convertlocaltoutc_for_various_baltzo~3A~3Adstpolicy_values"></a> <a class="anchor" id="description.valid,_ambiguous,_and_invalid_local-time_values.result_of_convertlocaltoutc_for_various_baltzo~3A~3Adstpolicy_values"></a> <a class="anchor" id="result_of_convertlocaltoutc_for_various_baltzo"></a> <a class="anchor" id="valid,_ambiguous,_and_invalid_local-time_values.result_of_convertlocaltoutc_for_various_baltzo"></a> <a class="anchor" id="description.valid,_ambiguous,_and_invalid_local-time_values.result_of_convertlocaltoutc_for_various_baltzo"></a> <a class="anchor" id="3.1.2"></a> </dd></dl>
<dl class="user"><dt><b>Result of convertLocalToUtc for Various baltzo::DstPolicy Values: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following table summarizes the effect that the different <code><a class="el" href="structbaltzo_1_1DstPolicy.html">baltzo::DstPolicy</a></code> values have on a call to <code>convertLocalToUtc</code> for several possible time values in New York. Note that standard local time in New York is UTC-5:00, and daylight-saving local time there is UTC-4:00. <br/>
<br/>
<div class="fragment"><pre class="fragment">     Result format: UTC <span class="stringliteral">&#39;bdlt::Time&#39;</span> &amp; corresponding local <span class="stringliteral">&#39;bdlt::TimeTz&#39;</span>.
 ,--------------------------------------------------------------------------.
 | Input in New York  |              <span class="stringliteral">&#39;baltzo::DstPolicy::Enum&#39;</span>              |
 |     Local <a class="code" href="namespacebdet.html#aac65e816e68f5285b127a9071544c5c1">Time</a>     |-----------------------------------------------------|
 |   (<a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>)  |  *_UNSPECIFIED  |   *_STANDARD    |   *_DST        |
 |==========================================================================|
 | Jan  1, 2010 01:30 |  06:30:00 UTC   |  06:30:00 UTC   |  05:30:00 UTC   |
 |   (standard time)  | (01:30:00-5:00) | (01:30:00-5:00) | (00:30:00-5:00) |
 |                    |                 |       [1]       |      [2]        |
 |--------------------|-----------------------------------------------------|
 | Mar 14, 2010 02:30 |  07:30:00 UTC   |  07:30:00 UTC   |  06:30:00 UTC   |
 |     (invalid)      | (03:30:00-4:00) | (03:30:00-4:00) | (01:30:00-5:00) |
 |                    |      [3]        |       [4]       |      [5]        |
 |--------------------|-----------------------------------------------------|
 | Apr  1, 2010 01:30 |  05:30:00 UTC   |  06:30:00 UTC   |  05:30:00 UTC   |
 | (daylight-saving)  | (01:30:00-4:00) | (02:30:00-4:00) | (01:30:00-4:00) |
 |                    |                 |       [6]       |      [7]        |
 |--------------------|-----------------------------------------------------|
 | Nov  7, 2010 01:30 |  06:30:00 UTC   |  06:30:00 UTC   |  05:30:00  UTC  |
 |    (ambiguous)     | (01:30:00-5:00) | (01:30:00-5:00) | (01:30:00-4:00) |
 |                    |      [8]        |                 |                 |
 `--------------------------------------------------------------------------<span class="stringliteral">&#39;</span>
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd><ol>
<li>
"Jan 1, 2010 01:30" is unambiguously a standard time value. The result is simply the corresponding UTC time "Jan 1, 2010 06:30 UTC".  </li>
<li>
"Jan 1, 2010 01:30" is unambiguously a standard time value, so the supplied policy, <code>e_DST</code>, contradicts the actual occurrence of daylight-saving time in New York. The input time is adjusted by the UTC offset for daylight-saving time in New York (-4:00) resulting in a UTC time 05:30. Note that the result, "Jan 1, 2010 05:30 UTC", corresponds to the New York time "Jan 1, 2010 00:30:00-5:00" (a standard time).  </li>
<li>
"Mar 14, 2010 02:30" is not a valid local time in New York (a correctly administered clock would have been set ahead an hour at 2:00AM). The operation will use the later of two potential values, determined by applying the standard and daylight-saving time UTC offsets to the input (07:30 UTC and 06:30 UTC, respectively). Note that the selection of the later time reflects an assumption that the user forgot to adjust the clock.  </li>
<li>
The input time is adjusted by the UTC offset for standard time in New York (-5:00) resulting in the UTC time 07:30. Note that "Mar 14, 2010
  07:30 UTC" corresponds to the New York time "Mar 14, 2010 03:30-4:00" (a daylight-saving time).  </li>
<li>
The input time is adjusted by the UTC offset for daylight-saving time in New York (-4:00) resulting in the UTC time 06:30. Note that "Mar 14,
  2010 06:30 UTC" corresponds to the New York time "Mar 14, 2010
  01:30-5:00" (a standard time).  </li>
<li>
"Apr 1, 2010 01:30" is unambiguously a daylight-saving time value, so the supplied policy <code>e_STANDARD</code> contradicts the actual occurrence of daylight-saving time in New York. The input time is adjusted by the UTC offset for standard time in New York (-5:00) resulting in a UTC time 06:30. Note that "Apr 1, 2010 06:30 UTC" corresponds to the New York time "Apr 1, 2010 02:30:00-4:00" (a daylight-saving time).  </li>
<li>
"Apr 1, 2010 01:30" is unambiguously a daylight-saving time value. The result is simply the corresponding UTC time "Apr 1, 2010 06:30 UTC".  </li>
<li>
"Nov 7, 2010 01:30" is a valid, but ambiguous, local time in New York (clocks are set back by an hour at 2:00AM, so 1:30AM occurs twice). The operation will use the later of two potential values determined by applying the standard and daylight-saving time UTC offsets to the input (06:30 UTC and 05:30 UTC, respectively). Note that the selection of the later time is arbitrary, but is consistent with common implementations of the C standard library.  </li>
</ol>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="thread_safety"></a> <a class="anchor" id="description.thread_safety"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Thread Safety: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The functions provided by <code><a class="el" href="structbaltzo_1_1TimeZoneUtil.html">baltzo::TimeZoneUtil</a></code> are <em>thread-safe</em>, meaning they can be safely executed concurrently. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.3"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following usage examples demonstrate how to use various functions provided by <code><a class="el" href="structbaltzo_1_1TimeZoneUtil.html">baltzo::TimeZoneUtil</a></code> to perform conversions on various time representations. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_converting_a_utc_time_to_a_local_time"></a> <a class="anchor" id="usage.example_1~3A_converting_a_utc_time_to_a_local_time"></a> <a class="anchor" id="description.usage.example_1~3A_converting_a_utc_time_to_a_local_time"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.3.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Converting a UTC time to a Local Time: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>In this usage example, we illustrate how to convert a UTC time to its corresponding local time in a given time zone. We start by creating a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> object holding the UTC time "July 31, 2010 15:00:00": <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> utcTime(2010, 7, 31, 15, 0, 0);
</pre></div><br/>
<br/>
 Then, we create a <code><a class="el" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a></code> object to hold the result of the conversion operation: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a> newYorkTime;
</pre></div><br/>
<br/>
 Now, we call the <code>convertUtcToLocalTime</code> function in <code><a class="el" href="structbaltzo_1_1TimeZoneUtil.html">baltzo::TimeZoneUtil</a></code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> status = <a class="code" href="structbaltzo_1_1TimeZoneUtil.html#ab07a5e38365f151cf6f522dcfaabde4a">baltzo::TimeZoneUtil::convertUtcToLocalTime</a>(&amp;newYorkTime,
                                                          <span class="stringliteral">&quot;America/New_York&quot;</span>,
                                                          utcTime);
  <span class="keywordflow">if</span> (0 != status) {
      <span class="comment">// A non-zero &#39;status&#39; indicates there was an error in the conversion</span>
      <span class="comment">// (e.g., the time zone id was not valid or the environment has not</span>
      <span class="comment">// been correctly configured).</span>

      <span class="keywordflow">return</span> 1;                                                     <span class="comment">// RETURN</span>
  }
</pre></div><br/>
<br/>
 Finally, we observe that the result in <code>newYorkTime</code> is "July 31, 2010
 11:00:00" and that the offset from UTC applied was -4 hours: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">const</span> <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> test = newYorkTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a37e967795f1efdb5931e4bac62603ad4">datetimeTz</a>().<a class="code" href="classbdlt_1_1DatetimeTz.html#a54b9d6329ad4d98edf845a6c5cfe5321">localDatetime</a>();
  assert(2010 == test.<a class="code" href="classbdlt_1_1Datetime.html#a53385fe6d71ec043aabaab80e593ecd0">year</a>());  assert(11 == test.<a class="code" href="classbdlt_1_1Datetime.html#afb8a18590cdfbcdba912d0500ff9a9c1">hour</a>());
  assert(   7 == test.<a class="code" href="classbdlt_1_1Datetime.html#adf3dca4320ba8b7f64a579bf664c42f1">month</a>()); assert( 0 == test.<a class="code" href="classbdlt_1_1Datetime.html#a879a2bfec1e2f937d5b23d3a6345101e">minute</a>());
  assert(  31 == test.<a class="code" href="classbdlt_1_1Datetime.html#ab3b87be631ddfd83fee9f0562080e269">day</a>());   assert( 0 == test.<a class="code" href="classbdlt_1_1Datetime.html#a2fb9a7dfb99a85ee71023800689e2ab8">second</a>());

  assert( -4 * 60 == newYorkTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a37e967795f1efdb5931e4bac62603ad4">datetimeTz</a>().<a class="code" href="classbdlt_1_1DatetimeTz.html#ae8ef8eb16e1ce5ffba6354f9935c61b4">offset</a>());
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_2~3A_converting_a_local_time_in_one_time_zone_to_another_time_zone"></a> <a class="anchor" id="usage.example_2~3A_converting_a_local_time_in_one_time_zone_to_another_time_zone"></a> <a class="anchor" id="description.usage.example_2~3A_converting_a_local_time_in_one_time_zone_to_another_time_zone"></a> <a class="anchor" id="example_2"></a> <a class="anchor" id="usage.example_2"></a> <a class="anchor" id="description.usage.example_2"></a> <a class="anchor" id="3.3.2"></a> </dd></dl>
<dl class="user"><dt><b>Example 2: Converting a Local Time in One Time Zone to Another Time Zone: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>In this example we illustrate how to convert a local time in a given time zone directly to its corresponding local time in another time zone. In particular, we want to convert the time "July 31, 2010 15:00:00" in New York to its corresponding time in Rome, Italy. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we create a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> object representing the time "July 31,
 2010 15:00:00" in New York: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> newYorkTime(2010, 7, 31, 15, 0, 0);
</pre></div><br/>
<br/>
 Now, let's apply the conversion operation to obtain a <code><a class="el" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a></code> object representing the corresponding local time in Italy: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a> romeTime;
  <span class="keywordtype">int</span> status = <a class="code" href="structbaltzo_1_1TimeZoneUtil.html#a65b71c0c9d625bdc4d8e4f3b1ac291d6">baltzo::TimeZoneUtil::convertLocalToLocalTime</a>(
                                                        &amp;romeTime,
                                                        <span class="stringliteral">&quot;Europe/Rome&quot;</span>,
                                                        newYorkTime,
                                                        <span class="stringliteral">&quot;America/New_York&quot;</span>);
  <span class="keywordflow">if</span> (0 != status) {
      <span class="comment">// A non-zero &#39;status&#39; indicates there was an error in the conversion</span>
      <span class="comment">// (e.g., the time zone id was not valid or the environment has not</span>
      <span class="comment">// been correctly configured).</span>

      <span class="keywordflow">return</span> 1;                                                     <span class="comment">// RETURN</span>
  }
</pre></div><br/>
<br/>
 Notice that we did not specify the optional <code>dstPolicy</code> argument to <code>convertLocalToLocalTime</code>. The default value should be appropriate for most users. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Finally, we verify that the value of <code>romeTime</code> is "July 31, 2010 21:00:00", which is the time in Italy corresponding to "July 31, 2010 15:00:00" in New York: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">const</span> <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> test = romeTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a37e967795f1efdb5931e4bac62603ad4">datetimeTz</a>().<a class="code" href="classbdlt_1_1DatetimeTz.html#a54b9d6329ad4d98edf845a6c5cfe5321">localDatetime</a>();
  assert(2010 == test.<a class="code" href="classbdlt_1_1Datetime.html#a53385fe6d71ec043aabaab80e593ecd0">year</a>());  assert(21 == test.<a class="code" href="classbdlt_1_1Datetime.html#afb8a18590cdfbcdba912d0500ff9a9c1">hour</a>());
  assert(   7 == test.<a class="code" href="classbdlt_1_1Datetime.html#adf3dca4320ba8b7f64a579bf664c42f1">month</a>()); assert( 0 == test.<a class="code" href="classbdlt_1_1Datetime.html#a879a2bfec1e2f937d5b23d3a6345101e">minute</a>());
  assert(  31 == test.<a class="code" href="classbdlt_1_1Datetime.html#ab3b87be631ddfd83fee9f0562080e269">day</a>());   assert( 0 == test.<a class="code" href="classbdlt_1_1Datetime.html#a2fb9a7dfb99a85ee71023800689e2ab8">second</a>());

  assert( 2 * 60 == romeTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a37e967795f1efdb5931e4bac62603ad4">datetimeTz</a>().<a class="code" href="classbdlt_1_1DatetimeTz.html#ae8ef8eb16e1ce5ffba6354f9935c61b4">offset</a>());
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_3~3A_initializing_a_local_time"></a> <a class="anchor" id="usage.example_3~3A_initializing_a_local_time"></a> <a class="anchor" id="description.usage.example_3~3A_initializing_a_local_time"></a> <a class="anchor" id="example_3"></a> <a class="anchor" id="usage.example_3"></a> <a class="anchor" id="description.usage.example_3"></a> <a class="anchor" id="3.3.3"></a> </dd></dl>
<dl class="user"><dt><b>Example 3: Initializing a Local Time: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>In this example we illustrate how to create a <code><a class="el" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a></code> from a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code>, which may not represent a unique (or valid) clock time. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we create a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> object for the New York local time "Jul
 31, 2010 15:00:00". Note that this local date-time occurs during a DST transition and is an invalid date-time. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> uniqueTime(2010, 7, 31, 15, 0, 0);
</pre></div><br/>
<br/>
 Then, we call <code>initLocalTime</code>, which returns a <code><a class="el" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a></code> object. <code>initLocalTime</code> also optionally returns <code><a class="el" href="structbaltzo_1_1LocalTimeValidity.html#ac70d940922ccf1141ad56f60327200c2">baltzo::LocalTimeValidity::Enum</a></code>, indicating whether the provided input was a valid and unique clock time. Note that invalid or ambiguous times are resolved using the optionally provided <code><a class="el" href="structbaltzo_1_1DstPolicy.html#a392cdbed1df44a61615076f793695b3d">baltzo::DstPolicy::Enum</a></code> (see the section <a href="group__baltzo__timezoneutil.html#daylight-saving_time_(dst)_policies_and_disambiguation" class="el">Daylight-Saving Time (DST) Policies and Disambiguation</a>): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a>             localTime;
  <a class="code" href="structbaltzo_1_1LocalTimeValidity.html#ac70d940922ccf1141ad56f60327200c2">baltzo::LocalTimeValidity::Enum</a> validity;
  <span class="keywordtype">int</span> status = <a class="code" href="structbaltzo_1_1TimeZoneUtil.html#a193192557edd0355d9d823e29f2d0958">baltzo::TimeZoneUtil::initLocalTime</a>(&amp;localTime,
                                                  &amp;validity,
                                                  uniqueTime,
                                                  <span class="stringliteral">&quot;America/New_York&quot;</span>);
  <span class="keywordflow">if</span> (0 != status) {
      <span class="keywordflow">return</span> 1;
  }
</pre></div><br/>
<br/>
 Now, we verify the value of <code>localTime</code> is "Jul 31, 2010 15:00:00" with an offset of -4:00 from UTC, in the time zone "America/New_York". <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">const</span> <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> invalidTest = localTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a37e967795f1efdb5931e4bac62603ad4">datetimeTz</a>().<a class="code" href="classbdlt_1_1DatetimeTz.html#a54b9d6329ad4d98edf845a6c5cfe5321">localDatetime</a>();
  assert(2010 == invalidTest.<a class="code" href="classbdlt_1_1Datetime.html#a53385fe6d71ec043aabaab80e593ecd0">year</a>());  assert(15 == invalidTest.<a class="code" href="classbdlt_1_1Datetime.html#afb8a18590cdfbcdba912d0500ff9a9c1">hour</a>());
  assert(   7 == invalidTest.<a class="code" href="classbdlt_1_1Datetime.html#adf3dca4320ba8b7f64a579bf664c42f1">month</a>()); assert( 0 == invalidTest.<a class="code" href="classbdlt_1_1Datetime.html#a879a2bfec1e2f937d5b23d3a6345101e">minute</a>());
  assert(  31 == invalidTest.<a class="code" href="classbdlt_1_1Datetime.html#ab3b87be631ddfd83fee9f0562080e269">day</a>());   assert( 0 == invalidTest.<a class="code" href="classbdlt_1_1Datetime.html#a2fb9a7dfb99a85ee71023800689e2ab8">second</a>());

  assert( -4 * 60 == localTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a37e967795f1efdb5931e4bac62603ad4">datetimeTz</a>().<a class="code" href="classbdlt_1_1DatetimeTz.html#ae8ef8eb16e1ce5ffba6354f9935c61b4">offset</a>());
  assert(<span class="stringliteral">&quot;America/New_York&quot;</span> == localTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a8b27b51ad2b448a6c200649cbd4b1e3e">timeZoneId</a>());
</pre></div><br/>
<br/>
 In addition, the time provided represents a unique and valid clock time in New York (because it does not fall near a daylight-saving time transition): <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(<a class="code" href="structbaltzo_1_1LocalTimeValidity.html#ac70d940922ccf1141ad56f60327200c2a90d2831403f41dd4631a2603d6550935" title="Local time is valid and unique.">baltzo::LocalTimeValidity::e_VALID_UNIQUE</a> == validity);
</pre></div><br/>
<br/>
 By contrast, if we call <code>initLocalTime</code> for a time value that falls during a during a daylight-saving time transition, the returned <code><a class="el" href="structbaltzo_1_1LocalTimeValidity.html#ac70d940922ccf1141ad56f60327200c2">baltzo::LocalTimeValidity::Enum</a></code> will indicate if the supplied time either does not represent a valid clock time in the time zone (as may occur when clocks are set forward), or does not represent a unique clock time (as may occur when clocks are set back). </dd></dl>
<dl class="user"><dt><b></b></dt><dd>For example, suppose we call <code>initLocalTime</code> for "Mar 14, 2010 02:30"; this clock time does not occurs in New York, as clocks are set forward by an hour at 2am local time: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> invalidTime(2010, 3, 14, 2, 30, 0);
  status = <a class="code" href="structbaltzo_1_1TimeZoneUtil.html#a193192557edd0355d9d823e29f2d0958">baltzo::TimeZoneUtil::initLocalTime</a>(&amp;localTime,
                                              &amp;validity,
                                              invalidTime,
                                             <span class="stringliteral">&quot;America/New_York&quot;</span>);
  <span class="keywordflow">if</span> (0 != status) {
      <span class="keywordflow">return</span> 1;
  }
</pre></div><br/>
<br/>
 Now, we verify the value of <code>localTime</code> represents a valid and unique time of "Mar 14, 2010 03:30:00-04:00" in the "America/New_York" time zone. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">const</span> <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> test = localTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a37e967795f1efdb5931e4bac62603ad4">datetimeTz</a>().<a class="code" href="classbdlt_1_1DatetimeTz.html#a54b9d6329ad4d98edf845a6c5cfe5321">localDatetime</a>();
  assert(2010 == test.<a class="code" href="classbdlt_1_1Datetime.html#a53385fe6d71ec043aabaab80e593ecd0">year</a>());  assert( 3 == test.<a class="code" href="classbdlt_1_1Datetime.html#afb8a18590cdfbcdba912d0500ff9a9c1">hour</a>());
  assert(   3 == test.<a class="code" href="classbdlt_1_1Datetime.html#adf3dca4320ba8b7f64a579bf664c42f1">month</a>()); assert(30 == test.<a class="code" href="classbdlt_1_1Datetime.html#a879a2bfec1e2f937d5b23d3a6345101e">minute</a>());
  assert(  14 == test.<a class="code" href="classbdlt_1_1Datetime.html#ab3b87be631ddfd83fee9f0562080e269">day</a>());   assert( 0 == test.<a class="code" href="classbdlt_1_1Datetime.html#a2fb9a7dfb99a85ee71023800689e2ab8">second</a>());

  assert(<span class="stringliteral">&quot;America/New_York&quot;</span> == localTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a8b27b51ad2b448a6c200649cbd4b1e3e">timeZoneId</a>());
  assert( -4 * 60 == localTime.<a class="code" href="classbaltzo_1_1LocalDatetime.html#a37e967795f1efdb5931e4bac62603ad4">datetimeTz</a>().<a class="code" href="classbdlt_1_1DatetimeTz.html#ae8ef8eb16e1ce5ffba6354f9935c61b4">offset</a>());
</pre></div><br/>
<br/>
 Finally, we verify that the validity status returned for <code>invalidTime</code> is <code>e_INVALID</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(<a class="code" href="structbaltzo_1_1LocalTimeValidity.html#ac70d940922ccf1141ad56f60327200c2ab5ec373d131b644181c59433c9357f96" title="Local time is invalid.">baltzo::LocalTimeValidity::e_INVALID</a> == validity);
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_4~3A_obtaining_information_about_a_time_value"></a> <a class="anchor" id="usage.example_4~3A_obtaining_information_about_a_time_value"></a> <a class="anchor" id="description.usage.example_4~3A_obtaining_information_about_a_time_value"></a> <a class="anchor" id="example_4"></a> <a class="anchor" id="usage.example_4"></a> <a class="anchor" id="description.usage.example_4"></a> <a class="anchor" id="3.3.4"></a> </dd></dl>
<dl class="user"><dt><b>Example 4: Obtaining Information About a Time Value: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>In this example we illustrate how to obtain additional information about a local time in a given time zone using the <code>loadLocalTimePeriod</code> method. Using <code>loadLocalTimePeriod</code> a client can determine, for a point in time, the attributes that characterize local time in a given time zone (e.g., the offset from UTC, whether it is daylight-saving time) as well as the interval over which those attributes apply (see <a href="group__baltzo__localtimeperiod.html" class="el"><code>baltzo_localtimeperiod</code></a>). </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we create a <code><a class="el" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a></code> object for the New York local time "Jul 31, 2010 15:00:00-04:00". Note that this <code><a class="el" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a></code> may also be created as in example 3. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1DatetimeTz.html">bdlt::DatetimeTz</a> localTimeTz(<a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>(2010, 7, 31, 15, 0, 0),
                               -4 * 60);
  <a class="code" href="classbaltzo_1_1LocalDatetime.html">baltzo::LocalDatetime</a> localTime(localTimeTz, <span class="stringliteral">&quot;America/New_York&quot;</span>);
</pre></div><br/>
<br/>
 Then, we call <code>loadLocalTimePeriod</code>, which returns a <code><a class="el" href="classbaltzo_1_1LocalTimePeriod.html">baltzo::LocalTimePeriod</a></code> object that is loaded with attributes characterizing local time in New York on "Mar 14, 2010 03:30:00", and the interval over which those attributes are in effect. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbaltzo_1_1LocalTimePeriod.html">baltzo::LocalTimePeriod</a> period;
  <span class="keywordtype">int</span> status = <a class="code" href="structbaltzo_1_1TimeZoneUtil.html#a9d2b884bdede166ff1634aa3437e385d">baltzo::TimeZoneUtil::loadLocalTimePeriod</a>(&amp;period, localTime);
  <span class="keywordflow">if</span> (0 != status) {
      <span class="comment">// A non-zero &#39;status&#39; indicates there was an error in the conversion</span>
      <span class="comment">// (e.g., the time zone id was not valid or the environment has not</span>
      <span class="comment">// been correctly configured).</span>

      <span class="keywordflow">return</span> 1;                                                     <span class="comment">// RETURN</span>
  }
</pre></div><br/>
<br/>
 Now we examine the returned properties. "Mar 14, 2010 03:30:00" is during daylight-saving time, which is -4:00 UTC, and the type of local time is sometimes abbreviated "EDT" for "Eastern Daylight Time". "Eastern Daylight
 Time" is in effect from "Mar 14, 2010 7am UTC" to "Nov 7, 2010 6am UTC". Note that the abbreviation provided ("EDT") is not canonical or localized. In general the provided abbreviations should not be displayed to users (they are intended for development and debugging only): <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(<span class="keyword">true</span>         == period.<a class="code" href="classbaltzo_1_1LocalTimePeriod.html#a40bfe69368e2c418e9fbdd5b2b7800f9">descriptor</a>().dstInEffectFlag());
  assert(-4 * 60 * 60 == period.<a class="code" href="classbaltzo_1_1LocalTimePeriod.html#a40bfe69368e2c418e9fbdd5b2b7800f9">descriptor</a>().utcOffsetInSeconds());
  assert(<span class="stringliteral">&quot;EDT&quot;</span>        == period.<a class="code" href="classbaltzo_1_1LocalTimePeriod.html#a40bfe69368e2c418e9fbdd5b2b7800f9">descriptor</a>().description());
  assert(<a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>(2010,  3, 14, 7, 0, 0) == period.<a class="code" href="classbaltzo_1_1LocalTimePeriod.html#ae80721eb9a98f1072f7b8dc063f05768">utcStartTime</a>());
  assert(<a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>(2010, 11,  7, 6, 0, 0) == period.<a class="code" href="classbaltzo_1_1LocalTimePeriod.html#a9de74023fd3cdb67ba64d97d6b3aecde">utcEndTime</a>());
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:30 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
