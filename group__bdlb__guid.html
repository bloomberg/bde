<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: bdlb_guid Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bdlb_guid<br/>
<small>
[<a class="el" href="group__bdlb.html">Package bdlb</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a value-semantic type for Globally Unique Identifiers.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebdlb.html">bdlb</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a value-semantic type for Globally Unique Identifiers. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbdlb_1_1Guid.html">bdlb::Guid</a> </td><td>value-semantic type to represent Globally Unique Identifiers  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__bdlb__guidutil.html" title="Provide functions that produce Universally Unique Identifiers.">Component bdlb_guidutil</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a value-semantic type for Globally Unique Identifiers (GUIDs), <code><a class="el" href="classbdlb_1_1Guid.html">bdlb::Guid</a></code>, with format as described by RFC 4122 (<code><a href="http://www.ietf.org/rfc/rfc4122.txt">http://www.ietf.org/rfc/rfc4122.txt</a></code>). All equality and comparison methods are defined for these GUIDs. Note that this component does not provide the facilities to generate GUIDs, and thus makes no guarantees of uniqueness or randomness. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Suppose we are building a utility to create globally unique names which may be based on a common base name, such as a code-generator. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, let us define the core types needed, the first of which is a utility to allocate GUIDs. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">struct </span>MyGuidGeneratorUtil {
      <span class="comment">// This struct provides a namespace for methods to generate GUIDs.</span>

      <span class="comment">// CLASS METHODS</span>
      <span class="keyword">static</span> <span class="keywordtype">int</span> generate(<a class="code" href="classbdlb_1_1Guid.html">bdlb::Guid</a> *guid);
          <span class="comment">// Generate a version 1 GUID, placing the value into the</span>
          <span class="comment">// specified &#39;guid&#39; pointer.  Return 0 on success, and non-zero</span>
          <span class="comment">// otherwise.</span>
  };

  <span class="comment">// CLASS METHODS</span>
  <span class="keyword">inline</span>
  <span class="keywordtype">int</span> my_GuidGeneratorUtil::generate(<a class="code" href="classbdlb_1_1Guid.html">bdlb::Guid</a> *guid)
  {
      <span class="comment">// For brevity, we use a static sequence of pre-generated GUIDs.</span>

      <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> GUIDS[][bdlb::Guid::k_GUID_NUM_BYTES] = {
          { 0xde, 0xad, 0xbe, 0xef, 0xca, 0xfe, 0xba, 0xbe,
            0x91, 0x91, 0x08, 0x00, 0x20, 0x0c, 0x9a, 0x66 },

          { 0x5c, 0x9d, 0x4e, 0x51, 0x0d, 0xf1, 0x11, 0xe4,
            0x91, 0x91, 0x08, 0x00, 0x20, 0x0c, 0x9a, 0x66 },

          { 0x5c, 0x9d, 0x4e, 0x52, 0x0d, 0xf1, 0x11, 0xe4,
            0x91, 0x91, 0x08, 0x00, 0x20, 0x0c, 0x9a, 0x66 },

          { 0x5c, 0x9d, 0x4e, 0x53, 0x0d, 0xf1, 0x11, 0xe4,
            0x91, 0x91, 0x08, 0x00, 0x20, 0x0c, 0x9a, 0x66 },

          { 0x5c, 0x9d, 0x4e, 0x54, 0x0d, 0xf1, 0x11, 0xe4,
            0x91, 0x91, 0x08, 0x00, 0x20, 0x0c, 0x9a, 0x66 },

          { 0x5c, 0x9d, 0x4e, 0x55, 0x0d, 0xf1, 0x11, 0xe4,
            0x91, 0x91, 0x08, 0x00, 0x20, 0x0c, 0x9a, 0x66 },

          { 0x5c, 0x9d, 0x4e, 0x56, 0x0d, 0xf1, 0x11, 0xe4,
            0x91, 0x91, 0x08, 0x00, 0x20, 0x0c, 0x9a, 0x66 },
      };

      <span class="keyword">const</span> bsl::size_t NUM_GUIDS = <span class="keyword">sizeof</span> GUIDS / <span class="keyword">sizeof</span> *GUIDS;

      <span class="keyword">static</span> bsl::size_t nextGuidIdx = 0;

      <span class="keywordtype">int</span> rval = -1;
      <span class="keywordflow">if</span> (nextGuidIdx++ &lt; NUM_GUIDS) {
          *guid = <a class="code" href="classbdlb_1_1Guid.html">bdlb::Guid</a>(GUIDS[nextGuidIdx]);
          rval = 0;
      }
      <span class="keywordflow">return</span> rval;
 }
</pre></div><br/>
<br/>
 Next, we create a utility to create unique strings. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">struct </span>UniqueStringGenerator {
      <span class="comment">// This struct provides methods to create globally unique strings.</span>

      <span class="keyword">static</span> <span class="keywordtype">int</span> uniqueStringFromBase(<a class="code" href="classbsl_1_1basic__string.html">bsl::string</a>        *unique,
                                      <span class="keyword">const</span> <a class="code" href="classbsl_1_1basic__string.html">bsl::string</a>&amp;  base);
            <span class="comment">// Create a globally unique string from the specified non-unique</span>
            <span class="comment">// &#39;base&#39; string, placing the result into the specified &#39;unique&#39;</span>
            <span class="comment">// string pointer.</span>

  };

  <span class="keywordtype">int</span>
  UniqueStringGenerator::uniqueStringFromBase(<a class="code" href="classbsl_1_1basic__string.html">bsl::string</a>        *unique,
                                              <span class="keyword">const</span> <a class="code" href="classbsl_1_1basic__string.html">bsl::string</a>&amp;  base,)
  {
      <a class="code" href="classbdlb_1_1Guid.html">bdlb::Guid</a> guid;

      <span class="keywordtype">int</span> rval = my_GuidGeneratorUtil::generate(&amp;guid);
      <span class="keywordflow">if</span> (rval == 0) {
      {
          <a class="code" href="group__bslstl__iosfwd.html#gab9a0f4d1fbd8bc1aaf5d375a4ef030b1">ostringstream</a> convert;
          convert &lt;&lt; base &lt;&lt; <span class="stringliteral">&quot;-&quot;</span> &lt;&lt; guid;
          *unique = convert.str();
      }
      <span class="keywordflow">return</span> rval;
  }
</pre></div><br/>
<br/>
 Finally, we implement a program to generate unique names for a code auto-generator. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbsl_1_1basic__string.html">bsl::string</a> baseFileName = <span class="stringliteral">&quot;foo.cpp&quot;</span>;
  <a class="code" href="classbsl_1_1basic__string.html">bsl::string</a> uniqueFileName;
  <a class="code" href="classbsl_1_1basic__string.html">bsl::string</a> previousFileName;

  <span class="keyword">const</span> bsl::size_t NUM_FILES = 5;
  <span class="keywordflow">for</span> (bsl::size_t i = 0; i &lt; NUM_FILES; ++i) {
      UniqueStringGenerator::uniqueStringFromBase(&amp;uniqueFileName,
                                                  baseFileName);
      assert(previousFileName != uniqueFileName);
       previousFileName = uniqueFileName;
  }
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:34 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
