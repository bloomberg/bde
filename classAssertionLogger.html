<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: Class AssertionLogger</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>AssertionLogger Class Reference<br/>
<small>
[<a class="el" href="group__balst__assertionlogger.html">Component balst_assertionlogger</a>]</small>
</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="AssertionLogger" -->
<p><code>#include &lt;<a class="el" href="balst__assertionlogger_8h_source.html">balst_assertionlogger.h</a>&gt;</code></p>

<p><a href="classAssertionLogger-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structball_1_1Severity.html#af49f66189615b9475c9cced03afde384">ball::Severity::Level</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAssertionLogger.html#ad5aa7b94a7dbae593ed3ccd86b4d2444">LogSeverityCallback</a> )(void *closure, const char *text, const char *file, int line)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAssertionLogger.html#af8f503a48718ed496032e3e1160a7505">assertionFailureHandler</a> (const char *text, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAssertionLogger.html#aa3a0db53e4f53e72917f2899d8dc1472">getLogSeverityCallback</a> (<a class="el" href="classAssertionLogger.html#ad5aa7b94a7dbae593ed3ccd86b4d2444">LogSeverityCallback</a> *callback, void **closure)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAssertionLogger.html#a3da5261495682ba25a3df52194b1235f">setLogSeverityCallback</a> (<a class="el" href="classAssertionLogger.html#ad5aa7b94a7dbae593ed3ccd86b4d2444">LogSeverityCallback</a> callback, void *closure)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAssertionLogger.html#a471ebbf2186d72add4953e9b334112e1">setDefaultLogSeverity</a> (<a class="el" href="structball_1_1Severity.html#af49f66189615b9475c9cced03afde384">ball::Severity::Level</a> severity)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structball_1_1Severity.html#af49f66189615b9475c9cced03afde384">ball::Severity::Level</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAssertionLogger.html#ab4e8f5788e0bb389173dc7b18325a603">defaultLogSeverity</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This mechanism class implements an assertion failure handler that logs a stack trace when triggered, and unlike other such handlers, returns to its caller. The class provides the option of setting the severity level at which (BAEL) logging occurs, as well as the ability to obtain the severity via a callback function invoked on each failure. The class acts as a "static singleton," keeping a single state in atomic static variables. </p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="ad5aa7b94a7dbae593ed3ccd86b4d2444"></a><!-- doxytag: member="AssertionLogger::LogSeverityCallback" ref="ad5aa7b94a7dbae593ed3ccd86b4d2444" args=")(void *closure, const char *text, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structball_1_1Severity.html#af49f66189615b9475c9cced03afde384">ball::Severity::Level</a>(* <a class="el" href="classAssertionLogger.html#ad5aa7b94a7dbae593ed3ccd86b4d2444">AssertionLogger::LogSeverityCallback</a>)(void *closure, const char *text, const char *file, int line)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Severity callback type. If a callback function is set, it is invoked on each assertion failure and passed the closure that was set along with the callback, the text of the assertion failure, and the source file and line number where the assertion was triggered. The function should return a severity level at which the assertion failure is to be logged. If it returns 0 (<code>BAEL_OFF</code>) no logging at all will be done. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af8f503a48718ed496032e3e1160a7505"></a><!-- doxytag: member="AssertionLogger::assertionFailureHandler" ref="af8f503a48718ed496032e3e1160a7505" args="(const char *text, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void AssertionLogger::assertionFailureHandler </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Report the sepcified <code>text</code>, <code>file</code>, and <code>line</code> of an assertion failure, and a stack trace pinpointing where the failure occurred, via BAEL logging and return. If a severity callback has been set, it is invoked with the closure and <code>text</code>, <code>file</code>, and <code>line</code> to get the severity level, otherwise the static severity level is used. If the severity level is 0 (<code>BAEL_OFF</code>) then the assertion is not logged at all. Note that this assertion handler violates the usual policy that assertion handlers should not return to their callers. </p>

</div>
</div>
<a class="anchor" id="aa3a0db53e4f53e72917f2899d8dc1472"></a><!-- doxytag: member="AssertionLogger::getLogSeverityCallback" ref="aa3a0db53e4f53e72917f2899d8dc1472" args="(LogSeverityCallback *callback, void **closure)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void AssertionLogger::getLogSeverityCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAssertionLogger.html#ad5aa7b94a7dbae593ed3ccd86b4d2444">LogSeverityCallback</a> *&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>closure</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Load the specified <code>callback</code> with a pointer to the function that will be invoked to determine the severity level at which to report an assertion failure (when an assertion failure occurs), and load the specified <code>closure</code> with the closure pointer which will be passed to the callback function. Note that these values are the ones set by the most recent call to <code>setLogSeverityCallback</code>, and will be null if there has been no such call. </p>

</div>
</div>
<a class="anchor" id="a3da5261495682ba25a3df52194b1235f"></a><!-- doxytag: member="AssertionLogger::setLogSeverityCallback" ref="a3da5261495682ba25a3df52194b1235f" args="(LogSeverityCallback callback, void *closure)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void AssertionLogger::setLogSeverityCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAssertionLogger.html#ad5aa7b94a7dbae593ed3ccd86b4d2444">LogSeverityCallback</a>&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>closure</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set, to the specified <code>callback</code>, the function that will be invoked to determine the severity at which to log assertion failures, and set the specified <code>closure</code> to be the first argument passed to that function when it is invoked (when an assertion failure occurs). If <code>callback</code> is null, the value of <code>severity()</code> is used instead. Note that a typical pattern for <code>callback</code> and <code>closure</code> is to pass a static class method as the <code>callback</code> and a pointer to a particular object as the <code>closure</code>. </p>

</div>
</div>
<a class="anchor" id="a471ebbf2186d72add4953e9b334112e1"></a><!-- doxytag: member="AssertionLogger::setDefaultLogSeverity" ref="a471ebbf2186d72add4953e9b334112e1" args="(ball::Severity::Level severity)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void AssertionLogger::setDefaultLogSeverity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structball_1_1Severity.html#af49f66189615b9475c9cced03afde384">ball::Severity::Level</a>&nbsp;</td>
          <td class="paramname"> <em>severity</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set, to the specified <code>severity</code>, the default severity level at which assertion failures are logged. This value is used if a log severity callback has not been supplied (by calling <code>setLogSeverityCallback</code>). The default severity level is initially <code>ball::Severity::BAEL_FATAL</code>. </p>

</div>
</div>
<a class="anchor" id="ab4e8f5788e0bb389173dc7b18325a603"></a><!-- doxytag: member="AssertionLogger::defaultLogSeverity" ref="ab4e8f5788e0bb389173dc7b18325a603" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structball_1_1Severity.html#af49f66189615b9475c9cced03afde384">ball::Severity::Level</a> AssertionLogger::defaultLogSeverity </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the default severity level at which assertion tracing is logged. This value is used if a log severity callback has not been supplied (by calling <code>setLogSeverityCallback</code>). The default severity level is initially <code>ball::Severity::BAEL_FATAL</code>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="balst__assertionlogger_8h_source.html">balst_assertionlogger.h</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:49:54 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
