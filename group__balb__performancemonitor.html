<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: balb_performancemonitor Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component balb_performancemonitor<br/>
<small>
[<a class="el" href="group__balb.html">Package balb</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a mechanism to collect process performance measures.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebalb.html">balb</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">OS-Specific Permissions</a> </li>
<li>
<a href="#3.2">Iterator Invalidation</a> </li>
<li>
<a href="#3.3">Thread Safety</a> </li>
<li>
<a href="#3.4">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a mechanism to collect process performance measures. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbalb_1_1PerformanceMonitor.html">balb::PerformanceMonitor</a> </td><td>monitor process performance  </td></tr>
<tr>
<td><a class="el" href="classbalb_1_1PerformanceMonitor_1_1Statistics.html">balb::PerformanceMonitor::Statistics</a> </td><td>performance stats  </td></tr>
<tr>
<td><a class="el" href="classbalb_1_1PerformanceMonitor_1_1ConstIterator.html">balb::PerformanceMonitor::ConstIterator</a> </td><td>stats iteration  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides an application developer the means to collect and report performance statistics for an arbitrary number of processes running on the local machine. The <code><a class="el" href="classbalb_1_1PerformanceMonitor.html">balb::PerformanceMonitor</a></code> provides the mechanism for doing so, the <code><a class="el" href="classbalb_1_1PerformanceMonitor_1_1Statistics.html">balb::PerformanceMonitor::Statistics</a></code> class holds the data and the <code><a class="el" href="classbalb_1_1PerformanceMonitor_1_1ConstIterator.html">balb::PerformanceMonitor::ConstIterator</a></code> class is used to iterate over the data. The following table describes the measures collecting by this component. Note that all the collected measures are specific to the monitored process and do not refer to any system-wide measurement. <br/>
<br/>
<div class="fragment"><pre class="fragment"> Measure           Identifier           Description
 -------           ----------           -----------
 User CPU <a class="code" href="namespacebdet.html#aac65e816e68f5285b127a9071544c5c1">Time</a>     e_CPU_TIME_USER   Total amount of time spent executing
                                        instructions in user mode.

 System CPU <a class="code" href="namespacebdet.html#aac65e816e68f5285b127a9071544c5c1">Time</a>   e_CPU_TIME_SYSTEM Total amount of time spent executing
                                        instructions in kernel mode.

 CPU <a class="code" href="namespacebdet.html#aac65e816e68f5285b127a9071544c5c1">Time</a>          e_CPU_TIME        The sum of User and System CPU times.

 User CPU %        e_CPU_UTIL_USER   Percentage of elapsed CPU time <span class="keyword">this</span>
                                        process spent executing instructions
                                        in user mode.

 System CPU %      e_CPU_UTIL_SYSTEM Percentage of elapsed CPU time <span class="keyword">this</span>
                                        process spent executing instructions
                                        in kernel mode.

 CPU %             e_CPU_UTIL        Sum of User CPU % and System CPU %.

 Resident Size     e_RESIDENT_SIZE   Number of mega-bytes of physical
                                        memory used by the process.

 Virtual Size      e_VIRTUAL_SIZE    The <a class="code" href="namespacebdlat__ArrayFunctions.html#a65e1cfba76b2d13054b61159488b0da8">size</a> of the heap, in
                                        mega-bytes. This value does not
                                        include the <a class="code" href="namespacebdlat__ArrayFunctions.html#a65e1cfba76b2d13054b61159488b0da8">size</a> of the address
                                        space mapped to files (anonymous or
                                        otherwise.)

 Thread Count      e_NUM_THREADS     Number of threads executing in the
                                        process.

 Page Faults       e_NUM_PAGEFAULTS  Total number of page faults incurred
                                        throughout the lifetime of the
                                        process.
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="os-specific_permissions"></a> <a class="anchor" id="description.os-specific_permissions"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>OS-Specific Permissions: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Various OSs might require specific permissions in order to inspect processes other than the current process. For example, on Darwin, users other than root can only inspect processes running under the user with which the current process is running. This error condition will be indicated by a non-zero return value from <code>registerPid</code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="iterator_invalidation"></a> <a class="anchor" id="description.iterator_invalidation"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Iterator Invalidation: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Registration of new pids does not invalidate existing iterators. Unregistration of pid only invalidates iterators pointing to the statistics for the pid being unregistered, all other iterators remain valid. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="thread_safety"></a> <a class="anchor" id="description.thread_safety"></a> <a class="anchor" id="3.3"></a> </dd></dl>
<dl class="user"><dt><b>Thread Safety: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This class is completely thread safe. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.4"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following example shows how to monitor the currently executing process and produce a formatted report of the collected measures after a certain interval. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="comment">// Instantiate a scheduler used by the performance monitor to schedule</span>
  <span class="comment">// collection events.</span>
  <a class="code" href="classbdlmt_1_1TimerEventScheduler.html">bdlmt::TimerEventScheduler</a> scheduler;
  scheduler.<a class="code" href="classbdlmt_1_1TimerEventScheduler.html#a09ee79ad3449aa2be2c2fd8bb2fdb741">start</a>();

  <span class="comment">// Create the performance monitor, monitoring the current process and</span>
  <span class="comment">// auto-collecting statistics every second.</span>
  <a class="code" href="classbalb_1_1PerformanceMonitor.html">balb::PerformanceMonitor</a> perfmon(&amp;scheduler, 1.0);

  <span class="comment">// Assume the existence of three pids, 1000, 1001, and 1002, running on</span>
  <span class="comment">// the local machine.</span>
  perfmon.registerPid(1000, <span class="stringliteral">&quot;task1&quot;</span>);
  perfmon.registerPid(1001, <span class="stringliteral">&quot;task2&quot;</span>);
  perfmon.registerPid(1003, <span class="stringliteral">&quot;task3&quot;</span>);

  <span class="comment">// Print a formatted report of the performance statistics collected for</span>
  <span class="comment">// each pid every 10 seconds for one minute.</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 6; ++i) {
      <a class="code" href="structbslmt_1_1ThreadUtil.html#a4e6a840e495c3afa38474a2dcc073286">bslmt::ThreadUtil::microSleep</a>(0, 10);

      <span class="keywordflow">for</span> (<a class="code" href="classbalb_1_1PerformanceMonitor_1_1ConstIterator.html">balb::PerformanceMonitor::ConstIterator</a> it  = perfmon.begin();
                                                  it != perfmon.end();
                                                ++it) {
          <span class="keyword">const</span> <a class="code" href="classbalb_1_1PerformanceMonitor_1_1Statistics.html">balb::PerformanceMonitor::Statistics</a>&amp; stats = *it;
          bsl::cout &lt;&lt; <span class="stringliteral">&quot;Pid = &quot;</span> &lt;&lt; stats.<a class="code" href="classbalb_1_1PerformanceMonitor_1_1Statistics.html#abc4d1863530b9e28db53b48ba62a2f26">pid</a>() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;
          stats.<a class="code" href="classbalb_1_1PerformanceMonitor_1_1Statistics.html#ae6a0f806015baf332f01f446768075df">print</a>(bsl::cout);
      }
  }
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:21 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
