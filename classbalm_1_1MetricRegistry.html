<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: Class balm::MetricRegistry</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacebalm.html">balm</a>      </li>
      <li><a class="el" href="classbalm_1_1MetricRegistry.html">balm::MetricRegistry</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>balm::MetricRegistry Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="balm::MetricRegistry" -->
<p><code>#include &lt;<a class="el" href="balm__metricregistry_8h_source.html">balm_metricregistry.h</a>&gt;</code></p>

<p><a href="classbalm_1_1MetricRegistry-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>CategoryAndNameLess</b></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a6f0ad280c44d434723ccd42bf5e97b1b">BSLMF_NESTED_TRAIT_DECLARATION</a> (<a class="el" href="classbalm_1_1MetricRegistry.html">MetricRegistry</a>, <a class="el" href="structbslma_1_1UsesBslmaAllocator.html">bslma::UsesBslmaAllocator</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a0b319f1424e70c2b4148e9bc406b2220">MetricRegistry</a> (<a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *basicAllocator=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a0837d99c4a9204554294ef096866617d">~MetricRegistry</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbalm_1_1MetricId.html">MetricId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#af720b0cef8fa61e2f1d1e288dcfc91a3">addId</a> (const char *category, const char *name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbalm_1_1MetricId.html">MetricId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a74f8a7c9cd88c3922535027a4cc89836">getId</a> (const char *category, const char *name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbalm_1_1Category.html">Category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a58112e9b6b5fc1a82058e8a7370c5665">addCategory</a> (const char *category)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbalm_1_1Category.html">Category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a151728817a6a256619e43338ef2155d1">getCategory</a> (const char *category)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a0c70aebd67ff3e8e644668debeeadd38">setCategoryEnabled</a> (const <a class="el" href="classbalm_1_1Category.html">Category</a> *category, bool value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#ac008eefac678984a2d5aef115379fd0b">setAllCategoriesEnabled</a> (bool value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#ae81ed56ff991d39c83fc6ef8fa53cac2">registerCategoryHolder</a> (const <a class="el" href="classbalm_1_1Category.html">Category</a> *category, <a class="el" href="classCategoryHolder.html">CategoryHolder</a> *holder)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#aa3b8903d423b35418701ca5dad093aa2">setPreferredPublicationType</a> (const <a class="el" href="classbalm_1_1MetricId.html">MetricId</a> &amp;metric, <a class="el" href="structbalm_1_1PublicationType.html#a61bca603d04050416a69ccb100f62495">PublicationType::Value</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a940112685775d894f033b2aea66c5c63">setFormat</a> (const <a class="el" href="classbalm_1_1MetricId.html">MetricId</a> &amp;metricId, const MetricFormat &amp;format)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbalm_1_1MetricDescription.html#a97594ae908a395c373cba9711afe381a">MetricDescription::UserDataKey</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#abef7b69dc9b67072873dc3757c4ae02f">createUserDataKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#ad83ed837edb40805a97ca6e0b583bda7">setUserData</a> (const <a class="el" href="classbalm_1_1MetricId.html">MetricId</a> &amp;metricId, <a class="el" href="classbalm_1_1MetricDescription.html#a97594ae908a395c373cba9711afe381a">MetricDescription::UserDataKey</a> key, const void *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#af113c6f5e92cb4c7de939db9fa02a009">setUserData</a> (const char *categoryName, <a class="el" href="classbalm_1_1MetricDescription.html#a97594ae908a395c373cba9711afe381a">MetricDescription::UserDataKey</a> key, const void *value, bool prefixFlag=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bsl::size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#ab6464479c5d94077cd11ac438eda218f">numMetrics</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bsl::size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#ad3941abf3775be1847a9610ff5910817">numCategories</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbalm_1_1Category.html">Category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a343777f6ff6490c1636443843ec45fac">findCategory</a> (const char *category) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbalm_1_1MetricId.html">MetricId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a2c2d9481ae89a7305984455ece1afb70">findId</a> (const char *category, const char *name) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a9b8f8f11f07e837bbb12cf896b60164e">getAllCategories</a> (<a class="el" href="classbsl_1_1vector.html">bsl::vector</a>&lt; const <a class="el" href="classbalm_1_1Category.html">Category</a> * &gt; *categories) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bsl::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbalm_1_1MetricRegistry.html#a8ce95354430deaf0546cb54c1592b8ec">print</a> (bsl::ostream &amp;stream, int level=0, int spacesPerLevel=4) const </td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The class defines a thread-aware mechanism for registering metrics and metric categories. A metric is uniquely identified by its name and category, and the metric registry provides a mapping from those identifying properties to a <code><a class="el" href="classbalm_1_1MetricId.html">balm::MetricId</a></code>. A <code><a class="el" href="classbalm_1_1MetricRegistry.html">balm::MetricRegistry</a></code> object also provides a mapping from a category name to the address of a non-modifiable <code><a class="el" href="classbalm_1_1Category.html">balm::Category</a></code> object. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0b319f1424e70c2b4148e9bc406b2220"></a><!-- doxytag: member="balm::MetricRegistry::MetricRegistry" ref="a0b319f1424e70c2b4148e9bc406b2220" args="(bslma::Allocator *basicAllocator=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">balm::MetricRegistry::MetricRegistry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *&nbsp;</td>
          <td class="paramname"> <em>basicAllocator</em> = <code>0</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create an empty metric registry. Optionally specify a <code>basicAllocator</code> used to supply memory. If <code>basicAllocator</code> is 0, the currently installed default allocator is used. </p>

</div>
</div>
<a class="anchor" id="a0837d99c4a9204554294ef096866617d"></a><!-- doxytag: member="balm::MetricRegistry::~MetricRegistry" ref="a0837d99c4a9204554294ef096866617d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">balm::MetricRegistry::~MetricRegistry </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy this metric registry. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6f0ad280c44d434723ccd42bf5e97b1b"></a><!-- doxytag: member="balm::MetricRegistry::BSLMF_NESTED_TRAIT_DECLARATION" ref="a6f0ad280c44d434723ccd42bf5e97b1b" args="(MetricRegistry, bslma::UsesBslmaAllocator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">balm::MetricRegistry::BSLMF_NESTED_TRAIT_DECLARATION </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbalm_1_1MetricRegistry.html">MetricRegistry</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbslma_1_1UsesBslmaAllocator.html">bslma::UsesBslmaAllocator</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af720b0cef8fa61e2f1d1e288dcfc91a3"></a><!-- doxytag: member="balm::MetricRegistry::addId" ref="af720b0cef8fa61e2f1d1e288dcfc91a3" args="(const char *category, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbalm_1_1MetricId.html">MetricId</a> balm::MetricRegistry::addId </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add the specified <code>category</code> and <code>name</code> to this registry, unless it has already been registered, and return a <code><a class="el" href="classbalm_1_1MetricId.html">balm::MetricId</a></code> object identifying the newly-registered metric. If the indicated metric has already been registered, the returned <code><a class="el" href="classbalm_1_1MetricId.html">balm::MetricId</a></code> object will <em>not</em> be valid (i.e., <code>isValid</code> will return <code>false</code>). The behavior is undefined unless <code>category</code> and <code>name</code> are null-terminated. </p>

</div>
</div>
<a class="anchor" id="a74f8a7c9cd88c3922535027a4cc89836"></a><!-- doxytag: member="balm::MetricRegistry::getId" ref="a74f8a7c9cd88c3922535027a4cc89836" args="(const char *category, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbalm_1_1MetricId.html">MetricId</a> balm::MetricRegistry::getId </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a <code><a class="el" href="classbalm_1_1MetricId.html">balm::MetricId</a></code> object for the metric identified by the specified <code>category</code> and <code>name</code>. If no corresponding metric has already been registered, register a new metric and return a <code><a class="el" href="classbalm_1_1MetricId.html">balm::MetricId</a></code> object identifying that newly-registered metric. The behavior is undefined unless <code>category</code> and <code>name</code> are null-terminated. Note that this operation is guaranteed to return a valid <code><a class="el" href="classbalm_1_1MetricId.html">balm::MetricId</a></code> object. </p>

</div>
</div>
<a class="anchor" id="a58112e9b6b5fc1a82058e8a7370c5665"></a><!-- doxytag: member="balm::MetricRegistry::addCategory" ref="a58112e9b6b5fc1a82058e8a7370c5665" args="(const char *category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbalm_1_1Category.html">Category</a>* balm::MetricRegistry::addCategory </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add the specified <code>category</code> to this registry, unless it has already been registered. Return the address of the newly-created non-modifiable <code><a class="el" href="classbalm_1_1Category.html">balm::Category</a></code> object on success, and 0 otherwise. The behavior is undefined unless <code>category</code> is null-terminated. </p>

</div>
</div>
<a class="anchor" id="a151728817a6a256619e43338ef2155d1"></a><!-- doxytag: member="balm::MetricRegistry::getCategory" ref="a151728817a6a256619e43338ef2155d1" args="(const char *category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbalm_1_1Category.html">Category</a>* balm::MetricRegistry::getCategory </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the address of the non-modifiable <code><a class="el" href="classbalm_1_1Category.html">balm::Category</a></code> object for the specified <code>category</code>. If no corresponding category exists, register a new category and return the address of the newly-created <code><a class="el" href="classbalm_1_1Category.html">balm::Category</a></code> object. The behavior is undefined unless <code>category</code> is null-terminated. Note that this operation is guaranteed to return a valid address. </p>

</div>
</div>
<a class="anchor" id="a0c70aebd67ff3e8e644668debeeadd38"></a><!-- doxytag: member="balm::MetricRegistry::setCategoryEnabled" ref="a0c70aebd67ff3e8e644668debeeadd38" args="(const Category *category, bool value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balm::MetricRegistry::setCategoryEnabled </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbalm_1_1Category.html">Category</a> *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set whether the specified <code>category</code> is enabled to the specified <code>value</code>. The behavior is undefined unless <code>category</code> is a valid address of a category previously returned by this metric registry. Note that this operation is thread-safe, but <em>not</em> atomic: Other threads may simultaneously access the current enabled value for <code>category</code> while this operation completes. Also note that this operation has <em>linear</em> runtime performance with respect to the number of registered category holders for <code>category</code>. </p>

</div>
</div>
<a class="anchor" id="ac008eefac678984a2d5aef115379fd0b"></a><!-- doxytag: member="balm::MetricRegistry::setAllCategoriesEnabled" ref="ac008eefac678984a2d5aef115379fd0b" args="(bool value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balm::MetricRegistry::setAllCategoriesEnabled </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>value</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set whether each currently registered category is enabled to the specified <code>value</code>, and ensure that categories registered after this call are initialized as either enabled or disabled, accordingly. This operation is logically equivalent to iterating over the list of currently registered categories and calling <code>setCategoryEnabled</code> on each category individually, and also setting a default <code>enabled</code> value (for newly-created categories). Hence, subsequent calls <code>setCategoryEnabled</code> will override this value for a particular category. Note that this operation is thread-safe, but <em>not</em> atomic: Other threads may simultaneously access the current enabled status for registered categories while this operation completes. Also note that this operation has <em>linear</em> runtime performance with respect to the total number of category holders registered with this repository. </p>

</div>
</div>
<a class="anchor" id="ae81ed56ff991d39c83fc6ef8fa53cac2"></a><!-- doxytag: member="balm::MetricRegistry::registerCategoryHolder" ref="ae81ed56ff991d39c83fc6ef8fa53cac2" args="(const Category *category, CategoryHolder *holder)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balm::MetricRegistry::registerCategoryHolder </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbalm_1_1Category.html">Category</a> *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCategoryHolder.html">CategoryHolder</a> *&nbsp;</td>
          <td class="paramname"> <em>holder</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Load into the specified <code>holder</code> the address of the specified <code>category</code>, its <code>enabled</code> status, and the address of the next holder in the linked list of category holders maintained by <code>category</code> (prepending <code>holder</code> to the linked list of category holders for <code>category</code>). The supplied <code>category</code> will update the value returned by <code>holder-&gt;enabled()</code> when its enabled state changes, and will reset <code>holder</code> (i.e., <code>holder-&gt;<a class="el" href="namespacebdlat__ValueTypeFunctions.html#a712743f16be0f4121bca7574c9face99">reset()</a></code>) when <code>category</code> is destroyed. The behavior is undefined unless <code>holder</code> remains valid and <em>unmodified</em> (by the client) for the lifetime of this object.</p>
<p>This method should <em>not</em> be used directly by client code. It is an implementation detail of the <code>balm</code> metric collection system. </p>

</div>
</div>
<a class="anchor" id="aa3b8903d423b35418701ca5dad093aa2"></a><!-- doxytag: member="balm::MetricRegistry::setPreferredPublicationType" ref="aa3b8903d423b35418701ca5dad093aa2" args="(const MetricId &amp;metric, PublicationType::Value type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balm::MetricRegistry::setPreferredPublicationType </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbalm_1_1MetricId.html">MetricId</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>metric</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbalm_1_1PublicationType.html#a61bca603d04050416a69ccb100f62495">PublicationType::Value</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the preferred publication type of the specified <code>metric</code> to the specified <code>type</code>. The preferred publication type of a metric indicates the preferred aggregate to publish for that metric, or <code>balm::PublicationType::UNSPECIFIED</code> if there is no preference. The behavior is undefined unless <code>metric</code> was previously returned by this metric registry. Note that there is no uniform definition for how publishers will interpret this value; an <code>UNSPECIFIED</code> value generally indicates that the all the collected aggregates (total, count, minimum, and maximum value) should be published. Also note that the preferred publication type is accessed through the <code><a class="el" href="classbalm_1_1MetricDescription.html">balm::MetricDescription</a></code> (i.e., <code>metric.description()-&gt;preferredPublicationType()</code>). </p>

</div>
</div>
<a class="anchor" id="a940112685775d894f033b2aea66c5c63"></a><!-- doxytag: member="balm::MetricRegistry::setFormat" ref="a940112685775d894f033b2aea66c5c63" args="(const MetricId &amp;metricId, const MetricFormat &amp;format)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balm::MetricRegistry::setFormat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbalm_1_1MetricId.html">MetricId</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>metricId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MetricFormat &amp;&nbsp;</td>
          <td class="paramname"> <em>format</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the format for the specified <code>metricId</code> to the specified <code>format</code>. Note that there is no uniform specification for how publisher implementations will interpret the supplied <code>format</code>. Also note that the format for a metric is accessed through the <code><a class="el" href="classbalm_1_1MetricDescription.html">balm::MetricDescription</a></code>. For example: <br/>
<br/>
</p>
<div class="fragment"><pre class="fragment">          metric.description()-&gt;format();
</pre></div><p><br/>
<br/>
 </p>

</div>
</div>
<a class="anchor" id="abef7b69dc9b67072873dc3757c4ae02f"></a><!-- doxytag: member="balm::MetricRegistry::createUserDataKey" ref="abef7b69dc9b67072873dc3757c4ae02f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbalm_1_1MetricDescription.html#a97594ae908a395c373cba9711afe381a">MetricDescription::UserDataKey</a> balm::MetricRegistry::createUserDataKey </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a new unique key that can be used to associate (via <code>setUserData</code>) and retrieve (via <code>userData</code>) a value with a metric (or group of metrics). Note that the returned key can be used by clients of <code>balm</code> to associate additional information with a metric. </p>

</div>
</div>
<a class="anchor" id="ad83ed837edb40805a97ca6e0b583bda7"></a><!-- doxytag: member="balm::MetricRegistry::setUserData" ref="ad83ed837edb40805a97ca6e0b583bda7" args="(const MetricId &amp;metricId, MetricDescription::UserDataKey key, const void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balm::MetricRegistry::setUserData </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbalm_1_1MetricId.html">MetricId</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>metricId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbalm_1_1MetricDescription.html#a97594ae908a395c373cba9711afe381a">MetricDescription::UserDataKey</a>&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Associate the specified <code>value</code> with the specified <code>key</code> in the description of the specified <code>metricId</code>. The behavior is undefined unless <code>key</code> was previously returned from <code>createUserDataKey</code>. Note that this method allows clients of <code>balm</code> to associate (opaque) application-specific information with a metric. </p>

</div>
</div>
<a class="anchor" id="af113c6f5e92cb4c7de939db9fa02a009"></a><!-- doxytag: member="balm::MetricRegistry::setUserData" ref="af113c6f5e92cb4c7de939db9fa02a009" args="(const char *categoryName, MetricDescription::UserDataKey key, const void *value, bool prefixFlag=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balm::MetricRegistry::setUserData </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>categoryName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbalm_1_1MetricDescription.html#a97594ae908a395c373cba9711afe381a">MetricDescription::UserDataKey</a>&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>prefixFlag</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Associate the specified <code>value</code> with the specified <code>key</code> in any metric belonging to a category having the specified <code>categoryName</code>, or a category whose name begins with <code>categoryName</code>, as determined by the optionally specified <code>prefixFlag</code>. If <code>prefixFlag</code> is <code>false</code> or is not specified, only those metrics belonging to a category having <code>categoryName</code> will be mapped; otherwise, <code>value</code> will be associated with <code>key</code> for all metrics belonging to any category whose name begins with <code>categoryName</code>. This association applies to existing metrics as well as any subsequently created ones. When a metric is created that matches more than one registered category prefix, it is not specified which supplied value will be associated with <code>key</code>, unless only one of those values is non-null, in which case the unique non-null value is used. The behavior is undefined unless <code>key</code> was previously returned from <code>createUserDataKey</code>. </p>

</div>
</div>
<a class="anchor" id="ab6464479c5d94077cd11ac438eda218f"></a><!-- doxytag: member="balm::MetricRegistry::numMetrics" ref="ab6464479c5d94077cd11ac438eda218f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bsl::size_t balm::MetricRegistry::numMetrics </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the number of metrics in this registry. </p>

</div>
</div>
<a class="anchor" id="ad3941abf3775be1847a9610ff5910817"></a><!-- doxytag: member="balm::MetricRegistry::numCategories" ref="ad3941abf3775be1847a9610ff5910817" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bsl::size_t balm::MetricRegistry::numCategories </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the number of categories in this registry. </p>

</div>
</div>
<a class="anchor" id="a343777f6ff6490c1636443843ec45fac"></a><!-- doxytag: member="balm::MetricRegistry::findCategory" ref="a343777f6ff6490c1636443843ec45fac" args="(const char *category) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbalm_1_1Category.html">Category</a>* balm::MetricRegistry::findCategory </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find the specified <code>category</code>, a null-terminated string, in this registry. Return the address of the non-modifiable <code><a class="el" href="classbalm_1_1Category.html">balm::Category</a></code> object corresponding to the <code>category</code>, or 0 if no such category has been registered. </p>

</div>
</div>
<a class="anchor" id="a2c2d9481ae89a7305984455ece1afb70"></a><!-- doxytag: member="balm::MetricRegistry::findId" ref="a2c2d9481ae89a7305984455ece1afb70" args="(const char *category, const char *name) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbalm_1_1MetricId.html">MetricId</a> balm::MetricRegistry::findId </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find the specified null-terminated strings <code>category</code> and <code>name</code> in this registry. Return the <code><a class="el" href="classbalm_1_1MetricId.html">balm::MetricId</a></code> object corresponding to the metric having the <code>category</code> and <code>name</code>, if found, or an invalid metric id if no such metric has been registered (i.e., <code>isValid</code> will return <code>false</code>). </p>

</div>
</div>
<a class="anchor" id="a9b8f8f11f07e837bbb12cf896b60164e"></a><!-- doxytag: member="balm::MetricRegistry::getAllCategories" ref="a9b8f8f11f07e837bbb12cf896b60164e" args="(bsl::vector&lt; const Category * &gt; *categories) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void balm::MetricRegistry::getAllCategories </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbsl_1_1vector.html">bsl::vector</a>&lt; const <a class="el" href="classbalm_1_1Category.html">Category</a> * &gt; *&nbsp;</td>
          <td class="paramname"> <em>categories</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Append to the specified <code>categories</code> the addresses of all the categories registered by this <code><a class="el" href="classbalm_1_1MetricRegistry.html">balm::MetricRegistry</a></code> object. </p>

</div>
</div>
<a class="anchor" id="a8ce95354430deaf0546cb54c1592b8ec"></a><!-- doxytag: member="balm::MetricRegistry::print" ref="a8ce95354430deaf0546cb54c1592b8ec" args="(bsl::ostream &amp;stream, int level=0, int spacesPerLevel=4) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bsl::ostream&amp; balm::MetricRegistry::print </td>
          <td>(</td>
          <td class="paramtype">bsl::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>spacesPerLevel</em> = <code>4</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Format this object to the specified output <code>stream</code> at the (absolute value of) the optionally specified indentation <code>level</code> and return a reference to <code>stream</code>. If <code>level</code> is specified, optionally specify <code>spacesPerLevel</code>, the number of spaces per indentation level for this and all of its nested objects. If <code>level</code> is negative, suppress indentation of the first line. If <code>spacesPerLevel</code> is negative, format the entire output on one line, suppressing all but the initial indentation (as governed by <code>level</code>). If <code>stream</code> is not valid on entry, this operation has no effect. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="balm__metricregistry_8h_source.html">balm_metricregistry.h</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Oct 15 2015 14:34:29 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
