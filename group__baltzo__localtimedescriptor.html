<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: baltzo_localtimedescriptor Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component baltzo_localtimedescriptor<br/>
<small>
[<a class="el" href="group__baltzo.html">Package baltzo</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide an attribute class for characterizing local time values.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebaltzo.html">baltzo</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Attributes</a> </li>
<li>
<a href="#3.2">Usage</a> <ul>
<li>
<a href="#3.2.1">Example 1: Converting Between UTC and Local Times</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide an attribute class for characterizing local time values. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a> </td><td>attributes characterizing a local time  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__baltzo__zoneinfo.html" title="Provide a value type to represent a time zone.">Component baltzo_zoneinfo</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a single, simply constrained (value-semantic) attribute class, <code><a class="el" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a></code>, that is used to characterize subsets of local time values within time zones. Note that this class is consistent with the "local-time types" found in the "Zoneinfo" representation of a time zone (see <code>baltzo_zoneinfo</code>). </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="attributes"></a> <a class="anchor" id="description.attributes"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Attributes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><br/>
<br/>
<div class="fragment"><pre class="fragment">  Name                Type         Default  Simple Constraints
  ------------------  -----------  -------  ------------------
  description         <a class="code" href="classbsl_1_1basic__string.html">bsl::string</a>  <span class="stringliteral">&quot;&quot;</span>       none
  dstInEffectFlag     <span class="keywordtype">bool</span>         <span class="keyword">false</span>    none
  utcOffsetInSeconds  <span class="keywordtype">int</span>          0        [-86399 .. 86399]
</pre></div><br/>
<br/>
 <ul>
<li>
<code>description</code>: non-canonical, non-localized name (intended for debugging).  </li>
<li>
<code>dstInEffectFlag</code>: <code>true</code> if the described local times are Daylight-Saving-Time (DST) values.  </li>
<li>
<code>utcOffsetInSeconds</code>: offset from UTC of the described local times.  </li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd>For example, in New York on January 1, 2011, the local time is Eastern Standard Time, Daylight-Saving Time (DST) is not in effect, and the offset from UTC is -5 hours. We can represent this information using a <code><a class="el" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a></code> object whose <code>description</code> is "EST", <code>dstInEffectFlag</code> is <code>false</code>, and <code>utcOffsetInSeconds</code> is -18,000 (-5 * 60 * 60). Note that <code>description</code> is <em>not</em> canonical, and is intended for development and debugging only. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_converting_between_utc_and_local_times"></a> <a class="anchor" id="usage.example_1~3A_converting_between_utc_and_local_times"></a> <a class="anchor" id="description.usage.example_1~3A_converting_between_utc_and_local_times"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.2.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Converting Between UTC and Local Times: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>When using the "Zoneinfo" database, we want to represent and access the local time information contained in the "Zoneinfo" binary data files. Once we have obtained this information, we can use it to convert times from one time zone to another. The following code illustrates how to perform such conversions using <code><a class="el" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a></code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we define a <code><a class="el" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a></code> object that characterizes the local time in effect for New York Daylight-Saving Time in 2010: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">enum</span> { NEW_YORK_DST_OFFSET = -4 * 60 * 60 };  <span class="comment">// -4 hours in seconds</span>

  <a class="code" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a> newYorkDst(NEW_YORK_DST_OFFSET, <span class="keyword">true</span>, <span class="stringliteral">&quot;EDT&quot;</span>);

  assert(NEW_YORK_DST_OFFSET == newYorkDst.utcOffsetInSeconds());
  assert(               <span class="keyword">true</span> == newYorkDst.dstInEffectFlag());
  assert(              <span class="stringliteral">&quot;EDT&quot;</span> == newYorkDst.description());
</pre></div><br/>
<br/>
 Then, we create a <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> representing the time "Jul 20, 2010 11:00" in New York: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> newYorkDatetime(2010, 7, 20, 11, 0, 0);
</pre></div><br/>
<br/>
 Next, we convert <code>newYorkDatetime</code> to its corresponding UTC value using the <code>newYorkDst</code> descriptor (created above); note that, when converting from a local time to a UTC time, the <em>signed</em> offset from UTC is <em>subtracted</em> from the local time: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> utcDatetime = newYorkDatetime;
  utcDatetime.<a class="code" href="classbdlt_1_1Datetime.html#a60ba2b4b3cf0088b075823b52934f8ac">addSeconds</a>(-newYorkDst.utcOffsetInSeconds());
</pre></div><br/>
<br/>
 Then, we verify that the result corresponds to the expected UTC time, "Jul 20, 2010 15:00": <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(<a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>(2010, 7, 20, 15, 0, 0) == utcDatetime);
</pre></div><br/>
<br/>
 Next, we define a <code><a class="el" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a></code> object that describes the local time in effect for Rome in the summer of 2010: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">enum</span> { ROME_DST_OFFSET = 2 * 60 * 60 };  <span class="comment">// 2 hours in seconds</span>

  <a class="code" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a> romeDst(ROME_DST_OFFSET, <span class="keyword">true</span>, <span class="stringliteral">&quot;CEST&quot;</span>);

  assert(ROME_DST_OFFSET == romeDst.utcOffsetInSeconds());
  assert(           <span class="keyword">true</span> == romeDst.dstInEffectFlag());
  assert(         <span class="stringliteral">&quot;CEST&quot;</span> == romeDst.description());
</pre></div><br/>
<br/>
 Now, we convert <code>utcDatetime</code> to its corresponding local-time value in Rome using the <code>romeDst</code> descriptor (created above): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> romeDatetime = utcDatetime;
  romeDatetime.<a class="code" href="classbdlt_1_1Datetime.html#a60ba2b4b3cf0088b075823b52934f8ac">addSeconds</a>(romeDst.utcOffsetInSeconds());
</pre></div><br/>
<br/>
 Notice that, when converting from UTC time to local time, the signed offset from UTC is <em>added</em> to UTC time rather than subtracted. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Finally, we verify that the result corresponds to the expected local time, "Jul 20, 2010 17:00": <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(<a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>(2010, 7, 20, 17, 0, 0) == romeDatetime);
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:30 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
