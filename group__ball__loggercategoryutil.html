<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: ball_loggercategoryutil Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component ball_loggercategoryutil<br/>
<small>
[<a class="el" href="group__ball.html">Package ball</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a suite of utility functions for category management.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceball.html">ball</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Deprecation Notice</a> </li>
<li>
<a href="#3.2">Usage</a> <ul>
<li>
<a href="#3.2.1">Example 1: Managing Categories</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a suite of utility functions for category management. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="structball_1_1LoggerCategoryUtil.html">ball::LoggerCategoryUtil</a> </td><td>namespace for category management utilities  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ball__loggermanager.html" title="Provide a manager of core logging functionality.">Component ball_loggermanager</a>, <a class="el" href="group__ball__categorymanager.html" title="Provide a manager of named categories each having &quot;thresholds&quot;.">Component ball_categorymanager</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component defines a <code>struct</code>, <code><a class="el" href="structball_1_1LoggerCategoryUtil.html">ball::LoggerCategoryUtil</a></code>, that provides a set of utility functions for managing the categories contained in a <code><a class="el" href="classball_1_1LoggerManager.html">ball::LoggerManager</a></code> based on the notion of hierarchy. In particular, the <code>setThresholdLevelsHierarchically</code> function modifies the threshold levels of each category in <code><a class="el" href="classball_1_1LoggerManager.html">ball::LoggerManager</a></code> whose name has the specified string as a prefix. The <code>addCategoryHierarchically</code> function creates a new category that inherits threshold levels from the exiting category whose name is the longest prefix match, if such a category exists. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="deprecation_notice"></a> <a class="anchor" id="description.deprecation_notice"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Deprecation Notice: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <code>setThresholdLevels</code> function is deprecated in favor of <code>setThresholdLevelsHierarchically</code>. The former is data-sensitive in the sense that the <code>*</code> located at the end of the specified category name will be treated as a special flag to turn on the prefix name matching, thus causing trouble for categories whose name ends with <code>*</code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_managing_categories"></a> <a class="anchor" id="usage.example_1~3A_managing_categories"></a> <a class="anchor" id="description.usage.example_1~3A_managing_categories"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.2.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Managing Categories: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following code fragments illustrate basic usage of this component's <code>setThresholdLevelsHierarchically</code> and <code>addCategoryHierarchically</code> methods. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>For convenience, we first create an auxiliary function that prints out the names and threshold level values of all the categories currently in the logger manager, except the default one: <br/>
<br/>
<div class="fragment"><pre class="fragment">     <span class="keywordtype">void</span> printAllCategories()
     {
         <a class="code" href="classball_1_1LoggerManager.html">ball::LoggerManager</a>&amp; lm = <a class="code" href="classball_1_1LoggerManager.html#a7ff8e9a0233a7bb2849a1681f24779b5">ball::LoggerManager::singleton</a>();
         ball::LoggerCategoryManip manip(&amp;lm);
         <span class="keywordflow">for</span> (manip.advance(); manip; manip.advance()) { <span class="comment">// skip the default</span>
                                                         <span class="comment">// category</span>
             <span class="keyword">const</span> ball::Category *category
                 = lm.<a class="code" href="classball_1_1LoggerManager.html#a283604010005c7392eb26d7d5cf82ecd">lookupCategory</a>(manip().categoryName());
             bsl::cout &lt;&lt; <span class="stringliteral">&quot;[ &quot;</span> &lt;&lt; category-&gt;<a class="code" href="classCategory.html#a77b6780f6d2d2fdb07a9248a2c013521">categoryName</a>()
                       &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category-&gt;recordLevel()
                       &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category-&gt;passLevel()
                       &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category-&gt;triggerLevel()
                       &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category-&gt;triggerAllLevel()
                       &lt;&lt; <span class="stringliteral">&quot; ]&quot;</span> &lt;&lt; bsl::endl;
         }
     }
</pre></div><br/>
<br/>
 Now we initialize the logging environment by creating a test observer object and a logger manager object, and set the default threshold levels of the logger manager object to [191, 95, 63, 31]: <br/>
<br/>
<div class="fragment"><pre class="fragment">     BloombergLP::ball::TestObserver  testObserver(bsl::cout);
     BloombergLP::ball::TestObserver *TO = &amp;testObserver;
     <a class="code" href="classball_1_1LoggerManager.html#ab4965f32eb87593e0c6da4c9e039ca5b">ball::LoggerManager::initSingleton</a>(TO);
     <a class="code" href="classball_1_1LoggerManager.html">ball::LoggerManager</a>&amp; lm = <a class="code" href="classball_1_1LoggerManager.html#a7ff8e9a0233a7bb2849a1681f24779b5">ball::LoggerManager::singleton</a>();
     lm.<a class="code" href="classball_1_1LoggerManager.html#a6a179980c2e8798820dedbcd5eb1532e">setDefaultThresholdLevels</a>(191, 95, 63, 31);
</pre></div><br/>
<br/>
 We then create two new categories, "EQ" and "EQ.MARKET", by calling the <code>addCategory</code> method of the logger manager class, with their threshold levels explicitly set to different values (which are also different from the default threshold levels): <br/>
<br/>
<div class="fragment"><pre class="fragment">     lm.<a class="code" href="classball_1_1LoggerManager.html#a53fe78b8ae4797eaf7cbe668296e7399">addCategory</a>(<span class="stringliteral">&quot;EQ&quot;</span>, 192, 96, 64, 32);
     lm.<a class="code" href="classball_1_1LoggerManager.html#a53fe78b8ae4797eaf7cbe668296e7399">addCategory</a>(<span class="stringliteral">&quot;EQ.MARKET&quot;</span>, 193, 97, 65, 33);
     printAllCategories();
</pre></div><br/>
<br/>
 The following is printed out by <code>printallCategories</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">     [ EQ, 192, 96, 64, 32 ]
     [ EQ.MARKET, 193, 97, 65, 33 ]
</pre></div><br/>
<br/>
 We add a new category using <code>addCategoryHierarchically</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">     <a class="code" href="structball_1_1LoggerCategoryUtil.html#ab1a1c7c4e6b50a094891fc217b575e50">ball::LoggerCategoryUtil::addCategoryHierarchically</a>(&amp;lm,
                                                        <span class="stringliteral">&quot;EQ.MARKET.NYSE&quot;</span>);
     printAllCategories();
</pre></div><br/>
<br/>
 The new category with name "EQ.MARKET.NYSE" inherits its threshold levels from the category "EQ.MARKET" rather than having the default threshold levels or inheriting them from "EQ" because of the longest prefix matching rule: <br/>
<br/>
<div class="fragment"><pre class="fragment">     [ EQ, 192, 96, 64, 32 ]
     [ EQ.MARKET, 193, 97, 65, 33 ]
     [ EQ.MARKET.NYSE, 193, 97, 65, 33 ]
</pre></div><br/>
<br/>
 We now want to adjust the threshold levels for all categories whose name starts with "EQ.MARKET" using <code>setThresholdLevelsHierarchically</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">     <a class="code" href="structball_1_1LoggerCategoryUtil.html#a39cc50d9bd699fa5f7661613ca756215">ball::LoggerCategoryUtil::setThresholdLevelsHierarchically</a>(&amp;lm,
                                                               <span class="stringliteral">&quot;EQ.MARKET&quot;</span>,
                                                               194,
                                                               98,
                                                               66,
                                                               34);
     printAllCategories();
</pre></div><br/>
<br/>
 We will notice that the threshold levels of "EQ.MARKET" and "EQ.MARKET.NYSE" have been changed to the new values, while those of "EQ" remain unchanged: <br/>
<br/>
<div class="fragment"><pre class="fragment">     [ EQ, 192, 96, 64, 32 ]
     [ EQ.MARKET, 194, 98, 66, 34 ]
     [ EQ.MARKET.NYSE, 194, 98, 66, 34 ]
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:25 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
