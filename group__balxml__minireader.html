<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: balxml_minireader Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component balxml_minireader<br/>
<small>
[<a class="el" href="group__balxml.html">Package balxml</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide light-weight implementation of <code><a class="el" href="classbalxml_1_1Reader.html">balxml::Reader</a></code> protocol.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebalxml.html">balxml</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide light-weight implementation of <code><a class="el" href="classbalxml_1_1Reader.html">balxml::Reader</a></code> protocol. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbalxml_1_1MiniReader.html">balxml::MiniReader</a> </td><td>light-weight <code><a class="el" href="classbalxml_1_1Reader.html">balxml::Reader</a></code> implementation  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__balxml__reader.html" title="Provide common reader protocol for parsing XML documents.">Component balxml_reader</a>, <a class="el" href="group__balxml__errorinfo.html" title="Provide common error information for XML components.">Component balxml_errorinfo</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <code><a class="el" href="classbalxml_1_1MiniReader.html">balxml::MiniReader</a></code> class is a light-weight implementation of <code><a class="el" href="classbalxml_1_1Reader.html">balxml::Reader</a></code> interface. The API acts as a currentNode going forward on the document stream and stopping at each node in the way. The current node refers to the node on which the reader is positioned. The user's code keeps control of the progress and simply calls a <code>read</code> function repeatedly to progress to each node in sequence in document order. This provides a far more standard, easy to use and powerful API than the existing SAX. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>For this example, we will use <code><a class="el" href="classbalxml_1_1MiniReader.html">balxml::MiniReader</a></code> to read each node in an XML document. We do not care about whitespace, so we use the following utility function to skip over any whitespace nodes. This makes our example more portable to other implementations of the <code><a class="el" href="classbalxml_1_1Reader.html">balxml::Reader</a></code> protocol that handle whitespace differently from <code><a class="el" href="classbalxml_1_1MiniReader.html">balxml::MiniReader</a></code>. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> advancePastWhiteSpace(<a class="code" href="classbalxml_1_1Reader.html">balxml::Reader</a>&amp; reader) {
      <span class="keyword">const</span> <span class="keywordtype">char</span> *whiteSpace = <span class="stringliteral">&quot;\n\r\t &quot;</span>;
      <span class="keyword">const</span> <span class="keywordtype">char</span> *value = <span class="charliteral">&#39;\0&#39;</span>;
      <span class="keywordtype">int</span>         type = 0;
      <span class="keywordtype">int</span>         rc = 0;

      <span class="keywordflow">do</span> {
          rc    = reader.<a class="code" href="classbalxml_1_1Reader.html#a277ab8dd9f06507b115b96e39002faf7">advanceToNextNode</a>();
          value = reader.<a class="code" href="classbalxml_1_1Reader.html#af446508cd5cc4caf9202c20297802a9d">nodeValue</a>();
          type  = reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>();
      } <span class="keywordflow">while</span>(0 == rc &amp;&amp;
              type == balxml::Reader::BAEXML_NODE_TYPE_WHITESPACE ||
              (type == balxml::Reader::BAEXML_NODE_TYPE_TEXT &amp;&amp;
               bsl::strlen(value) == bsl::strspn(value, whiteSpace)));

      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() !=
                                balxml::Reader::BAEXML_NODE_TYPE_WHITESPACE);

      <span class="keywordflow">return</span> rc;
  }
</pre></div><br/>
<br/>
 The main program parses an XML string using the TestReader <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> main()
  {
</pre></div><br/>
<br/>
 The following string describes xml for a very simple user directory. The top level element contains one xml namespace attribute, with one embedded entry describing a user. <br/>
<br/>
<div class="fragment"><pre class="fragment">      <span class="keyword">const</span> <span class="keywordtype">char</span> TEST_XML_STRING[] =
         <span class="stringliteral">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\n&quot;</span>
         <span class="stringliteral">&quot;&lt;directory-entry xmlns:dir=&quot;</span>
                                <span class="stringliteral">&quot;&#39;http://bloomberg.com/schemas/directory&#39;&gt;\n&quot;</span>
         <span class="stringliteral">&quot;    &lt;name&gt;John Smith&lt;/name&gt;\n&quot;</span>
         <span class="stringliteral">&quot;    &lt;phone dir:phonetype=&#39;cell&#39;&gt;212-318-2000&lt;/phone&gt;\n&quot;</span>
         <span class="stringliteral">&quot;    &lt;address/&gt;\n&quot;</span>
         <span class="stringliteral">&quot;&lt;/directory-entry&gt;\n&quot;</span>;
</pre></div><br/>
<br/>
 In order to read the XML, we first need to construct a <code><a class="el" href="classbalxml_1_1NamespaceRegistry.html">balxml::NamespaceRegistry</a></code> object, a <code><a class="el" href="classbalxml_1_1PrefixStack.html">balxml::PrefixStack</a></code> object, and a <code>TestReader</code> object, where <code>TestReader</code> is a derived implementation of <code>balxml_reader</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment">      <a class="code" href="classbalxml_1_1NamespaceRegistry.html">balxml::NamespaceRegistry</a> namespaces;
      <a class="code" href="classbalxml_1_1PrefixStack.html">balxml::PrefixStack</a> prefixStack(&amp;namespaces);
      <a class="code" href="classbalxml_1_1MiniReader.html">balxml::MiniReader</a> miniReader; <a class="code" href="classbalxml_1_1Reader.html">balxml::Reader</a>&amp; reader = miniReader;

      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a4ed721a98ef8a61c2f2a85bd21c246b8">isOpen</a>());
</pre></div><br/>
<br/>
 The reader uses a <code><a class="el" href="classbalxml_1_1PrefixStack.html">balxml::PrefixStack</a></code> to manage namespace prefixes so we need to set it before we call open. <br/>
<br/>
<div class="fragment"><pre class="fragment">      reader.<a class="code" href="classbalxml_1_1Reader.html#a17099694cfbee74686c799fc3a68883b">setPrefixStack</a>(&amp;prefixStack);
      assert(reader.<a class="code" href="classbalxml_1_1Reader.html#af0e9dbf0604ca07e58cd5357f9e8fe23">prefixStack</a>());
      assert(reader.<a class="code" href="classbalxml_1_1Reader.html#af0e9dbf0604ca07e58cd5357f9e8fe23">prefixStack</a>() == &amp;prefixStack);
</pre></div><br/>
<br/>
 Now we call the <code>open</code> method to setup the reader for parsing using the data contained in the in the XML string. <br/>
<br/>
<div class="fragment"><pre class="fragment">      reader.<a class="code" href="classbalxml_1_1Reader.html#a4e2febd7c2f865970e5abad75a71fdf4">open</a>(TEST_XML_STRING, <span class="keyword">sizeof</span>(TEST_XML_STRING) -1, 0, <span class="stringliteral">&quot;UTF-8&quot;</span>);
</pre></div><br/>
<br/>
 Confirm that the <code>bdem::Reader</code> has opened properly <br/>
<br/>
<div class="fragment"><pre class="fragment">      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4ed721a98ef8a61c2f2a85bd21c246b8">isOpen</a>());
      assert(!bsl::strncmp(reader.<a class="code" href="classbalxml_1_1Reader.html#a1d9d3e5ede19671b54d2c12257a19cef">documentEncoding</a>(), <span class="stringliteral">&quot;UTF-8&quot;</span>, 5));
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() == balxml::Reader::BAEXML_NODE_TYPE_NONE);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>());
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#af446508cd5cc4caf9202c20297802a9d">nodeValue</a>());
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>());
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>());
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());
</pre></div><br/>
<br/>
 Advance through all the nodes and assert all information contained at each node is correct. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Assert the next node's document type is xml. <br/>
<br/>
<div class="fragment"><pre class="fragment">      <span class="keywordtype">int</span> rc = advancePastWhiteSpace(reader);
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() ==
                           balxml::Reader::BAEXML_NODE_TYPE_XML_DECLARATION);
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>(), <span class="stringliteral">&quot;xml&quot;</span>));
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#af446508cd5cc4caf9202c20297802a9d">nodeValue</a>(),
                          <span class="stringliteral">&quot;version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;&quot;</span>));
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 1);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>());
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 1);
</pre></div><br/>
<br/>
 Advance to the top level element, which has one attribute, the xml namespace. Assert the namespace information has been added correctly to the prefix stack. <br/>
<br/>
<div class="fragment"><pre class="fragment">      rc = advancePastWhiteSpace(reader);
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() == balxml::Reader::BAEXML_NODE_TYPE_ELEMENT);
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>(), <span class="stringliteral">&quot;directory-entry&quot;</span>));
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 1);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 1);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());

      assert(!bsl::strcmp(prefixStack.<a class="code" href="classbalxml_1_1PrefixStack.html#a0cbbb2ba20821869d5b5002cb98f75ac">lookupNamespacePrefix</a>(<span class="stringliteral">&quot;dir&quot;</span>), <span class="stringliteral">&quot;dir&quot;</span>));
      assert(prefixStack.<a class="code" href="classbalxml_1_1PrefixStack.html#ab3713c8133907f203e0fa8a0da8f3a6a">lookupNamespaceId</a>(<span class="stringliteral">&quot;dir&quot;</span>) == 0);
      assert(!bsl::strcmp(prefixStack.<a class="code" href="classbalxml_1_1PrefixStack.html#a9929c51e8e86a779290dc0474d4f5df3">lookupNamespaceUri</a>(<span class="stringliteral">&quot;dir&quot;</span>),
                          <span class="stringliteral">&quot;http://bloomberg.com/schemas/directory&quot;</span>));
</pre></div><br/>
<br/>
 The XML being read contains one entry describing a user, advance the users name name and assert all information can be read correctly. <br/>
<br/>
<div class="fragment"><pre class="fragment">      rc = advancePastWhiteSpace(reader);
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() == balxml::Reader::BAEXML_NODE_TYPE_ELEMENT);
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>(), <span class="stringliteral">&quot;name&quot;</span>));
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 2);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 0);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());

      rc = reader.<a class="code" href="classbalxml_1_1Reader.html#a277ab8dd9f06507b115b96e39002faf7">advanceToNextNode</a>();
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() == balxml::Reader::BAEXML_NODE_TYPE_TEXT);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#af446508cd5cc4caf9202c20297802a9d">nodeValue</a>(), <span class="stringliteral">&quot;John Smith&quot;</span>));
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 3);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 0);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());

      rc = reader.<a class="code" href="classbalxml_1_1Reader.html#a277ab8dd9f06507b115b96e39002faf7">advanceToNextNode</a>();
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() ==
                               balxml::Reader::BAEXML_NODE_TYPE_END_ELEMENT);
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>(), <span class="stringliteral">&quot;name&quot;</span>));
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 2);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 0);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());
</pre></div><br/>
<br/>
 Advance to the user's phone number and assert all information can be read correctly. <br/>
<br/>
<div class="fragment"><pre class="fragment">      rc = advancePastWhiteSpace(reader);
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() == balxml::Reader::BAEXML_NODE_TYPE_ELEMENT);
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>(), <span class="stringliteral">&quot;phone&quot;</span>));
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 2);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 1);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());
</pre></div><br/>
<br/>
 The phone node has one attribute, look it up and assert the <code><a class="el" href="classbalxml_1_1ElementAttribute.html">balxml::ElementAttribute</a></code> contains valid information and that the prefix returns the correct namespace URI from the prefix stack. <br/>
<br/>
<div class="fragment"><pre class="fragment">      <a class="code" href="classbalxml_1_1ElementAttribute.html">balxml::ElementAttribute</a> elemAttr;

      rc = reader.<a class="code" href="classbalxml_1_1Reader.html#a95fec9fda7e752a1b44d0ef90673c5a7">lookupAttribute</a>(&amp;elemAttr, 0);
      assert( 0 == rc);
      assert(!elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#aa7be6b69671c13707e45515603238fd9">isNull</a>());
      assert(!bsl::strcmp(elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#a6ba94b2462b6709c9e09473cdbc99fa9">qualifiedName</a>(), <span class="stringliteral">&quot;dir:phonetype&quot;</span>));
      assert(!bsl::strcmp(elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#a14a4ad60fc20edc194d6d92dcf9c7821">value</a>(), <span class="stringliteral">&quot;cell&quot;</span>));
      assert(!bsl::strcmp(elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#ad8ebc9d957c366c35ac78637b630aaed">prefix</a>(), <span class="stringliteral">&quot;dir&quot;</span>));
      assert(!bsl::strcmp(elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#a04681af543a284e9950a4b2765a85152">localName</a>(), <span class="stringliteral">&quot;phonetype&quot;</span>));
      assert(!bsl::strcmp(elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#ac8032a23357b1cd17f32c4ddf1594465">namespaceUri</a>(),
                          <span class="stringliteral">&quot;http://bloomberg.com/schemas/directory&quot;</span>));
      assert( elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#ab3bda7050c617e24c68c0d6ec83df729">namespaceId</a>() == 0);

      assert(!bsl::strcmp(prefixStack.<a class="code" href="classbalxml_1_1PrefixStack.html#a9929c51e8e86a779290dc0474d4f5df3">lookupNamespaceUri</a>(elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#ad8ebc9d957c366c35ac78637b630aaed">prefix</a>()),
                          elemAttr.<a class="code" href="classbalxml_1_1ElementAttribute.html#ac8032a23357b1cd17f32c4ddf1594465">namespaceUri</a>()));

      rc = advancePastWhiteSpace(reader);
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() == balxml::Reader::BAEXML_NODE_TYPE_TEXT);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#af446508cd5cc4caf9202c20297802a9d">nodeValue</a>(), <span class="stringliteral">&quot;212-318-2000&quot;</span>));
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 3);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 0);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());

      rc = advancePastWhiteSpace(reader);
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() ==
                               balxml::Reader::BAEXML_NODE_TYPE_END_ELEMENT);
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>(), <span class="stringliteral">&quot;phone&quot;</span>));
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 2);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 0);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());
</pre></div><br/>
<br/>
 Advance to the user's address and assert all information can be read correctly. <br/>
<br/>
<div class="fragment"><pre class="fragment">      rc = advancePastWhiteSpace(reader);
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() == balxml::Reader::BAEXML_NODE_TYPE_ELEMENT);
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>(), <span class="stringliteral">&quot;address&quot;</span>));
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 2);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 0);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());
</pre></div><br/>
<br/>
 Advance to the end element. <br/>
<br/>
<div class="fragment"><pre class="fragment">      rc = advancePastWhiteSpace(reader);
      assert( 0 == rc);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a4b4d7656699f1c66fc052e753f2a19dc">nodeType</a>() ==
                               balxml::Reader::BAEXML_NODE_TYPE_END_ELEMENT);
      assert(!bsl::strcmp(reader.<a class="code" href="classbalxml_1_1Reader.html#ae3854574e8ca51c846da858bc089e4a6">nodeName</a>(), <span class="stringliteral">&quot;directory-entry&quot;</span>));
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#abbe9b9bba50315cda46bf5da6139a8ac">nodeHasValue</a>());
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#a60ad6509d81b74dc24809796fed720fb">nodeDepth</a>() == 1);
      assert( reader.<a class="code" href="classbalxml_1_1Reader.html#afd4b002d0859bc45b28e8a140640ba65">numAttributes</a>() == 0);
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a09187382bd2b82e46743de5fc6670ffc">isEmptyElement</a>());
</pre></div><br/>
<br/>
 Close the reader. <br/>
<br/>
<div class="fragment"><pre class="fragment">      reader.<a class="code" href="classbalxml_1_1Reader.html#a09e572709808938f96034cf10d20ec41">close</a>();
      assert(!reader.<a class="code" href="classbalxml_1_1Reader.html#a4ed721a98ef8a61c2f2a85bd21c246b8">isOpen</a>());

      <span class="keywordflow">return</span> 0;
  }
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:32 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
