<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: ball_log Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component ball_log<br/>
<small>
[<a class="el" href="group__ball.html">Package ball</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide macros and utility functions to facilitate logging.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebslmt.html">bslmt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceball.html">ball</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Thread Safety</a> </li>
<li>
<a href="#3.2">Macro Reference</a> </li>
<li>
<a href="#3.3">Usage</a> <ul>
<li>
<a href="#3.3.1">Example 1: A Basic Logging Example</a> </li>
<li>
<a href="#3.3.2">Example 2: Setting the Current Log Category</a> </li>
<li>
<a href="#3.3.3">Example 3: <code>printf</code>-Style Versus C++ I/O Streams-Style Logging Macros</a> </li>
<li>
<a href="#3.3.4">Example 4: Dynamic Categories</a> </li>
<li>
<a href="#3.3.5">Example 5: Rule-Based Logging</a> </li>
<li>
<a href="#3.3.6">Example 6: Logging Using a Callback</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide macros and utility functions to facilitate logging. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="structball_1_1Log.html">ball::Log</a> </td><td>namespace for a suite of logging utilities  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ball__loggermanager.html" title="Provide a manager of core logging functionality.">Component ball_loggermanager</a>, <a class="el" href="group__ball__categorymanager.html" title="Provide a manager of named categories each having &quot;thresholds&quot;.">Component ball_categorymanager</a>, <a class="el" href="group__ball__severity.html" title="Enumerate a set of logging severity levels.">Component ball_severity</a>, <a class="el" href="group__ball__record.html" title="Provide a container for all fields of a log record.">Component ball_record</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides pre-processor macros and utility functions to facilitate use of the <code>ball_loggermanager</code> component. In particular, the macros defined herein greatly simplify the mechanics of generating log records. The utility functions are only intended for use by the macros and should <em>not</em> be called directly. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="thread_safety"></a> <a class="anchor" id="description.thread_safety"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Thread Safety: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>All macros defined in this component are thread-safe, and can be invoked concurrently by multiple threads. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="macro_reference"></a> <a class="anchor" id="description.macro_reference"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Macro Reference: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section documents the pre-processor macros defined in this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following two macros establish the logging context required by the other macros. A use of one of these two macros must be visible from within the lexical scope where the C++ stream-based and <code>printf</code>-style macros are used: </dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> </div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code><a class="el" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY(CATEGORY)</a></code>: <br/>
 Set the category for logging to the specified <code>CATEGORY</code> (assumed to be of type convertible to <code>const char *</code>). On the <em>first</em> invocation of this macro in a code block, the <code><a class="el" href="structball_1_1Log.html#a04cca444ce33147d8df9438fdc306751">ball::Log::setCategory</a></code> method is invoked to retrieve the address of an appropriate category structure for its scope; subsequent invocations will use a cached address of the category. (See the function-level documentation of <code><a class="el" href="structball_1_1Log.html#a04cca444ce33147d8df9438fdc306751">ball::Log::setCategory</a></code> for more information.) Note that this macro must be used at block scope, and can be used at most once in any given block (or else a compiler diagnostic will result).</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code><a class="el" href="ball__log_8h.html#aa8f0c9a2bdc597e5450617732f627914">BALL_LOG_SET_DYNAMIC_CATEGORY(CATEGORY)</a></code>: <br/>
 Set, <em>on EACH invocation</em>, the category for logging to the specified <code>CATEGORY</code> (assumed to be of type convertible to <code>const char *</code>). On <em>EVERY</em> invocation of this macro in a code block, the <code><a class="el" href="structball_1_1Log.html#a04cca444ce33147d8df9438fdc306751">ball::Log::setCategory</a></code> method is invoked to retrieve the address of an appropriate category structure for its scope; the address returned from <code><a class="el" href="structball_1_1Log.html#a04cca444ce33147d8df9438fdc306751">ball::Log::setCategory</a></code> is <em>NOT</em> cached for subsequent calls. (See the function-level documentation of <code><a class="el" href="structball_1_1Log.html#a04cca444ce33147d8df9438fdc306751">ball::Log::setCategory</a></code> for more information.) Note that this macro should be used to create categories that depend on <em>RUN-TIME</em> values only (e.g., LUW or UUID). Also note that this macro must be used at block scope and can be used at most once in any given block (or else a compiler diagnostic will result).</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> </div> </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Note that there can be at most one use of either <code>BALL_LOG_SET_CATEGORY</code> or <code>BALL_LOG_SET_DYNAMIC_CATEGORY</code> in any given block (or else a compiler diagnostic will result). Also note that categories that are set, including dynamic categories, are not destroyed until process termination. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The seven macros based on C++ streams that are most commonly used, <code>BALL_LOG_TRACE</code>, <code>BALL_LOG_DEBUG</code>, <code>BALL_LOG_INFO</code>, <code>BALL_LOG_WARN</code>, <code>BALL_LOG_ERROR</code>, <code>BALL_LOG_FATAL</code>, and <code>BALL_LOG_END</code>, have the following usage pattern: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="ball__log_8h.html#ad74b51d061e9016e9c009e70dc648236">BALL_LOG_TRACE</a> &lt;&lt; X &lt;&lt; Y ... &lt;&lt; BALL_LOG_END
  <a class="code" href="ball__log_8h.html#a2808fe2e962aa479ecdd8818f8b13237">BALL_LOG_DEBUG</a> &lt;&lt; X &lt;&lt; Y ... &lt;&lt; BALL_LOG_END
  <a class="code" href="ball__log_8h.html#afb01a02161fb347192abed4c64963654">BALL_LOG_INFO</a>  &lt;&lt; X &lt;&lt; Y ... &lt;&lt; BALL_LOG_END
  <a class="code" href="ball__log_8h.html#ad3eb77562ad19824218d12dad1d7ca61">BALL_LOG_WARN</a>  &lt;&lt; X &lt;&lt; Y ... &lt;&lt; BALL_LOG_END
  <a class="code" href="ball__log_8h.html#a61668cbeeb06f9c543b230fe5f4bbcf7">BALL_LOG_ERROR</a> &lt;&lt; X &lt;&lt; Y ... &lt;&lt; BALL_LOG_END
  <a class="code" href="ball__log_8h.html#a35b07e6aa514c75f655bb92bf4abea2c">BALL_LOG_FATAL</a> &lt;&lt; X &lt;&lt; Y ... &lt;&lt; BALL_LOG_END
      where X, Y, ... represents any sequence of values <span class="keywordflow">for</span> which
      <span class="stringliteral">&#39;operator&lt;&lt;&#39;</span> is defined.  The resulting formatted message <span class="keywordtype">string</span> is
      logged with the severity indicated by the name of the initial macro
      (e.g., <span class="stringliteral">&#39;BALL_LOG_TRACE&#39;</span> ... <span class="stringliteral">&#39;BALL_LOG_END&#39;</span> logs with severity
      <span class="stringliteral">&#39;ball::Severity::e_TRACE&#39;</span>).  Note that the formatted <span class="keywordtype">string</span> includes
      the category and filename as established by the
      <span class="stringliteral">&#39;BALL_LOG_SET_CATEGORY&#39;</span> (or <span class="stringliteral">&#39;BALL_LOG_SET_DYNAMIC_CATEGORY&#39;</span>) and
      <span class="stringliteral">&#39;__FILE__&#39;</span> macros, respectively.
</pre></div><br/>
<br/>
 Two closely-related macros that are also based on C++ streams, <code>BALL_LOG_STREAM</code> and <code>BALL_LOG_STREAM_UNLIKELY</code>, require that the severity be explicitly indicated. They have the following usage pattern: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="ball__log_8h.html#ae6efd01864105b243469aa537d9c1173">BALL_LOG_STREAM</a>(severity)          &lt;&lt; X &lt;&lt; Y ... &lt;&lt; BALL_LOG_END
  <a class="code" href="ball__log_8h.html#aeab796b808f1901a36bf99461225a7fc">BALL_LOG_STREAM_UNLIKELY</a>(severity) &lt;&lt; X &lt;&lt; Y ... &lt;&lt; BALL_LOG_END
      where X, Y, ... represents any sequence of values <span class="keywordflow">for</span> which
      <span class="stringliteral">&#39;operator&lt;&lt;&#39;</span> is defined.  The resulting formatted message <span class="keywordtype">string</span> is
      logged with the specified <span class="stringliteral">&#39;severity&#39;</span>.  <span class="stringliteral">&#39;BALL_LOG_STREAM_UNLIKELY&#39;</span>
      differs from <span class="stringliteral">&#39;BALL_LOG_STREAM&#39;</span> in that the former provides a hint to
      the compiler that it is <span class="stringliteral">&quot;unlikely&quot;</span> to be executed; it is intended <span class="keywordflow">for</span>
      special-purpose use only.  Note that <span class="stringliteral">&#39;BALL_LOG_TRACE&#39;</span>, <span class="keywordflow">for</span> example, is
      equivalent to <span class="stringliteral">&#39;BALL_LOG_STREAM(ball::Severity::e_TRACE)&#39;</span>.  Also note
      that the formatted <span class="keywordtype">string</span> includes the category and filename as
      established by the <span class="stringliteral">&#39;BALL_LOG_SET_CATEGORY&#39;</span> (or
      <span class="stringliteral">&#39;BALL_LOG_SET_DYNAMIC_CATEGORY&#39;</span>) and <span class="stringliteral">&#39;__FILE__&#39;</span> macros, respectively.
</pre></div><br/>
<br/>
 Seven other macros based on C++ streams, similar to <code>BALL_LOG_TRACE</code>, etc., allow the caller to specify a "callback" function which is passed the <code><a class="el" href="classball_1_1UserFields.html">ball::UserFields</a> *</code> used to represent the user fields of a log record. The callback is expected to populate these user fields according to the schema specified in the logger manager configuration. <code>BALL_LOGCB_TRACE</code>, <code>BALL_LOGCB_DEBUG</code>, <code>BALL_LOGCB_INFO</code>, <code>BALL_LOGCB_WARN</code>, <code>BALL_LOGCB_ERROR</code>, <code>BALL_LOGCB_FATAL</code>, and <code>BALL_LOGCB_END</code>, have the following usage pattern: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="ball__log_8h.html#afdcbdb12c21d59f4d690d7ffb1330f2d">BALL_LOGCB_TRACE</a>(CB) &lt;&lt; X &lt;&lt; Y ... &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
  <a class="code" href="ball__log_8h.html#aac39365cb70ec6a981445297819a183f">BALL_LOGCB_DEBUG</a>(CB) &lt;&lt; X &lt;&lt; Y ... &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
  <a class="code" href="ball__log_8h.html#af6eb5e8d4d823df1c976ed157aaf24b2">BALL_LOGCB_INFO</a>(CB)  &lt;&lt; X &lt;&lt; Y ... &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
  <a class="code" href="ball__log_8h.html#a903f7aa394256ff1e895b45d37a09d1b">BALL_LOGCB_WARN</a>(CB)  &lt;&lt; X &lt;&lt; Y ... &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
  <a class="code" href="ball__log_8h.html#afab252522d2fe3a380e268609ab347fd">BALL_LOGCB_ERROR</a>(CB) &lt;&lt; X &lt;&lt; Y ... &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
  <a class="code" href="ball__log_8h.html#a5e40e4225d634ef309ad4839bff62242">BALL_LOGCB_FATAL</a>(CB) &lt;&lt; X &lt;&lt; Y ... &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
      where X, Y, ... represents any sequence of values <span class="keywordflow">for</span> which
      <span class="stringliteral">&#39;operator&lt;&lt;&#39;</span> is defined and <span class="stringliteral">&#39;CB&#39;</span> is a callback taking a
      <span class="stringliteral">&#39;ball::UserFields *&#39;</span> as an argument.  The resulting formatted message
      <span class="keywordtype">string</span> is logged with the severity indicated by the name of the
      initial macro (e.g., <span class="stringliteral">&#39;BALL_LOGCB_ERROR&#39;</span> ... <span class="stringliteral">&#39;BALL_LOGCB_END&#39;</span> logs with
      severity <span class="stringliteral">&#39;ball::Severity::e_ERROR&#39;</span>).  The log record will contain the
      <span class="stringliteral">&#39;ball::UserFields&#39;</span> representing user fields as populated by <span class="stringliteral">&#39;CB&#39;</span>.
      Note that the formatted <span class="keywordtype">string</span> includes the category and filename as
      established by the <span class="stringliteral">&#39;BALL_LOG_SET_CATEGORY&#39;</span> (or
      <span class="stringliteral">&#39;BALL_LOG_SET_DYNAMIC_CATEGORY&#39;</span>) and <span class="stringliteral">&#39;__FILE__&#39;</span> macros, respectively.
      Note the callback supplied to the logging macro must match the
      prototype <span class="stringliteral">&#39;void (*)(ball::UserFields *)&#39;</span>.
</pre></div><br/>
<br/>
 The remaining macros are based on <code>printf</code>-style format specifications: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="ball__log_8h.html#a7d8467592ea7e39cf5709300b133d705">BALL_LOG0_TRACE</a>(MSG);
  <a class="code" href="ball__log_8h.html#a1ee53d54bb234faf8107008768b9423d">BALL_LOG0_DEBUG</a>(MSG);
  <a class="code" href="ball__log_8h.html#a89693f06643a36de41a6626ef24d4659">BALL_LOG0_INFO</a> (MSG);
  <a class="code" href="ball__log_8h.html#a9099267d4d503753f5db9c9092acaf22">BALL_LOG0_WARN</a> (MSG);
  <a class="code" href="ball__log_8h.html#a479e1a76bcc97c13ba14602f97fe1618">BALL_LOG0_ERROR</a>(MSG);
  <a class="code" href="ball__log_8h.html#a11fec6b570197450127c3266a26101d3">BALL_LOG0_FATAL</a>(MSG);
      Log the specified <span class="stringliteral">&#39;MSG&#39;</span> (assumed to be of type convertible to
      <span class="stringliteral">&#39;const char *&#39;</span>) with the severity indicated by the name of the macro
      (e.g., <span class="stringliteral">&#39;BALL_LOG0_DEBUG&#39;</span> logs with severity
      <span class="stringliteral">&#39;ball::Severity::e_DEBUG&#39;</span>).  Note that the formatted message <span class="keywordtype">string</span>
      includes the category and filename as established by the
      <span class="stringliteral">&#39;BALL_LOG_SET_CATEGORY&#39;</span> (or <span class="stringliteral">&#39;BALL_LOG_SET_DYNAMIC_CATEGORY&#39;</span>) and
      <span class="stringliteral">&#39;__FILE__&#39;</span> macros, respectively.  Also note that each use of these
      macros must be terminated by a <span class="charliteral">&#39;;&#39;</span>.

  <a class="code" href="ball__log_8h.html#a0f18092c248c8b60c8e3eebf14860c62">BALL_LOG1_TRACE</a>(MSG, ARG1);
  <a class="code" href="ball__log_8h.html#a0aec189dd5fdd58ae2257f6fac3ce8bb">BALL_LOG1_DEBUG</a>(MSG, ARG1);
  <a class="code" href="ball__log_8h.html#a730d43ca47fbf74c8d1408cf7ce59e99">BALL_LOG1_INFO</a> (MSG, ARG1);
  <a class="code" href="ball__log_8h.html#a624d67ffd6c1769561addc7a89317c10">BALL_LOG1_WARN</a> (MSG, ARG1);
  <a class="code" href="ball__log_8h.html#af8e65e5f29d4dfbe89459ea933f6a07f">BALL_LOG1_ERROR</a>(MSG, ARG1);
  <a class="code" href="ball__log_8h.html#a9896522de031f35757cfc703a9866461">BALL_LOG1_FATAL</a>(MSG, ARG1);
      Format the specified <span class="stringliteral">&#39;ARG1&#39;</span> according to the <span class="stringliteral">&#39;printf&#39;</span>-style format
      specification in the specified <span class="stringliteral">&#39;MSG&#39;</span> (assumed to be of type convertible
      to <span class="stringliteral">&#39;const char *&#39;</span>) and log the resulting formatted message <span class="keywordtype">string</span> with
      the severity indicated by the name of the macro (e.g., <span class="stringliteral">&#39;BALL_LOG1_WARN&#39;</span>
      logs with severity <span class="stringliteral">&#39;ball::Severity::e_WARN&#39;</span>).  The behavior is
      undefined unless <span class="stringliteral">&#39;ARG1&#39;</span> is compatible with its corresponding format
      specification in <span class="stringliteral">&#39;MSG&#39;</span>.  Note that the formatted <span class="keywordtype">string</span> includes the
      category and filename as established by the <span class="stringliteral">&#39;BALL_LOG_SET_CATEGORY&#39;</span> (or
      <span class="stringliteral">&#39;BALL_LOG_SET_DYNAMIC_CATEGORY&#39;</span>) and <span class="stringliteral">&#39;__FILE__&#39;</span> macros, respectively.
      Also note that each use of these macros must be terminated by a <span class="charliteral">&#39;;&#39;</span>.

  BALL_LOGn_TRACE(MSG, ARG1, ARG2, ..., ARGn);  <span class="comment">// 2 &lt;= n &lt;= 9</span>
  BALL_LOGn_DEBUG(MSG, ARG1, ARG2, ..., ARGn);
  BALL_LOGn_INFO (MSG, ARG1, ARG2, ..., ARGn);
  BALL_LOGn_WARN (MSG, ARG1, ARG2, ..., ARGn);
  BALL_LOGn_ERROR(MSG, ARG1, ARG2, ..., ARGn);
  BALL_LOGn_FATAL(MSG, ARG1, ARG2, ..., ARGn);
      Format the specified <span class="stringliteral">&#39;ARG1&#39;</span>, <span class="stringliteral">&#39;ARG2&#39;</span>, ..., <span class="stringliteral">&#39;ARGn&#39;</span> (2 &lt;= n &lt;= 9)
      according to the <span class="stringliteral">&#39;printf&#39;</span>-style format specification in the specified
      <span class="stringliteral">&#39;MSG&#39;</span> (assumed to be of type convertible to <span class="stringliteral">&#39;const char *&#39;</span>) and log the
      resulting formatted message <span class="keywordtype">string</span> with the severity indicated by the
      name of the macro (e.g., <span class="stringliteral">&#39;BALL_LOG8_FATAL&#39;</span> logs with severity
      <span class="stringliteral">&#39;ball::Severity::e_FATAL&#39;</span>).  The behavior is undefined unless each
      <span class="stringliteral">&#39;ARGn&#39;</span> is compatible with its corresponding format specification in
      <span class="stringliteral">&#39;MSG&#39;</span>.  Note that the formatted <span class="keywordtype">string</span> includes the category and
      filename as established by the <span class="stringliteral">&#39;BALL_LOG_SET_CATEGORY&#39;</span> (or
      <span class="stringliteral">&#39;BALL_LOG_SET_DYNAMIC_CATEGORY&#39;</span>) and <span class="stringliteral">&#39;__FILE__&#39;</span> macros, respectively.
      Also note that each use of these macros must be terminated by a <span class="charliteral">&#39;;&#39;</span>.

  <a class="code" href="ball__log_8h.html#aef21a6382cf327b70c30b44b502942f0">BALL_LOG_IS_ENABLED</a>(BALL_SEVERITY)
      Return <span class="stringliteral">&#39;true&#39;</span> <span class="keywordflow">if</span> the specified <span class="stringliteral">&#39;BALL_SEVERITY&#39;</span> is more severe than any
      of the threshold levels of the current context<span class="stringliteral">&#39;s logging category</span>
<span class="stringliteral">      (which must be established using &#39;</span><a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a><span class="stringliteral">&#39;), and &#39;</span><span class="keyword">false</span><span class="stringliteral">&#39;</span>
<span class="stringliteral">      otherwise.</span>
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.3"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following code fragments illustrate the standard pattern of macro usage. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_a_basic_logging_example"></a> <a class="anchor" id="usage.example_1~3A_a_basic_logging_example"></a> <a class="anchor" id="description.usage.example_1~3A_a_basic_logging_example"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.3.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: A Basic Logging Example: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following trivial example shows how to use the logging macros to log messages at various levels of severity. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">void</span> exampleFunction()
  {
</pre></div><br/>
<br/>
 We start by initializing the log category within the context of this function. The logging macros such as <code>BALL_LOG_ERROR</code> will not compile unless a category has been specified in the current lexical scope. <br/>
<br/>
<div class="fragment"><pre class="fragment">      <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EXAMPLE.CATEGORY&quot;</span>);
</pre></div><br/>
<br/>
 Now we record messages at various levels of severity. These messages will (or will not) be written to the log depending on the current logging threshold of the category (configured using the <code><a class="el" href="classball_1_1LoggerManager.html">ball::LoggerManager</a></code> singleton). <br/>
<br/>
<div class="fragment"><pre class="fragment">      <a class="code" href="ball__log_8h.html#a35b07e6aa514c75f655bb92bf4abea2c">BALL_LOG_FATAL</a> &lt;&lt; <span class="stringliteral">&quot;Write this message to the log if the log threshold &quot;</span>
                     &lt;&lt; <span class="stringliteral">&quot;is above &#39;ball::Severity::FATAL&#39; (i.e., 32).&quot;</span>
                     &lt;&lt; BALL_LOG_END;

      <a class="code" href="ball__log_8h.html#ad74b51d061e9016e9c009e70dc648236">BALL_LOG_TRACE</a> &lt;&lt; <span class="stringliteral">&quot;Write this message to the log if the log threshold &quot;</span>
                     &lt;&lt; <span class="stringliteral">&quot;is above &#39;ball::Severity::FATAL&#39; (i.e., 192).&quot;</span>
                     &lt;&lt; BALL_LOG_END;
  }
</pre></div><br/>
<br/>
 Note that failing to match the start of a logged message with an appropriate <code>BALL_LOG_END</code> will result in a compilation error. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_2~3A_setting_the_current_log_category"></a> <a class="anchor" id="usage.example_2~3A_setting_the_current_log_category"></a> <a class="anchor" id="description.usage.example_2~3A_setting_the_current_log_category"></a> <a class="anchor" id="example_2"></a> <a class="anchor" id="usage.example_2"></a> <a class="anchor" id="description.usage.example_2"></a> <a class="anchor" id="3.3.2"></a> </dd></dl>
<dl class="user"><dt><b>Example 2: Setting the Current Log Category: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This example provides more detail on setting the log category in the current lexical scope. The following macro instantiation sets the category for logging to be "EQUITY.NASD" in the enclosing lexical scope: <br/>
<br/>
<div class="fragment"><pre class="fragment">      <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EQUITY.NASD&quot;</span>)
</pre></div><br/>
<br/>
 Note that this macro must not be used at file scope and it can be used at most once in any given block (or else a compiler diagnostic will result). A different category may be established to override one that is in effect, but it must occur in a nested scope. In any case, a use of this macro (or of <code>BALL_LOG_SET_DYNAMIC_CATEGORY</code>) must be visible from within the lexical scope of every use of the log-generating macros. The following fragment of code shows how to set a different category in a nested inner block that hides a category set in an enclosing block: <br/>
<br/>
<div class="fragment"><pre class="fragment">      <span class="keywordtype">void</span> logIt()
      {
          <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EQUITY.NASD&quot;</span>)

          <span class="comment">// Logging to category &quot;EQUITY.NASD&quot; unless overridden in a</span>
          <span class="comment">// nested block.</span>
          <span class="comment">// [*] ...</span>

          {
              <span class="comment">// [*] ...</span>
              <span class="comment">// Still logging to category &quot;EQUITY.NASD&quot;.</span>

              <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EQUITY.NASD.SUNW&quot;</span>)

              <span class="comment">// Now logging to category &quot;EQUITY.NASD.SUNW&quot;.</span>
              <span class="comment">// [*] ...</span>
          }
          <span class="comment">// Again logging to category &quot;EQUITY.NASD&quot;.</span>
          <span class="comment">// [*] ...</span>
      }
</pre></div><br/>
<br/>
 Within <code>logIt</code>, the required logging context is in place at each of the locations marked by [*]. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_3~3A_printf-style_versus_c++_i~2Fo_streams-style_logging_macros"></a> <a class="anchor" id="usage.example_3~3A_printf-style_versus_c++_i~2Fo_streams-style_logging_macros"></a> <a class="anchor" id="description.usage.example_3~3A_printf-style_versus_c++_i~2Fo_streams-style_logging_macros"></a> <a class="anchor" id="example_3"></a> <a class="anchor" id="usage.example_3"></a> <a class="anchor" id="description.usage.example_3"></a> <a class="anchor" id="3.3.3"></a> </dd></dl>
<dl class="user"><dt><b>Example 3: printf-Style Versus C++ I/O Streams-Style Logging Macros: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>In the following example, we expand the <code>logIt</code> function (defined above) to log two messages using the logging macros provided by this component. The first logging macro we use, <code>BALL_LOG3_INFO</code> takes a format string and a series of variables, similar to <code>printf</code>. The second logging macro we use, <code>BALL_LOG_TRACE</code>, is provided input using the C++ stream operator <code>&lt;&lt;</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment">      <span class="keywordtype">void</span> logIt()
      {
          <span class="keywordtype">int</span>     lotSize = 400;
          <span class="keywordtype">char</span>   *ticker  = <span class="stringliteral">&quot;SUNW&quot;</span>;
          <span class="keywordtype">double</span>  price   = 5.65;

          <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EQUITY.NASD&quot;</span>)

          <span class="comment">// Logging to category &quot;EQUITY.NASD&quot; unless overridden in a</span>
          <span class="comment">// nested block.</span>

          <a class="code" href="ball__log_8h.html#aa8fc617fcfb5ae79b85610fb869f6bf1">BALL_LOG3_INFO</a>(&quot;%d shares of %s sold at %f\n&quot;,
                         lotSize, ticker, price);
          {
              <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EQUITY.NASD.SUNW&quot;</span>)

              <span class="comment">// Now logging to category &quot;EQUITY.NASD.SUNW&quot;.</span>

              BloombergLP::bdlt::<a class="code" href="namespacebdet.html#a7cc67ae2240c06a6a70bf001c5a858b5">Datetime</a> now;
              BloombergLP::bdlt::EpochUtil::convertFromTimeT(&amp;now, time(0));

              <a class="code" href="ball__log_8h.html#afb01a02161fb347192abed4c64963654">BALL_LOG_INFO</a> &lt;&lt; now &lt;&lt; &quot;: &quot; &lt;&lt; lotSize &lt;&lt; &quot; shares of &quot;
                            &lt;&lt; ticker &lt;&lt; &quot; sold at &quot; &lt;&lt; price
                            &lt;&lt; BALL_LOG_END
          }
          <span class="comment">// Again logging to category &quot;EQUITY.NASD&quot;.</span>
      }
</pre></div><br/>
<br/>
 The <code>BALL_LOG3_INFO</code> macro logs the following message: <br/>
<br/>
<div class="fragment"><pre class="fragment">      400 shares of SUNW sold at 5.650000
</pre></div><br/>
<br/>
 to category "EQUITY.NASD.SUNW" at severity level <code><a class="el" href="structball_1_1Severity.html#af49f66189615b9475c9cced03afde384a6f50107123b20984e60470c48531b191" title="data about the running process">ball::Severity::e_INFO</a></code>. Note that the first argument supplied to the <code>BALL_LOG3_INFO</code> macro is a <code>printf</code>-style format specification; the "3" in the macro name indicates the number of additional arguments that must be supplied to <code>BALL_LOG3_INFO</code> and which must conform to the format specification. The log record that is generated for this message will include the file name as indicated by the <code>__FILE__</code> macro and the line number of the line on which the use of <code>BALL_LOG3_INFO</code> occurs. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <code>BALL_LOG_INFO</code> macro formats a message using standard C++ streaming facilities rather than a <code>printf</code>-style format specification. The use of this macro in <code>logIt</code> logs the following message: <br/>
<br/>
<div class="fragment"><pre class="fragment">      10FEB2004_13:29:49.000: 400 shares of SUNW sold at 5.65
</pre></div><br/>
<br/>
 The current timestamp (<code>now</code>) was prepended to the message as a simple illustration of the added flexibility provided by the C++ stream-based macros. (Note that the current timestamp is automatically included as a distinct field in all log records generated by the <code>ball</code> logging system.) This latter message is logged to category "EQUITY.NASD.SUNW" at severity level <code><a class="el" href="structball_1_1Severity.html#af49f66189615b9475c9cced03afde384a408b2a730cc5f8a215d6ebe0cfb6a8fd" title="execution trace data">ball::Severity::e_TRACE</a></code>. The log record that is generated for this message will include the same file name as for <code>BALL_LOG3_INFO</code>, but will naturally have a different line number associated with it. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The C++ stream-based macros, as opposed to the <code>printf</code>-style macros, ensure at compile-time that no run-time format mismatches will occur. Use of the stream-based logging style exclusively will likely lead to clearer, more maintainable code with fewer initial defects. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Note that all uses of the log-generating macros <em>must</em> occur within function scope (i.e., not at file scope). </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_4~3A_dynamic_categories"></a> <a class="anchor" id="usage.example_4~3A_dynamic_categories"></a> <a class="anchor" id="description.usage.example_4~3A_dynamic_categories"></a> <a class="anchor" id="example_4"></a> <a class="anchor" id="usage.example_4"></a> <a class="anchor" id="description.usage.example_4"></a> <a class="anchor" id="3.3.4"></a> </dd></dl>
<dl class="user"><dt><b>Example 4: Dynamic Categories: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Logging must sometimes be controlled by parameters that are not available until run-time. The <code>BALL_LOG_SET_DYNAMIC_CATEGORY</code> macro sets a category each time it is invoked (unlike <code>BALL_LOG_SET_CATEGORY</code>, which sets a category only on the first invocation and uses the cached address of the category on subsequent invocations). The category name in the following <code>processSecurity</code> function is a combination of a static prefix and the (dynamic) <code>exchange</code> argument: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">void</span> processSecurity(<span class="keyword">const</span> <span class="keywordtype">char</span> *security, <span class="keyword">const</span> <span class="keywordtype">char</span> *exchange)
  {
      <a class="code" href="classbsl_1_1basic__string.html">bsl::string</a> categoryName(<span class="stringliteral">&quot;EXCHANGE:&quot;</span>);
      categoryName.append(exchange);

      <a class="code" href="ball__log_8h.html#aa8f0c9a2bdc597e5450617732f627914">BALL_LOG_SET_DYNAMIC_CATEGORY</a>(categoryName.c_str());

      <a class="code" href="ball__log_8h.html#ad74b51d061e9016e9c009e70dc648236">BALL_LOG_TRACE</a> &lt;&lt; <span class="stringliteral">&quot;processing: &quot;</span> &lt;&lt; security &lt;&lt; BALL_LOG_END;

      <span class="comment">// ...</span>
  }
</pre></div><br/>
<br/>
 Now logging can be controlled independently for each <code>exchange</code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd><em>WARNING</em>: Along with the added flexibility provided by dynamic categories comes the additional overhead of computing and setting a category on each invocation. Consequently, dynamic categories should be used <em>SPARINGLY</em> in most applications. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_5~3A_rule-based_logging"></a> <a class="anchor" id="usage.example_5~3A_rule-based_logging"></a> <a class="anchor" id="description.usage.example_5~3A_rule-based_logging"></a> <a class="anchor" id="example_5"></a> <a class="anchor" id="usage.example_5"></a> <a class="anchor" id="description.usage.example_5"></a> <a class="anchor" id="3.3.5"></a> </dd></dl>
<dl class="user"><dt><b>Example 5: Rule-Based Logging: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following example demonstrates the use of attributes and rules to conditionally enable logging. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>We start by defining a function, <code>processData</code>, that is passed data in a <code>vector&lt;char&gt;</code> and information about the user who sent the data. This example function performs no actual processing, but does log a single message at the <code>ball::Severity::DEBUG</code> threshold level. The <code>processData</code> function also adds the user information passed to this function to the thread's attribute context. We will use these attributes later, to create a logging rule that enables verbose logging only for a particular user. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">void</span> processData(<span class="keywordtype">int</span>                      uuid,
                   <span class="keywordtype">int</span>                      luw,
                   <span class="keywordtype">int</span>                      terminalNumber,
                   <span class="keyword">const</span> <a class="code" href="classbsl_1_1vector.html">bsl::vector&lt;char&gt;</a>&amp; data)
      <span class="comment">// Process the specified &#39;data&#39; associated with the specified bloomberg</span>
      <span class="comment">// &#39;uuid&#39;, &#39;luw&#39;, and &#39;terminalNumber&#39;.</span>
  {
</pre></div><br/>
<br/>
 We create a generic "default" attribute container to hold our attributes. Note that, in practice, we might choose to define a more efficient implementation of the <code><a class="el" href="classball_1_1AttributeContainer.html">ball::AttributeContainer</a></code> protocol specifically for these three attributes, uuid, luw, and firmNumber. See the <code>ball::attributeContainer</code> component documentation for an example. <br/>
<br/>
<div class="fragment"><pre class="fragment">      <a class="code" href="classball_1_1DefaultAttributeContainer.html">ball::DefaultAttributeContainer</a> attributes;
      attributes.<a class="code" href="classball_1_1DefaultAttributeContainer.html#a4f47b86c94dee3c274bd07b672e209d5">addAttribute</a>(<a class="code" href="classball_1_1Attribute.html">ball::Attribute</a>(<span class="stringliteral">&quot;uuid&quot;</span>, uuid));
      attributes.<a class="code" href="classball_1_1DefaultAttributeContainer.html#a4f47b86c94dee3c274bd07b672e209d5">addAttribute</a>(<a class="code" href="classball_1_1Attribute.html">ball::Attribute</a>(<span class="stringliteral">&quot;luw&quot;</span>, luw));
      attributes.<a class="code" href="classball_1_1DefaultAttributeContainer.html#a4f47b86c94dee3c274bd07b672e209d5">addAttribute</a>(<a class="code" href="classball_1_1Attribute.html">ball::Attribute</a>(<span class="stringliteral">&quot;terminalNumber&quot;</span>,
                                              terminalNumber);

      <a class="code" href="classball_1_1AttributeContext.html">ball::AttributeContext</a> *context = <a class="code" href="classball_1_1AttributeContext.html#a3a6ab0c06c1dac479522490a7874d073">ball::AttributeContext::getContext</a>();
      <a class="code" href="classball_1_1AttributeContainerListIterator.html">ball::AttributeContext::iterator</a> it =
                                         context-&gt;<a class="code" href="classball_1_1AttributeContext.html#a6afefae878f0c01053d37073206b1e70">addAttributes</a>(&amp;attributes);
</pre></div><br/>
<br/>
 In this simplified example we perform no actual processing, and simply log a message at the <code>ball::Severity::DEBUG</code> level. <br/>
<br/>
<div class="fragment"><pre class="fragment">      <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EXAMPLE.CATEGORY&quot;</span>);

      <a class="code" href="ball__log_8h.html#a2808fe2e962aa479ecdd8818f8b13237">BALL_LOG_DEBUG</a> &lt;&lt; <span class="stringliteral">&quot;An example message&quot;</span> &lt;&lt; BALL_LOG_END;
</pre></div><br/>
<br/>
 Because <code>attributes</code> is defined on this thread's stack, it must be removed from this thread's attribute context before exiting the function (the <code>ball_scopedattributes</code> component provides a proctor for this purpose). <br/>
<br/>
<div class="fragment"><pre class="fragment">      context-&gt;<a class="code" href="classball_1_1AttributeContext.html#a7f4a260d13ede1e8b98d9bcdb05cff29">removeAttributes</a>(it);
  }
</pre></div><br/>
<br/>
 Next we demonstrate how to create a logging rule that sets the pass-through logging threshold to <code>ball::Severity::TRACE</code> (i.e., enables verbose logging) for a particular user when calling the <code>processData</code> function defined above. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>We start by creating the singleton logger manager, which we configure with the default observer and a default configuration. We then call the <code>processData</code> function: This first call to <code>processData</code> will not result in any logged messages because <code>processData</code> logs its message at the <code>ball::Severity::DEBUG</code> level, which is below the default configured logging threshold. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classball_1_1DefaultObserver.html">ball::DefaultObserver</a> observer(&amp;bsl::cout);
  <a class="code" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a> configuration;
  <a class="code" href="classball_1_1LoggerManagerScopedGuard.html">ball::LoggerManagerScopedGuard</a> lmg(&amp;observer, configuration);

  <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EXAMPLE.CATEGORY&quot;</span>);

  <a class="code" href="classbsl_1_1vector.html">bsl::vector&lt;char&gt;</a> message;

  <a class="code" href="ball__log_8h.html#a61668cbeeb06f9c543b230fe5f4bbcf7">BALL_LOG_ERROR</a> &lt;&lt; <span class="stringliteral">&quot;Processing the first message.&quot;</span> &lt;&lt; BALL_LOG_END;
  processData(3938908, 2, 9001, message);
</pre></div><br/>
<br/>
 Now we add a logging rule, setting the pass-through threshold to be <code>ball::Severity::TRACE</code> (i.e., enabling verbose logging) if the thread's context contains a "uuid" of <code>3938908</code>. Note that we use the wild-card value <code>*</code> for the category so that the <code><a class="el" href="classball_1_1Rule.html">ball::Rule</a></code> rule will apply to all categories. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classball_1_1Rule.html">ball::Rule</a> rule(<span class="stringliteral">&quot;*&quot;</span>, 0, ball::Severity::TRACE, 0, 0);
  rule.addPredicate(<a class="code" href="classball_1_1Predicate.html">ball::Predicate</a>(<span class="stringliteral">&quot;uuid&quot;</span>, 3938908));
  <a class="code" href="classball_1_1LoggerManager.html#a7ff8e9a0233a7bb2849a1681f24779b5">ball::LoggerManager::singleton</a>().addRule(rule);

  <a class="code" href="ball__log_8h.html#a61668cbeeb06f9c543b230fe5f4bbcf7">BALL_LOG_ERROR</a> &lt;&lt; <span class="stringliteral">&quot;Processing the second message.&quot;</span> &lt;&lt; BALL_LOG_END;
  processData(3938908, 2, 9001, message);
</pre></div><br/>
<br/>
 The final call to the <code>processData</code> function below, passes a "uuid" of <code>2171395</code> (not <code>3938908</code>) so the logging rule we defined will <em>not</em> apply and no message will be logged. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="ball__log_8h.html#a61668cbeeb06f9c543b230fe5f4bbcf7">BALL_LOG_ERROR</a> &lt;&lt; <span class="stringliteral">&quot;Processing the third message.&quot;</span> &lt;&lt; BALL_LOG_END;
  processData(2171395, 2, 9001, message);
</pre></div><br/>
<br/>
 The resulting logged output for this example looks like the following: <br/>
<br/>
<div class="fragment"><pre class="fragment"> ERROR example.cpp:105 EXAMPLE.CATEGORY Processing the first message.
 ERROR example.cpp:117 EXAMPLE.CATEGORY Processing the second message.
 DEBUG example.cpp:35 EXAMPLE.CATEGORY An example message
 ERROR example.cpp:129 EXAMPLE.CATEGORY Processing the third message.
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_6~3A_logging_using_a_callback"></a> <a class="anchor" id="usage.example_6~3A_logging_using_a_callback"></a> <a class="anchor" id="description.usage.example_6~3A_logging_using_a_callback"></a> <a class="anchor" id="example_6"></a> <a class="anchor" id="usage.example_6"></a> <a class="anchor" id="description.usage.example_6"></a> <a class="anchor" id="3.3.6"></a> </dd></dl>
<dl class="user"><dt><b>Example 6: Logging Using a Callback: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following example demonstrates how to register a logging callback. The C++ stream-based macros that take a callback are particularly useful to seamlessly populate the user fields of a record, thus simplying the logging line. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>We define a callback function <code>populateUsingPoint</code> that appends to the specified <code>fields</code> the attributes of the <code>point</code> to log: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">void</span> populateUsingPoint(<a class="code" href="classball_1_1UserFields.html">ball::UserFields</a> *fields, <span class="keyword">const</span> Point&amp; point)
      <span class="comment">// Append to the specified &#39;list&#39; the name, x value, and y value of</span>
      <span class="comment">// the specified &#39;point&#39;.</span>
  {
      fields-&gt;<a class="code" href="classball_1_1UserFields.html#a939e866a020952a5d173f09095434187">appendString</a>(point.name());
      fields-&gt;<a class="code" href="classball_1_1UserFields.html#af1df2b65bf22696f35f9b8442451ac40">appendInt64</a>(point.x());
      fields-&gt;<a class="code" href="classball_1_1UserFields.html#af1df2b65bf22696f35f9b8442451ac40">appendInt64</a>(point.y());
  }

  <span class="keywordtype">int</span> validatePoint(<span class="keyword">const</span> Point&amp; point)
  {
      <a class="code" href="ball__log_8h.html#a6b8ddab653bb8cbaf3746cfeac9f11b5">BALL_LOG_SET_CATEGORY</a>(<span class="stringliteral">&quot;EXAMPLE.CATEGORY&quot;</span>);
</pre></div><br/>
<br/>
 We now bind our callback function <code>populateUsingPoint</code> and the supplied <code>point</code> to a functor object we will pass to the logging callback. Note that the callback supplied to the logging macro must match the prototype <code>void (*)(<a class="el" href="classball_1_1UserFields.html">ball::UserFields</a> *)</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment">      bsl::function &lt;void(ball::UserFields *)&gt; callback;
      callback = <a class="code" href="structbdlf_1_1BindUtil.html#abed946d413bfd0d0abbe7f87b3ed16e4">bdlf::BindUtil::bind</a>(&amp;populateUsingPoint,
                                     <a class="code" href="namespacebdlf_1_1PlaceHolders.html#a15d6194465744f5f4a1c9f98ca44ebca">bdlf::PlaceHolders::_1</a>,
                                     point);

      <span class="keywordtype">int</span> numErrors = 0;
      <span class="keywordflow">if</span> (point.x() &gt; 255) {
          <a class="code" href="ball__log_8h.html#afab252522d2fe3a380e268609ab347fd">BALL_LOGCB_ERROR</a>(callback) &lt;&lt; <span class="stringliteral">&quot;X &gt; 255&quot;</span>  &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
          ++numErrors;
      }
      <span class="keywordflow">if</span> (point.x() &lt; -255) {
          <a class="code" href="ball__log_8h.html#afab252522d2fe3a380e268609ab347fd">BALL_LOGCB_ERROR</a>(callback) &lt;&lt; <span class="stringliteral">&quot;X &lt; -255&quot;</span> &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
          ++numErrors;
      }
      <span class="keywordflow">if</span> (point.y() &gt; 255) {
          <a class="code" href="ball__log_8h.html#afab252522d2fe3a380e268609ab347fd">BALL_LOGCB_ERROR</a>(callback) &lt;&lt; <span class="stringliteral">&quot;Y &gt; 255&quot;</span>  &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
          ++numErrors;
      }
      <span class="keywordflow">if</span> (point.y() &lt; -255) {
          <a class="code" href="ball__log_8h.html#afab252522d2fe3a380e268609ab347fd">BALL_LOGCB_ERROR</a>(callback) &lt;&lt; <span class="stringliteral">&quot;Y &lt; -255&quot;</span> &lt;&lt; <a class="code" href="ball__log_8h.html#a8f1b10f6e7ed0100a697efa9db6b30ff">BALL_LOGCB_END</a>
          ++numErrors;
      }
      <span class="keywordflow">return</span> numErrors;
  }
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:25 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
