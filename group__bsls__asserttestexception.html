<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 2.23.1 OSS: bsls_asserttestexception Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bsls_asserttestexception<br/>
<small>
[<a class="el" href="group__bsls.html">Package bsls</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide an exception type to support testing for failed assertions.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebsls.html">bsls</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide an exception type to support testing for failed assertions. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbsls_1_1AssertTestException.html">bsls::AssertTestException</a> </td><td>type describing the context of failed assertion  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__bsls__assert.html" title="Provide build-specific, runtime-configurable assertion macros.">Component bsls_assert</a>, <a class="el" href="group__bsls__asserttest.html" title="Provide a test facility for assertion macros.">Component bsls_asserttest</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component implements an exception class, <code><a class="el" href="classbsls_1_1AssertTestException.html">bsls::AssertTestException</a></code>, that provides a mechanism to convey context information from a failing assertion to a test handler. The context that is captured consists of the program source of the failing expression, the name of the file containing the assertion, and the line number within that file where the asserted expression may be found. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>First we write a macro to act as an <code>assert</code> facility that will throw an exception of type <code><a class="el" href="classbsls_1_1AssertTestException.html">bsls::AssertTestException</a></code> if the asserted expression fails. The thrown exception will capture the source code, filename, and line number of the failing expression: <br/>
<br/>
<div class="fragment"><pre class="fragment"><span class="preprocessor">  #define TEST_ASSERT(EXPRESSION)                                          \$</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (!(EXPRESSION)) {                                                 \$
          <span class="keywordflow">throw</span> <a class="code" href="classbsls_1_1AssertTestException.html">bsls::AssertTestException</a>(#EXPRESSION, __FILE__, __LINE__);\$
  }
</pre></div><br/>
<br/>
 Next we use the macro inside a <code>try</code>-block, so that we can catch the exception thrown if the tested expression fails: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordflow">try</span> {
      <span class="keywordtype">void</span> *p = NULL;
      TEST_ASSERT(0 != p);
  }
</pre></div><br/>
<br/>
 If the assertion fails, catch the exception and confirm that it correctly recorded the context of where the assertion failed: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code" href="classbsls_1_1AssertTestException.html">bsls::AssertTestException</a>&amp; exception) {
      assert(0 == strcmp(<span class="stringliteral">&quot;0 != p&quot;</span>, exception.<a class="code" href="classbsls_1_1AssertTestException.html#ab89585c0bc33f3314c32604ea0e474d1">expression</a>()));
      assert(0 == strcmp(__FILE__, exception.<a class="code" href="classbsls_1_1AssertTestException.html#abd30b73290214213a6f0ca567dc6b0e4">filename</a>()));
      assert(9 == __LINE__ - exception.<a class="code" href="classbsls_1_1AssertTestException.html#a54b0c42b1350301642beabde7712b9d2">lineNumber</a>());
  }
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Jun 2 2015 13:40:22 for BDE Release 2.23.1 OSS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
