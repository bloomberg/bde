<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: baltzo_testloader Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component baltzo_testloader<br/>
<small>
[<a class="el" href="group__baltzo.html">Package baltzo</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a test implementation of the <code><a class="el" href="classbaltzo_1_1Loader.html">baltzo::Loader</a></code> protocol.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebaltzo.html">baltzo</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Usage</a> <ul>
<li>
<a href="#3.1.1">Example 1: Populating a <code>baltzo::TestLoader</code> with Time-Zone Information</a> </li>
<li>
<a href="#3.1.2">Example 2: Accessing Time-Zone Information From a <code>baltzo::TestLoader</code></a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a test implementation of the <code><a class="el" href="classbaltzo_1_1Loader.html">baltzo::Loader</a></code> protocol. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbaltzo_1_1TestLoader.html">baltzo::TestLoader</a> </td><td>concrete implementation of <code><a class="el" href="classbaltzo_1_1Loader.html">baltzo::Loader</a></code> protocol  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__baltzo__loader.html" title="Provide a protocol for obtaining information about a time zone.">Component baltzo_loader</a>, <a class="el" href="group__baltzo__zoneinfo.html" title="Provide a value type to represent a time zone.">Component baltzo_zoneinfo</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides <code><a class="el" href="classbaltzo_1_1TestLoader.html">baltzo::TestLoader</a></code>, a concrete test implementation of the <code><a class="el" href="classbaltzo_1_1Loader.html">baltzo::Loader</a></code> protocol for loading a <code><a class="el" href="classbaltzo_1_1Zoneinfo.html">baltzo::Zoneinfo</a></code> object. The following inheritance hierarchy diagram shows the classes involved and their methods: <br/>
<br/>
<div class="fragment"><pre class="fragment">   ,------------------.
  ( <a class="code" href="classbaltzo_1_1TestLoader.html">baltzo::TestLoader</a> )
   `------------------<span class="stringliteral">&#39;</span>
<span class="stringliteral">            |      ctor</span>
<span class="stringliteral">            |      setTimeZone</span>
<span class="stringliteral">            V</span>
<span class="stringliteral">    ,--------------.</span>
<span class="stringliteral">   ( baltzo::Loader )</span>
<span class="stringliteral">    `--------------&#39;</span>
                 dtor
                 loadTimeZone
</pre></div><br/>
<br/>
 This test implementation maintains a mapping of time-zone identifiers to <code><a class="el" href="classbaltzo_1_1Zoneinfo.html">baltzo::Zoneinfo</a></code> objects. Clients can associate a time-zone object with a time-zone identifier using the <code>setTimeZone</code> method. A subsequent call to the protocol method <code>loadTimeZone</code> for that time-zone identifier will return the supplied <code><a class="el" href="classbaltzo_1_1Zoneinfo.html">baltzo::Zoneinfo</a></code> object. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following examples demonstrate how to populate a <code><a class="el" href="classbaltzo_1_1TestLoader.html">baltzo::TestLoader</a></code> with time.zone information, and then access that information through the <code><a class="el" href="classbaltzo_1_1Loader.html">baltzo::Loader</a></code> protocol. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_populating_a_baltzo~3A~3Atestloader_with_time-zone_information"></a> <a class="anchor" id="usage.example_1~3A_populating_a_baltzo~3A~3Atestloader_with_time-zone_information"></a> <a class="anchor" id="description.usage.example_1~3A_populating_a_baltzo~3A~3Atestloader_with_time-zone_information"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.1.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Populating a baltzo::TestLoader with Time-Zone Information: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>We start by creating a <code><a class="el" href="classbaltzo_1_1Zoneinfo.html">baltzo::Zoneinfo</a></code> object, which we will eventually populate with a subset of data for "America/New_York": <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbaltzo_1_1Zoneinfo.html">baltzo::Zoneinfo</a> newYorkTimeZone;
</pre></div><br/>
<br/>
 Next, we populate <code>newYorkTimeZone</code> with the correct time-zone identifier and two types of local time (standard time, and daylight-saving time): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">const</span> <span class="keywordtype">char</span> *NEW_YORK_ID = <span class="stringliteral">&quot;America/New_York&quot;</span>;
  newYorkTimeZone.<a class="code" href="classbaltzo_1_1Zoneinfo.html#a176a8296b42238b18b016237f2020c31">setIdentifier</a>(NEW_YORK_ID);

  <a class="code" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a> est(-5 * 60 * 60, <span class="keyword">false</span>, <span class="stringliteral">&quot;EST&quot;</span>);
  <a class="code" href="classbaltzo_1_1LocalTimeDescriptor.html">baltzo::LocalTimeDescriptor</a> edt(-4 * 60 * 60, <span class="keyword">true</span>,  <span class="stringliteral">&quot;EDT&quot;</span>);
</pre></div><br/>
<br/>
 Then, we create a series of transitions between these local time descriptors for the years 2007-2011. Note that the United States transitions to daylight saving time on the second Sunday in March, at 2am local time (7am UTC), and transitions back to standard time on the first Sunday in November at 2am local time (6am UTC). Also note, that these rules for generating transitions was different prior to 2007, and may be changed at some point in the future. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Time.html">bdlt::Time</a> edtTime(7, 0, 0);  <span class="comment">// UTC transition time</span>
  <a class="code" href="classbdlt_1_1Time.html">bdlt::Time</a> estTime(6, 0, 0);  <span class="comment">// UTC transition time</span>
  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> edtDays[5] = { 11,  9,  8, 14, 13 };
  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> estDays[5] = {  4,  2,  1,  7,  6 };
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> year = 2007; year &lt; 2012; ++year) {
      <span class="keywordtype">int</span> edtDay = edtDays[year - 2007];
      <span class="keywordtype">int</span> estDay = estDays[year - 2007];

      <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> edtTransition(<a class="code" href="classbdlt_1_1Date.html">bdlt::Date</a>(year, 3,  edtDay), edtTime);
      <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> estTransition(<a class="code" href="classbdlt_1_1Date.html">bdlt::Date</a>(year, 11, estDay), estTime);

      <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> edtTransitionT =
                            <a class="code" href="structbdlt_1_1EpochUtil.html#ad2deb9a4b28c2ea9a6f72de238f7298b">bdlt::EpochUtil::convertToTimeT64</a>(edtTransition);

      <a class="code" href="structbsls_1_1Types.html#aa382f43d8a0be6193c86ef5c82886c12">bsls::Types::Int64</a> estTransitionT =
                            <a class="code" href="structbdlt_1_1EpochUtil.html#ad2deb9a4b28c2ea9a6f72de238f7298b">bdlt::EpochUtil::convertToTimeT64</a>(estTransition);
</pre></div><br/>
<br/>
 Now, having created values representing the daylight saving time transitions (in UTC), we insert the transitions into the <code><a class="el" href="classbaltzo_1_1Zoneinfo.html">baltzo::Zoneinfo</a></code> object <code>newYorkTimeZone</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">      newYorkTimeZone.<a class="code" href="classbaltzo_1_1Zoneinfo.html#a88adb8085067b19e1eca4298ffd1ef4d">addTransition</a>(edtTransitionT, edt);
      newYorkTimeZone.<a class="code" href="classbaltzo_1_1Zoneinfo.html#a88adb8085067b19e1eca4298ffd1ef4d">addTransition</a>(estTransitionT, est);
  }
</pre></div><br/>
<br/>
 Now, we create a <code><a class="el" href="classbaltzo_1_1TestLoader.html">baltzo::TestLoader</a></code> object and configure it with <code>newYorkTimeZone</code>, which the test loader will associate with the identifier <code>newYorkTimeZone.identifier()</code> (whose value is "America/New_York"): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbaltzo_1_1TestLoader.html">baltzo::TestLoader</a> testLoader;
  testLoader.<a class="code" href="classbaltzo_1_1TestLoader.html#a81d3e1459b9faddcaf4081948f52ae94">setTimeZone</a>(newYorkTimeZone);
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_2~3A_accessing_time-zone_information_from_a_baltzo~3A~3Atestloader"></a> <a class="anchor" id="usage.example_2~3A_accessing_time-zone_information_from_a_baltzo~3A~3Atestloader"></a> <a class="anchor" id="description.usage.example_2~3A_accessing_time-zone_information_from_a_baltzo~3A~3Atestloader"></a> <a class="anchor" id="example_2"></a> <a class="anchor" id="usage.example_2"></a> <a class="anchor" id="description.usage.example_2"></a> <a class="anchor" id="3.1.2"></a> </dd></dl>
<dl class="user"><dt><b>Example 2: Accessing Time-Zone Information From a baltzo::TestLoader: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>In the next example, we will use the <code><a class="el" href="classbaltzo_1_1TestLoader.html">baltzo::TestLoader</a></code> we initialized in the preceding example, to load time-zone information for New York via the <code><a class="el" href="classbaltzo_1_1Loader.html">baltzo::Loader</a></code> protocol. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>We start by creating a <code><a class="el" href="classbaltzo_1_1Loader.html">baltzo::Loader</a></code> reference to <code>testLoader</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbaltzo_1_1Loader.html">baltzo::Loader</a>&amp; loader = testLoader;
</pre></div><br/>
<br/>
 Now we used the protocol method <code>loadTimeZone</code> to load time-zone information for New York: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbaltzo_1_1Zoneinfo.html">baltzo::Zoneinfo</a> resultNewYork;
  <span class="keywordtype">int</span> status = loader.<a class="code" href="classbaltzo_1_1Loader.html#ac62e666ebcffdb6b6bada4afe525136e">loadTimeZone</a>(&amp;resultNewYork, <span class="stringliteral">&quot;America/New_York&quot;</span>);
  assert(0 == status);
</pre></div><br/>
<br/>
 Finally, we verify that the returned time-zone information, <code>resultNewYork</code>, is equivalent to <code>newYorkTimeZone</code>, which we we used to configure <code>testLoader</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(newYorkTimeZone == resultNewYork);
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:30 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
