<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: ball_loggermanagerconfiguration Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component ball_loggermanagerconfiguration<br/>
<small>
[<a class="el" href="group__ball.html">Package ball</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a constrained-attribute class for the logger manager.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceball.html">ball</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Thread Safety</a> </li>
<li>
<a href="#3.2">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a constrained-attribute class for the logger manager. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a> </td><td>configuration spec for a logger manager  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ball__loggermanagerdefaults.html" title="Provide constrained default attributes for the logger manager.">Component ball_loggermanagerdefaults</a>, </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a constrained-attribute class that contains a set of attributes (objects and parameters) of particular use to logger managers. The constraints are actively maintained by the class. In particular, the "set" methods for constrained values will fail if their arguments are not consistent with the constraints. Also, the constructor does not take any constrained arguments, but rather sets those values to valid defaults unconditionally. This behavior avoids "silent failures", since the constructor cannot explicitly return a status value. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The attributes of a <code><a class="el" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a></code> object and their constraints are given, respectively, in two tables below. Before listing the attributes, however, we list the types that are provided by the <code><a class="el" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a></code> class to simply the definition of some of the attributes: <br/>
<br/>
<div class="fragment"><pre class="fragment">  TYPE                                         <span class="stringliteral">&#39;typedef&#39;</span> alias
  ------------------------------------------   ------------------------------
  bsl::function&lt;void(ball::UserFields*, const ball::UserFieldsSchema&amp;)&gt;
                                               UserFieldsPopulatorCallback;

  bsl::function&lt;void(bsl::string *, const char *)&gt;
                                               CategoryNameFilterCallback

  bsl::function&lt;void(int *, int *, int *, int *, const char *)&gt;
                                               DefaultThresholdLevelsCallback
</pre></div><br/>
<br/>
 The attributes contained by a <code><a class="el" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a></code> object follow: <br/>
<br/>
<div class="fragment"><pre class="fragment">  TYPE                                         NAME
  ------------------------------------------   ------------------------------
  <a class="code" href="classball_1_1LoggerManagerDefaults.html">ball::LoggerManagerDefaults</a>                  defaults

  <a class="code" href="classball_1_1UserFieldsSchema.html">ball::UserFieldsSchema</a>                       userSchema

  UserFieldsPopulatorCallback                  userFieldsPopulatorCallback

  CategoryNameFilterCallback                   categoryNameFilterCallback

  DefaultThresholdLevelsCallback               defaultThresholdLevelsCallback

  LogOrder                                     logOrder

  TriggerMarkers                               triggerMarkers

  NAME                            DESCRIPTION
  -------------------             -------------------------------------------
  defaults                        constrained defaults <span class="keywordflow">for</span> buffer <a class="code" href="namespacebdlat__ArrayFunctions.html#a65e1cfba76b2d13054b61159488b0da8">size</a> and
                                  thresholds

  userSchema                      defines optional user-defined fields in a
                                  log record

  userFieldsPopulatorCallback     populates user-defined fields in a log
                                  record

  categoryNameFilterCallback      invoked on category names, e.g., to re-map
                                  characters

  defaultThresholdLevelsCallback  sets category severity threshold levels (by
                                  <span class="keywordflow">default</span>)

  logOrder                        defines the order in which log messages are
                                  published <span class="keywordflow">for</span> Trigger and Trigger-All
                                  events; <span class="keywordflow">default</span> is LIFO (last-in first-out)

  triggerMarkers                  defines whether text will be written to the
                                  log to indicate whether a series of log
                                  records were logged due to either a Trigger
                                  or Trigger-All event; if this attribute is
                                  &#39;e_BEGIN_END_MARKERS&#39;, then
                                  &quot;BEGIN RECORD DUMP&quot; and &quot;END RECORD DUMP&quot;
                                  will be written before and after each
                                  sequence of records logged due to a Trigger
                                  or Trigger-All event; default is
                                  &#39;e_BEGIN_END_MARKERS&#39;.
</pre></div><br/>
<br/>
 The constraints are as follows: <br/>
<br/>
<div class="fragment"><pre class="fragment">    NAME                             CONSTRAINT
  +--------------------------------+--------------------------------+
  | defaults                       | (a constrained-attribute type) |
  +--------------------------------+--------------------------------+
  | userSchema                     | (single attribute)             |
  | userFieldsPopulatorCallback    |                                |
  +--------------------------------+--------------------------------+
  | categoryNameFilterCallback     | (none)                         |
  +--------------------------------+--------------------------------+
  | defaultThresholdLevelsCallback | (none)                         |
  +--------------------------------+--------------------------------+
  | logOrder                       | (none)                         |
  +--------------------------------+--------------------------------+
  | triggerMarkers                 | (none)                         |
  +--------------------------------+--------------------------------+
</pre></div><br/>
<br/>
 For convenience, the <code><a class="el" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a></code> interface contains manipulators and accessors to configure and inspect the value of its contained <code><a class="el" href="classball_1_1LoggerManagerDefaults.html">ball::LoggerManagerDefaults</a></code> object; these methods are identical to those of <code><a class="el" href="classball_1_1LoggerManagerDefaults.html">ball::LoggerManagerDefaults</a></code>. See the <code>ball_loggermanagerdefaults</code> component for details on the defaults and their constraints. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="thread_safety"></a> <a class="anchor" id="description.thread_safety"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Thread Safety: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This constrained-attribute component is <em>thread-safe</em> but not <em>thread-enabled</em>, and requires explicit synchronization in the user space. Note that any of the contained user-defined callbacks may be invoked from <em>any</em> thread, and the user must account for that. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following snippets of code illustrate how to use a <code><a class="el" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a></code> object. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First we define a simple function that will serve as a <code>UserFieldsPopulatorCallback</code>, a callback that will be invoked for each logged message to populate user defined fields for the log record: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">void</span> exampleCallback(<a class="code" href="classball_1_1UserFields.html">ball::UserFields</a>              *fields,
                       <span class="keyword">const</span> <a class="code" href="classball_1_1UserFieldsSchema.html">ball::UserFieldsSchema</a>&amp;  schema)
  {
    <span class="comment">// Verify the schema matches this callbacks expectations.</span>

    <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(1                             == schema.<a class="code" href="classball_1_1UserFieldsSchema.html#a9b429ba7d59e285738328b6853ad7598">length</a>());
    <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(<a class="code" href="structball_1_1UserFieldType.html#a4ea244c928888fd9f1799fff4b53157ea7d38c756f9cdf2504664d6edf098d211">ball::UserFieldType::e_STRING</a> == schema.<a class="code" href="classball_1_1UserFieldsSchema.html#a916f3148e4571a2ce18298e107f976b3">type</a>(0));
    <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(<span class="stringliteral">&quot;example&quot;</span>                     == schema.<a class="code" href="classball_1_1UserFieldsSchema.html#a8d4addb4efd507d430f1e8c5ec60f193">name</a>(0));

    fields-&gt;<a class="code" href="classball_1_1UserFields.html#a939e866a020952a5d173f09095434187">appendString</a>(<span class="stringliteral">&quot;example user field value&quot;</span>);
  }
</pre></div><br/>
<br/>
 Next, we define a function <code>inititialize</code> in which we will create and configure a <code><a class="el" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a></code> object (see <a href="group__ball__loggermanager.html" class="el"><code>ball_loggermanager</code></a> for an example of how to create the logger-manager singleton object): <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">void</span> initializeConfiguration(<span class="keywordtype">bool</span> verbose)
  {
    <a class="code" href="classball_1_1LoggerManagerConfiguration.html">ball::LoggerManagerConfiguration</a> config;
</pre></div><br/>
<br/>
 Here, we configure the default record buffer size, logger buffer size, and the various logging thresholds (see <a href="group__ball__loggermanager.html" class="el"><code>ball_loggermanager</code></a> for more information on the various threshold levels): <br/>
<br/>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">if</span> (0 != config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#afb62723cca2c62c8bd915a46a6a64042">setDefaultRecordBufferSizeIfValid</a>(32768) ||
        0 != config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#aa8b4bc792a97a92790a7cea219893386">setDefaultLoggerBufferSizeIfValid</a>(1024)  ||
        0 != config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#ab4f80e822e0f7c7362892bba65673e88">setDefaultThresholdLevelsIfValid</a>(0, 64, 0, 0)) {
       bsl::cerr &lt;&lt; <span class="stringliteral">&quot;Failed set log configuration defaults.&quot;</span> &lt;&lt; bsl::endl;
       bsl::exit(-1);
    }

    ASSERT(32768 == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#ada246060a4b7f7a5e97a72baef12fea4">defaultRecordBufferSize</a>());
    ASSERT( 1024 == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#a70920f36d136c539667f4dd52c66eda8">defaultLoggerBufferSize</a>());
    ASSERT(    0 == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#a4efcb679ab94c178f84187067a8e631f">defaultRecordLevel</a>());
    ASSERT(   64 == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#a116536f55e51319662b6344fbd483087">defaultPassLevel</a>());
    ASSERT(    0 == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#a71616689060bb26fb5086d4c5095c489">defaultTriggerLevel</a>());
    ASSERT(    0 == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#aea2e788dddfeaa9c7e478188f1039151">defaultTriggerAllLevel</a>());
</pre></div><br/>
<br/>
 Next, we create a user field schema, that will be used with the user field populator callback <code>exampleCallback</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">    <a class="code" href="classball_1_1UserFieldsSchema.html">ball::UserFieldsSchema</a> schema;
    schema.<a class="code" href="classball_1_1UserFieldsSchema.html#a12ef896450e426455880ee76db3d803d">appendFieldDescription</a>(<span class="stringliteral">&quot;example&quot;</span>, <a class="code" href="structball_1_1UserFieldType.html#a4ea244c928888fd9f1799fff4b53157ea7d38c756f9cdf2504664d6edf098d211">ball::UserFieldType::e_STRING</a>);
</pre></div><br/>
<br/>
 Now, we set populate the configuration options in our schema (note that the following methods cannot fail and return <code>void</code>): <br/>
<br/>
<div class="fragment"><pre class="fragment">    config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#a777df16b6b87ffaff475f9d0b0a12789">setUserFieldsSchema</a>(schema, &amp;exampleCallback);
    config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#aabe6b8b9f683fa996bd316774729e31f">setLogOrder</a>(<a class="code" href="classball_1_1LoggerManagerConfiguration.html#ad9c3eeae1972ac1586f8ba6f4ea3cf16a0469b7572386a450582754f49de8a3e5" title="oldest logged messages are published first">ball::LoggerManagerConfiguration::e_FIFO</a>);
    config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#af2858ceebd202743c17c6ea92b446a1e">setTriggerMarkers</a>(
                          <a class="code" href="classball_1_1LoggerManagerConfiguration.html#a572251825e752f3ae139275512fe7b3da632bde31e75e77a714ec61d4116fe6ae" title="don&amp;#39;t print any markers">ball::LoggerManagerConfiguration::e_NO_MARKERS</a>);
</pre></div><br/>
<br/>
 Then, we verify the options are configured correctly: <br/>
<br/>
<div class="fragment"><pre class="fragment">    ASSERT(schema == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#a167a47db69733bc74b2232ace10f0374">userFieldsSchema</a>());
    ASSERT(<a class="code" href="classball_1_1LoggerManagerConfiguration.html#ad9c3eeae1972ac1586f8ba6f4ea3cf16a0469b7572386a450582754f49de8a3e5" title="oldest logged messages are published first">ball::LoggerManagerConfiguration::e_FIFO</a> == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#a150848837411c6befaebfb3d82f53cb3">logOrder</a>());
    ASSERT(<a class="code" href="classball_1_1LoggerManagerConfiguration.html#a572251825e752f3ae139275512fe7b3da632bde31e75e77a714ec61d4116fe6ae" title="don&amp;#39;t print any markers">ball::LoggerManagerConfiguration::e_NO_MARKERS</a>
                                                 == config.<a class="code" href="classball_1_1LoggerManagerConfiguration.html#ab63db1d3ca5082bac19640b8d764c6fb">triggerMarkers</a>());
</pre></div><br/>
<br/>
 Finally, we print the configuration value to <code>stdout</code> and return: <br/>
<br/>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">if</span> (verbose) {
      bsl::cout &lt;&lt; config &lt;&lt; bsl::endl;
    }
  }
</pre></div><br/>
<br/>
 This produces the following (multi-line) output: <br/>
<br/>
<div class="fragment"><pre class="fragment">  [
      Defaults:
      [
          recordBufferSize : 32768
          loggerBufferSize : 1024
          recordLevel      : 0
          passLevel        : 64
          triggerLevel     : 0
          triggerAllLevel  : 0
      ]
      User Fields Schema:
      [
          example = STRING
      ]
      User Fields Populator functor is not null
      <a class="code" href="classCategory.html">Category</a> Name Filter functor is null
      Default Threshold Callback functor is null
      Logging order is FIFO
      Trigger markers are NO_MARKERS
  ]
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:25 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
