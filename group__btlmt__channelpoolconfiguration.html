<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: btlmt_channelpoolconfiguration Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component btlmt_channelpoolconfiguration<br/>
<small>
[<a class="el" href="group__btlmt.html">Package btlmt</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a class for configuring channel pools.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebtlmt.html">btlmt</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Thread Safety</a> </li>
<li>
<a href="#3.2">Usage</a> <ul>
<li>
<a href="#3.2.1">Example 1: Basic Syntax</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a class for configuring channel pools. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbtlmt_1_1ChannelPoolConfiguration.html">btlmt::ChannelPoolConfiguration</a> </td><td>configuration parameters for channel pool  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a constrained-attribute class, <code><a class="el" href="classbtlmt_1_1ChannelPoolConfiguration.html">btlmt::ChannelPoolConfiguration</a></code>, that contains a set of attributes (objects and parameters) of particular use to channel pools. The constraints are actively maintained by the class. In particular, the "set" methods for constrained values will fail if their arguments are not consistent with the constraints. Also, the constructor does not take any constrained arguments, but rather sets those values to valid defaults unconditionally. This behavior avoids "silent failures", since the constructor cannot explicitly return a status value. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The attributes contained by a <code><a class="el" href="classbtlmt_1_1ChannelPoolConfiguration.html">btlmt::ChannelPoolConfiguration</a></code> object and the attribute constraints are given, respectively, in two tables below. The attributes are as follows: <br/>
<br/>
<div class="fragment"><pre class="fragment">   TYPE    NAME                DESCRIPTION                            DEFAULT
   ----    --------------      --------------------------------       -------
   <span class="keywordtype">int</span>     maxConnections      maximum number of connections             1024
                               that can be managed by a channel
                               pool.

   <span class="keywordtype">int</span>     maxThreads          the number of threads managed                1
                               by a channel pool

   <span class="keywordtype">double</span>  readTimeout         timeout <span class="keywordflow">for</span> <span class="stringliteral">&quot;read&quot;</span> operations; <span class="keywordflow">if</span>           30
                               <span class="keyword">this</span> value is 0, the read timeout
                               will be disabled

   <span class="keywordtype">double</span>  metricsInterval     periodic-update interval <span class="keywordflow">for</span>                30
                               metrics

   <span class="keywordtype">int</span>     minMessageSizeOut   output message strategy hint                 1

   <span class="keywordtype">int</span>     typMessageSizeOut   output message strategy hint                 1

   <span class="keywordtype">int</span>     maxMessageSizeOut   output message strategy hint              1 MB

   <span class="keywordtype">int</span>     minMessageSizeIn    input message strategy hint                  1

   <span class="keywordtype">int</span>     typMessageSizeIn    input message strategy hint                  1

   <span class="keywordtype">int</span>     maxMessageSizeIn    input message strategy hint               1024

   <span class="keywordtype">int</span>     writeQueueLowWater  High and low watermarks (in                  0
   <span class="keywordtype">int</span>     writeQueueHighWater bytes) <span class="keywordflow">for</span> a channel<span class="stringliteral">&#39;s write              1 MB</span>
<span class="stringliteral">                               queue.  Once high watermark</span>
<span class="stringliteral">                               is reached, the channel pool</span>
<span class="stringliteral">                               will no longer accept messages</span>
<span class="stringliteral">                               for the channel until there</span>
<span class="stringliteral">                               is write space available.</span>
<span class="stringliteral">                               A channel state callback will</span>
<span class="stringliteral">                               result once the queued data size</span>
<span class="stringliteral">                               is lower than the low watermark</span>
<span class="stringliteral">                               value.</span>
<span class="stringliteral"></span>
<span class="stringliteral">   int     threadStackSize     the stack size of threads                 1 MB</span>
<span class="stringliteral">                               managed by this pool in bytes.</span>
<span class="stringliteral"></span>
<span class="stringliteral">   bool    collectTimeMetrics  indicates whether the configured          true</span>
<span class="stringliteral">                               channel pool will collect metrics.</span>
<span class="stringliteral">                               If this value is &#39;</span><span class="keyword">true</span><span class="stringliteral">&#39;, the channel</span>
<span class="stringliteral">                               pool will collect metrics</span>
<span class="stringliteral">                               categorizing the time spent</span>
<span class="stringliteral">                               processing data, and if this value</span>
<span class="stringliteral">                               is &#39;</span><span class="keyword">false</span><span class="stringliteral">&#39;, those metrics will not</span>
<span class="stringliteral">                               be collected.</span>
</pre></div><br/>
<br/>
 The constraints are as follows: <br/>
<br/>
<div class="fragment"><pre class="fragment">    NAME                 CONSTRAINT
   +--------------------+---------------------------------------------+
   | maxConnections     | 0 &lt;= maxConnections                         |
   +--------------------+---------------------------------------------+
   | maxThreads         | 0 &lt;= maxThreads                             |
   +--------------------+---------------------------------------------+
   | writeQueueLowWater | 0 &lt;= writeQueueLowWater                     |
   | writeQueueHighWater| 0 &lt;= writeQueueHighWater                     |
   +--------------------+---------------------------------------------+
   | readTimeout        | 0 &lt;= readTimeout                            |
   +--------------------+---------------------------------------------+
   | metricsInterval    | 0 &lt;= metricsInterval                        |
   +--------------------+---------------------------------------------+
   | minMessageSizeOut  | 0 &lt;= minMessageSizeOut &lt;= typMessageSizeOut |
   | typMessageSizeOut  |   &lt;= maxMessageSizeOut                      |
   | maxMessageSizeOut  |                                             |
   +--------------------+---------------------------------------------+
   | minMessageSizeIn   | 0 &lt;= minMessageSizeIn &lt;= typMessageSizeIn   |
   | typMessageSizeIn   |   &lt;= maxMessageSizeIn                       |
   | maxMessageSizeIn   |                                             |
   +--------------------+---------------------------------------------+
   | threadStackSize    | 0 &lt;= threadStackSize                        |
   +--------------------+---------------------------------------------+
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="thread_safety"></a> <a class="anchor" id="description.thread_safety"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Thread Safety: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This constrained-attribute component is <em>thread-safe</em> but not <em>thread-enabled</em>, and requires explicit synchronization in the user space. Note that any of the contained user-defined callbacks may be invoked from <em>any</em> thread, and the user must account for that. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_basic_syntax"></a> <a class="anchor" id="usage.example_1~3A_basic_syntax"></a> <a class="anchor" id="description.usage.example_1~3A_basic_syntax"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.2.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Basic Syntax: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following snippets of code illustrate how to use a <code><a class="el" href="classbtlmt_1_1ChannelPoolConfiguration.html">btlmt::ChannelPoolConfiguration</a></code> object. First, create a configuration object <code>cpc</code>. Note that it is necessarily configured to have valid but unpublished defaults. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html">btlmt::ChannelPoolConfiguration</a> cpc;
</pre></div><br/>
<br/>
 Next, set each attribute. Note that each of the "in" and "out" message size triplets must be set atomically (i.e., with a single three-argument "set" method). Note also that each "set" method will fail if the argument or triplet of arguments is not valid, and so each method returns a status value. <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(0 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a3d56e7fbd041fc8ca02afefbd0bc2c28">setIncomingMessageSizes</a>(1, 2, 3));
  assert(1 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#ab78444511d5bee0527757e108e74fe24">minIncomingMessageSize</a>());
  assert(2 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#af37b277d2093856144e1ad1620560f4f">typicalIncomingMessageSize</a>());
  assert(3 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#af0452984781fda4fcbd602bf352d40e2">maxIncomingMessageSize</a>());

  assert(0 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a0d29633a0003b24d3a1531c2aa6be984">setOutgoingMessageSizes</a>(4, 5, 6));
  assert(4 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#af51ae3ffbbd63f081e006e025970cde3">minOutgoingMessageSize</a>());
  assert(5 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a7cbd2c08c7094d080bec4d1e2165000c">typicalOutgoingMessageSize</a>());
  assert(6 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#ab1fb2628eef8e9e0808a2b24868909f7">maxOutgoingMessageSize</a>());

  assert(0   == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a31b13cd49445920115af9691e4980457">setMaxConnections</a>(100));
  assert(100 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#af6aebdaf499a9ab5840ea88bb253acd4">maxConnections</a>());

  assert(0   == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#afe115a2b613dd9e3e41a2b05b47172e3">setMaxThreads</a>(200));
  assert(200 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#aae2e9de80ee2d1e321fc5b65128caeb3">maxThreads</a>());

  assert(0    == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a11e72d265b10ff8558fc7a5f50f649ad">setWriteQueueWatermarks</a>(0, 1024));
  assert(0    == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#acca4bf247a242cc0e0f4bfbbce6196ef">writeQueueLowWatermark</a>());
  assert(1024 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#af1563ff97bfd5da921f00442d93e2e59">writeQueueHighWatermark</a>());

  assert(0   == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a6e5b9cae25473ab939f1740fabde4e39">setReadTimeout</a>(3.5));
  assert(3.5 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#ae2e0793780518126bd2272ad9a146f4a">readTimeout</a>());

  assert(0    == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a2a389534d24b9f81dbcc78800fe486cd">setMetricsInterval</a>(5.25));
  assert(5.25 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a1f98135b3e77dafd442a5830f5d80b4c">metricsInterval</a>());

  assert(0    == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#ab37cbfaaa76d2fb8d079454f0c1b9a24">setThreadStackSize</a>(1024));
  assert(1024 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a283dece66b1c4b9073edb9b5211e301c">threadStackSize</a>());
</pre></div><br/>
<br/>
 The configuration object is now validly configured with our choice of parameters. If, however, we attempt to set an invalid configuration, the "set" method will fail (with a non-zero return status), and the configuration will be left unchanged. <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(0 != cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#a3d56e7fbd041fc8ca02afefbd0bc2c28">setIncomingMessageSizes</a>(8, 4, 256));
  assert(1 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#ab78444511d5bee0527757e108e74fe24">minIncomingMessageSize</a>());
  assert(2 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#af37b277d2093856144e1ad1620560f4f">typicalIncomingMessageSize</a>());
  assert(3 == cpc.<a class="code" href="classbtlmt_1_1ChannelPoolConfiguration.html#af0452984781fda4fcbd602bf352d40e2">maxIncomingMessageSize</a>());
</pre></div><br/>
<br/>
 Finally, we can print the configuration value to <code>stdout</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment">  cout &lt;&lt; cpc;
</pre></div><br/>
<br/>
 This produces the following (multi-line) output: <br/>
<br/>
<div class="fragment"><pre class="fragment"> [
         maxConnections         : 100
         maxThreads             : 200
         writeQueueLowWater     : 0
         writeQueueHighWater    : 1024
         readTimeout            : (3, 500000000)
         metricsInterval        : (5, 250000000)
         minOutgoingMessageSize : 4
         typOutgoingMessageSize : 5
         maxOutgoingMessageSize : 6
         minIncomingMessageSize : 1
         typIncomingMessageSize : 2
         maxIncomingMessageSize : 3
         threadStackSize        : 1024
         collectTimeMetrics     : 1
 ]
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:49:13 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
