<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: bdlc_indexclerk Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bdlc_indexclerk<br/>
<small>
[<a class="el" href="group__bdlc.html">Package bdlc</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a manager of reusable, non-negative integer indices.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebdlc.html">bdlc</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Performance</a> </li>
<li>
<a href="#3.2">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a manager of reusable, non-negative integer indices. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbdlc_1_1IndexClerkIter.html">bdlc::IndexClerkIter</a> </td><td>sequential accessor to decommissioned indices  </td></tr>
<tr>
<td><a class="el" href="classbdlc_1_1IndexClerk.html">bdlc::IndexClerk</a> </td><td>manager of reusable, non-negative integer indices  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component implements an efficient, value-semantic manager class for reusable, non-negative integer indices. Each new instance of a <code><a class="el" href="classbdlc_1_1IndexClerk.html">bdlc::IndexClerk</a></code> will issue consecutive integers on request, beginning with <code>0, 1, 2, ...</code>. Indices that are no longer needed may be returned for reuse. Existing decommissioned indices are reissued before any new ones are created. Value-semantic operations such as copy construction and assignment, equality comparison, and streaming are also provided. Finally, a <code><a class="el" href="classbdlc_1_1IndexClerkIter.html">bdlc::IndexClerkIter</a></code> is provided to enable sequential, read-only access to the currently decommissioned indices. Note that the order of iteration is not defined. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="performance"></a> <a class="anchor" id="description.performance"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Performance: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following characterizes the performance of representative operations using "big-oh" notation, O[f(N,M)], where the names <code>N</code> and <code>M</code> also refer to the number of respective elements in the sequence of decommissioned indices. <br/>
<br/>
<div class="fragment"><pre class="fragment">     Operation                     Worst Case
     ---------                     ----------
     DEFAULT CTOR                  O[1]
     COPY CTOR(N)                  O[N]
     N.DTOR()                      O[1]
     N.OP=(M)                      O[M]
     OP==(N,M)                     O[min(N,M)]

     N.getIndex()                  O[1]
     N.putIndex(index)             O[1]
     N.removeAll()                 O[1]
     N.numCommissionedIndices()    O[1]
     N.numDecommissionedIndices()  O[1]
     N.nextNewIndex()              O[1]
     N.isInUse(index)              O[N]
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>A <code><a class="el" href="classbdlc_1_1IndexClerk.html">bdlc::IndexClerk</a></code> is commonly used in conjunction with an array to enable machine-address-independent referencing. Rather than dynamically allocating an object and holding its address, the object is stored in the array at the next position dispensed by its associated <code><a class="el" href="classbdlc_1_1IndexClerk.html">bdlc::IndexClerk</a></code>, and that index becomes an identifier (Id) for the new object. Instead of destroying an unneeded object, its Id is merely returned to the clerk. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Care must be taken to ensure that objects "created" at reused indices (i.e., indices below the current length of the array) <em>replace</em> (the value of) an existing object in the array while objects created at new indices (i.e., indices at the current length) are <em>appended</em> to the array. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>For example, suppose we have a security class object. To add and remove security values from a security array/clerk pair, you might write the following two functions: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> addSecurity(<a class="code" href="classbsl_1_1vector.html">bsl::vector&lt;Security&gt;</a> *securityArray,
                  <a class="code" href="classbdlc_1_1IndexClerk.html">bdlc::IndexClerk</a>      *securityClerk,
                  <span class="keyword">const</span> Security&amp;        newSecurity)
      <span class="comment">// Add a copy of the specified &#39;newSecurity&#39; to the specified</span>
      <span class="comment">// &#39;securityArray&#39; at the index dispensed by the specified</span>
      <span class="comment">// &#39;securityClerk&#39;.  Also update the &#39;securityClerk&#39;, and return the id</span>
      <span class="comment">// (in &#39;securityArray&#39;) for the newly added security.</span>
  {
      <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(securityArray);
      <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(securityClerk);

      <span class="keywordtype">int</span> <span class="keywordtype">id</span> = securityClerk-&gt;<a class="code" href="classbdlc_1_1IndexClerk.html#a405eac78577fe364b1756d6a32870090">getIndex</a>();

      <span class="keywordflow">if</span> (id &lt; securityArray-&gt;<a class="code" href="namespacebdlat__ArrayFunctions.html#a65e1cfba76b2d13054b61159488b0da8">size</a>()) {
          (*securityArray)[id] = newSecurity;
      }
      <span class="keywordflow">else</span> {
          securityArray-&gt;<a class="code" href="group__bslstl__vector.html#gaa1d6a35af66d87307ee9a48be96644a5">push_back</a>(newSecurity);
      }

      <span class="keywordflow">return</span> id;
  }

  <span class="keywordtype">void</span> removeSecurity(<a class="code" href="classbsl_1_1vector.html">bsl::vector&lt;Security&gt;</a> *securityArray,
                      <a class="code" href="classbdlc_1_1IndexClerk.html">bdlc::IndexClerk</a>      *securityClerk,
                      <span class="keywordtype">int</span>                    securityId)
      <span class="comment">// Remove the security object identified by the specified &#39;securityId&#39;</span>
      <span class="comment">// from the specified &#39;securityArray&#39;, and update the specified</span>
      <span class="comment">// &#39;securityClerk&#39; (making &#39;securityId&#39; available for reuse).  The</span>
      <span class="comment">// behavior is undefined unless &#39;securityId&#39; refers to an active</span>
      <span class="comment">// security in &#39;securityArray&#39; dispensed by &#39;securityClerk&#39;.</span>
  {
      <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(securityArray);
      <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(securityClerk);

      <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(0                             &lt;= securityId);
      <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(securityClerk-&gt;<a class="code" href="classbdlc_1_1IndexClerk.html#a9c57a9693f679b5f4df2bd13541a2e47">nextNewIndex</a>() &gt;  securityId);
      <a class="code" href="bsls__assert_8h.html#a1d80716f3bc5018941bcaf0856d93a1b">BSLS_ASSERT</a>(securityArray-&gt;<a class="code" href="group__bslstl__vector.html#ga6b5f3f3e0564b62536fd52679d99bdbd">size</a>()         &gt;  securityId);

      <span class="comment">// Note that the &#39;isInUse&#39; function (below) runs in linear time.</span>

      <a class="code" href="bsls__assert_8h.html#a52b2a865ec62420b3681e39fa5cab9c0">BSLS_ASSERT_SAFE</a>(securityClerk-&gt;<a class="code" href="classbdlc_1_1IndexClerk.html#a25a55896644b9ae52eae9a7869263fc9">isInUse</a>(securityId));

      (*securityArray)[securityId] = Security();  <span class="comment">// optional</span>
      securityClerk-&gt;<a class="code" href="classbdlc_1_1IndexClerk.html#a5a2603413a7b6a5acd5124951460aafd">putIndex</a>(securityId);
  }
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:36 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
