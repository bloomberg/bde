<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: ball_categorymanager Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component ball_categorymanager<br/>
<small>
[<a class="el" href="group__ball.html">Package ball</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a manager of named categories each having "thresholds".  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceball.html">ball</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Deprecation Notice</a> </li>
<li>
<a href="#3.2">Thread Safety</a> </li>
<li>
<a href="#3.3">Usage</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a manager of named categories each having "thresholds". </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td>ball::Category </td><td>container for name and threshold levels  </td></tr>
<tr>
<td>ball::CategoryHolder </td><td>holder of a category and its maximum level  </td></tr>
<tr>
<td><a class="el" href="classball_1_1CategoryManager.html">ball::CategoryManager</a> </td><td>manager of category registry  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd>(*) Indicates that the class is deprecated. See "Deprecation Notice" below. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ball__loggermanager.html" title="Provide a manager of core logging functionality.">Component ball_loggermanager</a>, <a class="el" href="group__ball__loggercategoryutil.html" title="Provide a suite of utility functions for category management.">Component ball_loggercategoryutil</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a registry for category information and functions to manage the registry and its members. By "category" we mean a named entity that identifies a region or functional area of a program. A category name can be an arbitrary string, including the empty string. Note that category names are case-sensitive. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Associated with each category, besides its name, are four threshold levels known as "record", "pass", "trigger", and "trigger-all". Threshold levels are values in the range <code>[0 .. 255]</code>. (See the <code>ball_loggermanager</code> component-level documentation for a typical interpretation of these four thresholds.) </dd></dl>
<dl class="user"><dt><b></b></dt><dd>A category is represented by a <code>ball::Category</code> object. Instances of <code>ball::Category</code> cannot be created directly; instead, they are created by the <code><a class="el" href="classball_1_1CategoryManager.html">ball::CategoryManager</a></code> class. <code><a class="el" href="classball_1_1CategoryManager.html">ball::CategoryManager</a></code> manages a registry of categories and exposes methods to add new categories to the registry (<code>addCategory</code>) and modify the threshold levels of existing categories (<code>setThresholdLevels</code>). <code>ball::Category</code> provides accessors for direct access to the name and threshold levels of a given category, and a single manipulator to set the four threshold levels levels. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component also provides an iterator (<code>ball::CategoryManagerIter</code>) and a manipulator (<code>ball::CategoryManagerManip</code>) that give read-only and modifiable access, respectively, to the categories in the registry maintained by <code><a class="el" href="classball_1_1CategoryManager.html">ball::CategoryManager</a></code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="deprecation_notice"></a> <a class="anchor" id="description.deprecation_notice"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Deprecation Notice: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The classes <code>ball::CategoryManagerIter</code> and <code>ball::CategoryManagerManip</code> are deprecated in favor of indexed access to categories via the member operation <code><a class="el" href="classball_1_1CategoryManager.html#aefe50ae7753017bff441ebcc98105e0c">ball::CategoryManager::operator[]()</a></code>. Such iterator and manipulator objects are uncooperative in a multi-threaded environment. In particular, the existence of either a <code>ball::CategoryManagerIter</code> or a <code>ball::CategoryManagerManip</code> object requires that write access to the associated category manager is blocked until the object is destroyed. Otherwise, the object might become invalid if the category manager state changes. Indexed access to the category manager does not have this constraint since each successful access returns an object reference that is guaranteed to be valid for the lifetime of the category manager. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="thread_safety"></a> <a class="anchor" id="description.thread_safety"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Thread Safety: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><code>ball::Category</code> and <code><a class="el" href="classball_1_1CategoryManager.html">ball::CategoryManager</a></code> are <em>thread-safe</em>, meaning that any operation on the same instance can be safely invoked from any thread concurrently with any other operation. </dd></dl>
<dl class="user"><dt><b></b></dt><dd><code>ball::CategoryManagerIter</code> and <code>ball::CategoryManagerManip</code> are const thread-safe, meaning that accessors may be invoked concurrently from different threads, but it is not safe to access or modify an object in one thread while another thread modifies the same object. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.3"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The code fragments in the following example illustrate some basic operations of category management including (1) adding categories to the registry, (2) accessing and modifying the threshold levels of existing categories, and (3) iterating over the categories in the registry. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First we define some hypothetical category names: <br/>
<br/>
<div class="fragment"><pre class="fragment">    <span class="keyword">const</span> <span class="keywordtype">char</span> *myCategories[] = {
        <span class="stringliteral">&quot;EQUITY.MARKET.NYSE&quot;</span>,
        <span class="stringliteral">&quot;EQUITY.MARKET.NASDAQ&quot;</span>,
        <span class="stringliteral">&quot;EQUITY.GRAPHICS.MATH.FACTORIAL&quot;</span>,
        <span class="stringliteral">&quot;EQUITY.GRAPHICS.MATH.ACKERMANN&quot;</span>
    };
</pre></div><br/>
<br/>
 Next we create a <code><a class="el" href="classball_1_1CategoryManager.html">ball::CategoryManager</a></code> named <code>manager</code> and use the <code>addCategory</code> method to define a category for each of the names in <code>myCategories</code>. The threshold levels of each of the categories are set to slightly different values to help distinguish them when they are displayed later: <br/>
<br/>
<div class="fragment"><pre class="fragment">    <a class="code" href="classball_1_1CategoryManager.html">ball::CategoryManager</a> manager;

    <span class="keyword">const</span> <span class="keywordtype">int</span> NUM_CATEGORIES = <span class="keyword">sizeof</span> myCategories / <span class="keyword">sizeof</span> *myCategories;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUM_CATEGORIES; ++i) {
        manager.<a class="code" href="classball_1_1CategoryManager.html#ae58a8e09f32b81f7e1a2c436c1d9d533">addCategory</a>(myCategories[i],
                            192 + i, 96 + i, 64 + i, 32 + i);
    }
</pre></div><br/>
<br/>
 In the following, each of the new categories is accessed from the registry and their names and threshold levels printed: <br/>
<br/>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUM_CATEGORIES; ++i) {
        <span class="keyword">const</span> ball::Category *category =
                                     manager.<a class="code" href="classball_1_1CategoryManager.html#ae32f8145c40866dc6702019aee0ed35d">lookupCategory</a>(myCategories[i]);
        bsl::cout &lt;&lt; <span class="stringliteral">&quot;[ &quot;</span> &lt;&lt; myCategories[i]
                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category-&gt;<a class="code" href="classCategory.html#aa39bfc26a269570a5aa52711aa94a485">recordLevel</a>()
                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category-&gt;passLevel()
                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category-&gt;triggerLevel()
                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category-&gt;triggerAllLevel()
                  &lt;&lt; <span class="stringliteral">&quot; ]&quot;</span> &lt;&lt; bsl::endl;
    }
</pre></div><br/>
<br/>
 The following is printed to <code>stdout</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">    [ EQUITY.MARKET.NYSE, 192, 96, 64, 32 ]
    [ EQUITY.MARKET.NASDAQ, 193, 97, 65, 33 ]
    [ EQUITY.GRAPHICS.MATH.FACTORIAL, 194, 98, 66, 34 ]
    [ EQUITY.GRAPHICS.MATH.ACKERMANN, 195, 99, 67, 35 ]
</pre></div><br/>
<br/>
 We next use the <code>setLevels</code> method of <code>ball::Category</code> to adjust the threshold levels of our categories. The following also demonstrates use of the <code>recordLevel</code>, etc., accessors of <code>ball::Category</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUM_CATEGORIES; ++i) {
        ball::Category *category = manager.<a class="code" href="classball_1_1CategoryManager.html#ae32f8145c40866dc6702019aee0ed35d">lookupCategory</a>(myCategories[i]);
        category-&gt;<a class="code" href="classCategory.html#afc780dc89e6b5cedd80c78327d436efb">setLevels</a>(category-&gt;recordLevel() + 1,
                            category-&gt;passLevel() + 1,
                            category-&gt;triggerLevel() + 1,
                            category-&gt;triggerAllLevel() + 1);
    }
</pre></div><br/>
<br/>
 Repeating the second <code>for</code> loop from above generates the following output on <code>stdout</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">    [ EQUITY.MARKET.NYSE, 193, 97, 65, 33 ]
    [ EQUITY.MARKET.NASDAQ, 194, 98, 66, 34 ]
    [ EQUITY.GRAPHICS.MATH.FACTORIAL, 195, 99, 67, 35 ]
    [ EQUITY.GRAPHICS.MATH.ACKERMANN, 196, 100, 68, 36 ]
</pre></div><br/>
<br/>
 Next we illustrate use of the index operator as a means of iterating over the registry of categories. In particular, we illustrate an alternate approach to modifying the threshold levels of our categories by iterating over the categories in the registry of <code>manager</code> to increment their threshold levels a second time: <br/>
<br/>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; manager.<a class="code" href="classball_1_1CategoryManager.html#ab7522127c7b4938c643184ee8cbcdb53">length</a>(); ++i) {
        ball::Category&amp; category = manager[i];
        category.setLevels(category.recordLevel() + 1,
                           category.passLevel() + 1,
                           category.triggerLevel() + 1,
                           category.triggerAllLevel() + 1);
    }
</pre></div><br/>
<br/>
 Finally, we iterate over the categories in the registry to print them out one last time: <br/>
<br/>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; manager.<a class="code" href="classball_1_1CategoryManager.html#ab7522127c7b4938c643184ee8cbcdb53">length</a>(); ++i) {
        <span class="keyword">const</span> ball::Category&amp; category = manager[i];
        bsl::cout &lt;&lt; <span class="stringliteral">&quot;[ &quot;</span> &lt;&lt; category.categoryName()
                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category.recordLevel()
                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category.passLevel()
                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category.triggerLevel()
                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; category.triggerAllLevel()
                  &lt;&lt; <span class="stringliteral">&quot; ]&quot;</span> &lt;&lt; bsl::endl;
    }
</pre></div><br/>
<br/>
 This iteration produces the following output on <code>stdout</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">    [ EQUITY.MARKET.NYSE, 194, 98, 66, 34 ]
    [ EQUITY.MARKET.NASDAQ, 195, 99, 67, 35 ]
    [ EQUITY.GRAPHICS.MATH.FACTORIAL, 196, 100, 68, 36 ]
    [ EQUITY.GRAPHICS.MATH.ACKERMANN, 197, 101, 69, 37 ]
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:24 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
