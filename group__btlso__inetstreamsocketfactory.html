<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: btlso_inetstreamsocketfactory Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component btlso_inetstreamsocketfactory<br/>
<small>
[<a class="el" href="group__btlso.html">Package btlso</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Implementation for TCP based stream sockets.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebtlso.html">btlso</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Thread Safety</a> </li>
<li>
<a href="#3.2">Usage</a> <ul>
<li>
<a href="#3.2.1">Example 1: Create a New Stream Socket</a> </li>
<li>
<a href="#3.2.2">Example 2: Create a <code>btlso::StreamSocket</code> Object From Existing Socket Handle</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Implementation for TCP based stream sockets. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory</a> </td><td>factory for TCP-based stream-sockets  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__btlso__inetstreamsocket.html" title="Implementation for TCP based stream sockets.">Component btlso_inetstreamsocket</a>, <a class="el" href="group__btlso__ipv4address.html" title="Provide a representation of an IPv4 address.">Component btlso_ipv4address</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component implements a factory to allocate and deallocate them. The stream sockets are of type <code><a class="el" href="classbtlso_1_1InetStreamSocket.html">btlso::InetStreamSocket</a>&lt;ADDRESS&gt;</code> conforming to the <code><a class="el" href="classbtlso_1_1StreamSocket.html">btlso::StreamSocket</a>&lt;ADDRESS&gt;</code> protocol. The classes are templatized to provide type-safe address class specialization. The only address type currently supported is IPv4 (as provided by <code>btlso_ipv4address</code> component). Therefore, the template parameter will always be <code><a class="el" href="classbtlso_1_1IPv4Address.html">btlso::IPv4Address</a></code>. The factory, <code><a class="el" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory</a>&lt;ADDRESS&gt;</code>, creates and destroys instances of the <code><a class="el" href="classbtlso_1_1InetStreamSocket.html">btlso::InetStreamSocket</a>&lt;ADDRESS&gt;</code>. Two interfaces are available for creation of stream sockets. One does not take a socket handle creates a new socket in the default initial state when a new stream socket is allocated. The second takes the handle to an existing TCP-based stream socket and loads it into newly-allocated stream socket object. In this case, no assumption is made about the state of the existing socket. Every instance of <code><a class="el" href="classbtlso_1_1InetStreamSocket.html">btlso::InetStreamSocket</a>&lt;ADDRESS&gt;</code> must be destroyed using the deallocate operation of <code><a class="el" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory</a>&lt;ADDRESS&gt;</code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The creation of the socket factory provided by this component will enable socket operations (by calling <code><a class="el" href="structbtlso_1_1SocketImpUtil.html#ab899cc56fedaa558d3502e0351a8819f">btlso::SocketImpUtil::startup</a></code>) method; the the destruction will disable socket operations (by calling <code><a class="el" href="structbtlso_1_1SocketImpUtil.html#a6d2436f0b4ccf92c4609c89896b6dc63">btlso::SocketImpUtil::cleanup</a></code> method). </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="thread_safety"></a> <a class="anchor" id="description.thread_safety"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Thread Safety: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The classes provided by this component depend on a <code><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a></code> instance to supply memory. If the allocator is not thread enabled then the instances of this component that use the same allocator instance will consequently not be thread safe. Otherwise, this component provides the following guarantees: </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <code><a class="el" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory</a></code> is <em>thread-enabled</em> and any thread can call any method <em>on the same instance</em> safely and the operations will proceed in parallel. WARNING: simultaneous deallocation of the same instance of a stream socket may result in undefined behavior. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>In this section we show intended usage of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_create_a_new_stream_socket"></a> <a class="anchor" id="usage.example_1~3A_create_a_new_stream_socket"></a> <a class="anchor" id="description.usage.example_1~3A_create_a_new_stream_socket"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.2.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Create a New Stream Socket: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>We can use <code><a class="el" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory</a></code> to allocate a new TCP-based stream socket. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we create a <code><a class="el" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory</a></code> object: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory&lt;btlso::IPv4Address&gt;</a> factory;
</pre></div><br/>
<br/>
 Then, we create a stream socket: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbtlso_1_1StreamSocket.html">btlso::StreamSocket&lt;btlso::IPv4Address&gt;</a> *mySocket = factory.<a class="code" href="classbtlso_1_1InetStreamSocketFactory.html#a8e5f246da87e0d1c34f9b287a0b11c54">allocate</a>();
  assert(mySocket);
</pre></div><br/>
<br/>
 <code>mySocket</code> can now be used for TCP communication. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Finally, when we're done, we recycle the socket: <br/>
<br/>
<div class="fragment"><pre class="fragment">  factory.<a class="code" href="classbtlso_1_1InetStreamSocketFactory.html#a0d04e0214dc3075539e9b318120274ca">deallocate</a>(mySocket);
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_2~3A_create_a_btlso~3A~3Astreamsocket_object_from_existing_socket_handle"></a> <a class="anchor" id="usage.example_2~3A_create_a_btlso~3A~3Astreamsocket_object_from_existing_socket_handle"></a> <a class="anchor" id="description.usage.example_2~3A_create_a_btlso~3A~3Astreamsocket_object_from_existing_socket_handle"></a> <a class="anchor" id="example_2"></a> <a class="anchor" id="usage.example_2"></a> <a class="anchor" id="description.usage.example_2"></a> <a class="anchor" id="3.2.2"></a> </dd></dl>
<dl class="user"><dt><b>Example 2: Create a btlso::StreamSocket Object From Existing Socket Handle: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Alternatively, we can use <code><a class="el" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory</a></code> to allocate a <code><a class="el" href="classbtlso_1_1StreamSocket.html">btlso::StreamSocket</a></code> object that attaches to an existing socket handle. This socket handle may be created from a third-party library (such as OpenSSL). Using a <code><a class="el" href="classbtlso_1_1StreamSocket.html">btlso::StreamSocket</a></code> object rather than the socket handle directly is highly desirable as it enables the use of other BTE components on the socket. In this example, the socket handle is created from the <code>btlso_socketimputil</code> component for illustrative purpose. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we create a socket handle <code>fd</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="structbtlso_1_1SocketHandle.html#a92cfe6067b84ee5301cc25d0f1a80a11">btlso::SocketHandle::Handle</a> fd;
  <span class="keywordtype">int</span>                         nativeErrNo = 0;

  btlso::SocketImpUtil::open&lt;btlso::IPv4Address&gt;(
                                       &amp;fd,
                                       btlso::SocketImpUtil::k_SOCKET_STREAM,
                                       &amp;nativeErrNo);
  assert(0 == nativeErrNo);
</pre></div><br/>
<br/>
 Then, we create factory: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbtlso_1_1InetStreamSocketFactory.html">btlso::InetStreamSocketFactory&lt;btlso::IPv4Address&gt;</a> factory;
</pre></div><br/>
<br/>
 Next, we allocate a stream socket attached to <code>fd</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbtlso_1_1StreamSocket.html">btlso::StreamSocket&lt;btlso::IPv4Address&gt;</a> *mySocket = factory.<a class="code" href="classbtlso_1_1InetStreamSocketFactory.html#a8e5f246da87e0d1c34f9b287a0b11c54">allocate</a>(fd);
  assert(mySocket);
</pre></div><br/>
<br/>
 Notice that <code>fd</code> is passed into the <code>allocate</code> method as an argument. Any BTE component that uses <code><a class="el" href="classbtlso_1_1StreamSocket.html">btlso::StreamSocket</a>&lt;<a class="el" href="classbtlso_1_1IPv4Address.html">btlso::IPv4Address</a>&gt;</code> can now be used on <code>mySocket</code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Finally, when we're done, we recycle the socket: <br/>
<br/>
<div class="fragment"><pre class="fragment">  factory.<a class="code" href="classbtlso_1_1InetStreamSocketFactory.html#a0d04e0214dc3075539e9b318120274ca">deallocate</a>(mySocket);
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:49:15 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
