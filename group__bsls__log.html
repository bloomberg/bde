<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: bsls_log Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bsls_log<br/>
<small>
[<a class="el" href="group__bsls.html">Package bsls</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a namespace for low-level logging functions.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebsls.html">bsls</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Macros</a> </li>
<li>
<a href="#4">Description</a> <ul>
<li>
<a href="#4.1">Motivation</a> </li>
<li>
<a href="#4.2">Functionality</a> <ul>
<li>
<a href="#4.2.1">Log Message Handler</a> </li>
<li>
<a href="#4.2.2">Writing Log Messages</a> </li>
</ul>
</li>
<li>
<a href="#4.3">Usage</a> <ul>
<li>
<a href="#4.3.1">Example 1: Logging Formatted Messages</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a namespace for low-level logging functions. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbsls_1_1Log.html">bsls::Log</a> </td><td>namespace for low-level logging functions  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="macros"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Macros: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td>BSLS_LOG </td><td>write log message using <code>printf</code>-style format specification  </td></tr>
<tr>
<td>BSLS_LOG_SIMPLE </td><td>write log message as an unformatted string  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="4"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component provides a set of macros, along with a namespace, <code><a class="el" href="classbsls_1_1Log.html">bsls::Log</a></code>, which contains a suite of utility functions for logging in low-level code. The macros and functions in this component provide a consistent interface for logging across different platforms through the use of a global cross-platform log message handler function. Users can customize the logging behavior by providing their own log message handler function. Note that this component is intended to be used only when a more fully-featured logger is not available. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="motivation"></a> <a class="anchor" id="description.motivation"></a> <a class="anchor" id="4.1"></a> </dd></dl>
<dl class="user"><dt><b>Motivation: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Using the functionality of this component instead of writing messages directly to <code>stderr</code> has the following advantages: </dd></dl>
<dl class="user"><dt><b></b></dt><dd><ul>
<li>
<p class="startli">Users have the freedom to customize the default logging behavior.</p>
<div class="hanging"> </div></li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> A user may want all logs to be automatically redirected to a file or may</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> want to add some custom formatting or handling. These abilities are not</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> available if the output stream is predetermined. </div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> </div></dd></dl>
<p>The logging mechanism behaves correctly on all platforms by default.</p>
<div class="hanging"> <dl class="user"><dt><b></b></dt><dd>Some platforms have particular restrictions on the use of the standard</dd></dl>
<dl class="user"><dt><b></b></dt><dd>output streams. For example, Windows applications running in non-console</dd></dl>
<dl class="user"><dt><b></b></dt><dd>mode do not have a concept of <code>stdout</code> or <code>stderr</code>; writing directly to</dd></dl>
<dl class="user"><dt><b></b></dt><dd>either of these streams is known to hang the process when no console is</dd></dl>
<dl class="user"><dt><b></b></dt><dd>attached.</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="functionality"></a> <a class="anchor" id="description.functionality"></a> <a class="anchor" id="4.2"></a> </dd></dl>
<dl class="user"><dt><b>Functionality: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section describes the functionality provided by this component in more detail. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="log_message_handler"></a> <a class="anchor" id="functionality.log_message_handler"></a> <a class="anchor" id="description.functionality.log_message_handler"></a> <a class="anchor" id="4.2.1"></a> </dd></dl>
<dl class="user"><dt><b>Log Message Handler: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <code><a class="el" href="classbsls_1_1Log.html">bsls::Log</a></code> class provides two <code>static</code> methods, <code>logMessageHandler</code> and <code>setLogMessageHandler</code>, which can be used, respectively, to retrieve and set the globally installed log message handler through which all log messages are written. All log message handlers must follow the signature and contract requirements of the <code><a class="el" href="classbsls_1_1Log.html#adb11c7730e939c22ca17a15038146867">bsls::Log::LogMessageHandler</a></code> <code>typedef</code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>The log message handler <code><a class="el" href="classbsls_1_1Log.html#a7fd14f845e0752effb645ba91447271c">bsls::Log::platformDefaultMessageHandler</a></code> is installed by default as the global handler. This handler writes all log messages to <code>stderr</code>, except in Windows non-console mode where the destination of the <code>OutputDebugString</code> function is used. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>In addition to the default handler, the log message handlers <code><a class="el" href="classbsls_1_1Log.html#a911fbb5ed977ab153813f59cc834d752">bsls::Log::stdoutMessageHandler</a></code> and <code><a class="el" href="classbsls_1_1Log.html#a723623f554997720fc6cf633790a0c59">bsls::Log::stderrMessageHandler</a></code> are provided as a set of simple handlers that write log messages to <code>stdout</code> and <code>stderr</code>, respectively. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="writing_log_messages"></a> <a class="anchor" id="functionality.writing_log_messages"></a> <a class="anchor" id="description.functionality.writing_log_messages"></a> <a class="anchor" id="4.2.2"></a> </dd></dl>
<dl class="user"><dt><b>Writing Log Messages: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>There are four ways to invoke the currently installed log message handler, depending on the specific behavior required: The macro <code>BSLS_LOG</code> allows a formatted message to be written using a <code>printf</code>-style format string. The macro <code>BSLS_LOG_SIMPLE</code> allows a simple, unformatted string to be written. Both of the macros automatically use the file name and line number of the point that the macro was invoked. The <code>static</code> methods <code><a class="el" href="classbsls_1_1Log.html#aae4130433b8584aeb53688cb0cdb2f52">bsls::Log::logFormattedMessage</a></code> and <code><a class="el" href="classbsls_1_1Log.html#a88c420f706249ae6b611041a88476d42">bsls::Log::logMessage</a></code> provide the same functionality as <code>BSLS_LOG</code> and 'BSLS_LOG_SIMPLE, respectively, except that these two methods allow a file name and line number to be passed in as parameters. This is described in table form as follows: <br/>
<br/>
<div class="fragment"><pre class="fragment">  .=========================================================================.
  |      Mechanism                 |  Formatted   |  Automatic File &amp; Line  |
  |=========================================================================|
  | <a class="code" href="bsls__log_8h.html#a7dbdfe625b33e23613a6cfebf0427456">BSLS_LOG</a>                       |     YES      |          YES            |
  |--------------------------------|--------------|-------------------------|
  | <a class="code" href="bsls__log_8h.html#a740c52485f0697be0e205d176e206267">BSLS_LOG_SIMPLE</a>                |     NO       |          YES            |
  |--------------------------------|--------------|-------------------------|
  | <a class="code" href="classbsls_1_1Log.html#aae4130433b8584aeb53688cb0cdb2f52">bsls::Log::logFormattedMessage</a> |     YES      |          NO             |
  |--------------------------------|--------------|-------------------------|
  | <a class="code" href="classbsls_1_1Log.html#a88c420f706249ae6b611041a88476d42">bsls::Log::logMessage</a>          |     NO       |          NO             |
  `-------------------------------------------------------------------------<span class="stringliteral">&#39;</span>
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="4.3"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates the intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_logging_formatted_messages"></a> <a class="anchor" id="usage.example_1~3A_logging_formatted_messages"></a> <a class="anchor" id="description.usage.example_1~3A_logging_formatted_messages"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="4.3.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Logging Formatted Messages: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Suppose that we want to write a formatted log message using <code>printf</code>-style format specifiers when the preconditions of a function are not met. The <code>BSLS_LOG</code> macro can be used for this purpose. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we begin to define a function, <code>add</code>, which will return the sum of two positive integer values: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="comment">// myapp.cpp</span>

  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> add(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b)
      <span class="comment">// Return the sum of the specified &#39;a&#39; and the specified &#39;b&#39;.  The</span>
      <span class="comment">// behavior is undefined unless &#39;a&#39; and &#39;b&#39; are not negative.</span>
  {
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Now, we check the precondition of the function, and use the <code>BSLS_LOG</code> macro to write a log message if one of the input parameters is less than 0: <br/>
<br/>
<div class="fragment"><pre class="fragment">      <span class="keywordflow">if</span>(a &lt; 0 || b &lt; 0) {
          <a class="code" href="bsls__log_8h.html#a7dbdfe625b33e23613a6cfebf0427456">BSLS_LOG</a>(<span class="stringliteral">&quot;Error: Invalid input combination (%d, %d).&quot;</span>, a, b);
          <span class="keywordflow">return</span> 0;                                                 <span class="comment">// RETURN</span>
      }

      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(a) + static_cast&lt;unsigned int&gt;(b);
  }
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Next, we may erroneously call the <code>add</code> function with a negative argument: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = add(3, -100);
</pre></div><br/>
<br/>
 Finally, assuming the default log message handler is currently installed, we observe the following output printed to <code>stderr</code> or to the Windows debugger: <br/>
<br/>
<div class="fragment"><pre class="fragment">  myapp.cpp:8 Error: Invalid input combination (3, -100).
</pre></div><br/>
<br/>
 Note that an arbitrary string should never be passed to <code>BSLS_LOG</code> as the format string. If the string happens to contain <code>printf</code>-style format specifiers but the expected substitutions are not present, it will lead to undefined behavior. </dd></dl>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:49:02 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
