<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: bdlt_date Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bdlt_date<br/>
<small>
[<a class="el" href="group__bdlt.html">Package bdlt</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a value-semantic type to represent dates.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebdlt.html">bdlt</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Valid Date Values and Their Representations</a> </li>
<li>
<a href="#3.2">Ensuring <code>bdlt::Date</code> Validity</a> </li>
<li>
<a href="#3.3">BDEX Compatibility with Legacy POSIX-Based Date</a> </li>
<li>
<a href="#3.4">Usage</a> <ul>
<li>
<a href="#3.4.1">Example 1: Basic Use of <code>bdlt::Date</code></a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a value-semantic type to represent dates. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a> </td><td>value-semantic date type consistent with the Unix calendar  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__bdlt__dayofweek.html" title="Provide an enumeration of the set of days of the week.">Component bdlt_dayofweek</a>, <a class="el" href="group__bdlt__serialdateimputil.html" title="Provide low-level support functions for date-value manipulation.">Component bdlt_serialdateimputil</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component defines a value-semantic class, <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code>, capable of representing any valid date that is consistent with the Unix (POSIX) calendar restricted to the years 1 through 9999 (inclusive): <br/>
<br/>
<div class="fragment"><pre class="fragment">  http:<span class="comment">//pubs.opengroup.org/onlinepubs/9699919799/utilities/cal.html</span>
</pre></div><br/>
<br/>
 "Actual" (i.e., natural) day and date calculations are supported directly by <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> and its associated free operators. Calculations involving business days (or holidays), and day-count conventions (e.g., "ISMA30360"), can be found elsewhere. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="valid_date_values_and_their_representations"></a> <a class="anchor" id="description.valid_date_values_and_their_representations"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Valid Date Values and Their Representations: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>A <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> object <em>always</em> represents a valid date value as defined by the standard Unix calendar. The value of a <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> object can be expressed in the interface as either <code>(year, month, day)</code>, the canonical representation of dates, or <code>(year, dayOfYear)</code>. For example, <code>(1959, 3, 8)</code> represents the same valid <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> value as <code>(1959, 67)</code> because the 8th day of the 3rd month of the year 1959 is also the 67th day of the year 1959. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Of course, not all combinations of <code>(year, month, day)</code> and <code>(year, dayOfYear)</code> constitute valid values for <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> objects. A <code>(year, dayOfYear)</code> pair does <em>not</em> represent a valid <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> value unless <code>1 &lt;= year &lt;= 9999</code> and <code>1 &lt;= dayOfYear &lt;= 366</code>. Additionally, if <code>year</code> is not a leap year, then the representation is not valid unless <code>1 &lt;= dayOfYear &lt;= 365</code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>In a leap year, February has 29 days instead of the usual 28. (Thus, leap years have 366 days instead of the usual 365.) Prior to 1752, the Unix calendar follows the convention of the Julian calendar: every year divisible by 4 is a leap year. After 1752, the Unix calendar follows the (more accurate) Gregorian calendar: a year is leap year if it is divisible by 4, but <em>not</em> divisible by 100, <em>unless</em> it is <em>also</em> divisible by 400. Note that 1752 is the year that Britain and its empire (including the colonies that later became the United States) switched from the Julian to the Gregorian calendar. See: <br/>
<br/>
<div class="fragment"><pre class="fragment">  http:<span class="comment">//en.wikipedia.org/wiki/Proleptic_Gregorian_calendar</span>
  https:<span class="comment">//en.wikipedia.org/wiki/Calendar_(New_Style)_Act_1750</span>
</pre></div><br/>
<br/>
 Moreover, the Unix calendar lacks the dates <code>[3 .. 13]</code> in September 1752, days that were dropped to align British dates with those used on the European continent. Thus: <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(++<a class="code" href="classbdlt_1_1Date.html">bdlt::Date</a>(1752, 9, 2) ==   <a class="code" href="classbdlt_1_1Date.html">bdlt::Date</a>(1752, 9, 14));
  assert(  <a class="code" href="classbdlt_1_1Date.html">bdlt::Date</a>(1752, 9, 2) == --<a class="code" href="classbdlt_1_1Date.html">bdlt::Date</a>(1715, 9, 14));
</pre></div><br/>
<br/>
 Note that two <code>static</code> (class) methods: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> isValidYearDay(<span class="keywordtype">int</span> year, <span class="keywordtype">int</span> dayOfYear);
  <span class="keywordtype">bool</span> isValidYearMonthDay(<span class="keywordtype">int</span> year, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> day);
</pre></div><br/>
<br/>
 are provided within <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> to indicate whether the given pair or triple of integers would represent a valid <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> value (e.g., prior to using them to construct a <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> object). </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="ensuring_bdlt~3A~3Adate_validity"></a> <a class="anchor" id="description.ensuring_bdlt~3A~3Adate_validity"></a> <a class="anchor" id="ensuring_bdlt"></a> <a class="anchor" id="description.ensuring_bdlt"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Ensuring bdlt::Date Validity: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Note that it is incumbent on the client of a <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> object never to cause it, directly or indirectly, to hold an invalid value, which can occur only by violating explicitly stated preconditions. For example, invoking <code>operator++</code> on a date object that represents the valid <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> value 9999/12/31 (December 31, 9999) is a contract violation that can lead to undefined behavior. Similarly, attempting to set the value of an existing date using the <code>setYearMonthDay</code> manipulator such that invoking <code>isValidYearMonthDay</code> would return <code>false</code> on the same <code>(year, month, day)</code> arguments is another contract violation. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>When setting a <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> object to a particular value, there are two forms of methods provided for both of the <code>(year, month, day)</code> and <code>(year, dayOfYear)</code> representations of date values. When you are <em>certain</em> that the value you are trying to set is valid, either of the following two runtime-efficient methods can be used safely: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">void</span> setYearDay(<span class="keywordtype">int</span> year, <span class="keywordtype">int</span> dayOfYear);
  <span class="keywordtype">void</span> setYearMonthDay(<span class="keywordtype">int</span> year, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> day);
</pre></div><br/>
<br/>
 If, however, the integral date attributes at hand are not known to represent a valid date, they must first be validated, e.g., by calling one of the two <code>static</code> <code>isValid*</code> methods, or by calling the appropriate set method having the <code>IfValid</code> suffix, which will always verify validity before either setting the value and returning 0, or returning a non-zero status with no effect on the object: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> setYearDayIfValid(<span class="keywordtype">int</span> year, <span class="keywordtype">int</span> dayOfYear);
  <span class="keywordtype">int</span> setYearMonthDayIfValid(<span class="keywordtype">int</span> year, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> day);
</pre></div><br/>
<br/>
 Note that if the value is "known" to be valid, and these latter <code>IfValid</code> variants are called without checking their return status, we run the risk of a "double fault" in that if the value is not actually valid, there is no way for a robust implementation (such as this one) to check for the error in a defensive (e.g., "DEBUG" or "SAFE") build mode. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="bdex_compatibility_with_legacy_posix-based_date"></a> <a class="anchor" id="description.bdex_compatibility_with_legacy_posix-based_date"></a> <a class="anchor" id="3.3"></a> </dd></dl>
<dl class="user"><dt><b>BDEX Compatibility with Legacy POSIX-Based Date: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The version 1 format supported by <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> for BDEX streaming is expressly intended for maintaining some degree of "compatibility" with versions of this date class that are built to use the proleptic Gregorian calendar. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Over the range of dates supported by <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> (<code>[0001JAN01 .. 9999DEC31]</code>), the proleptic Gregorian calendar (used by <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code>) has two fewer days than <code>cal</code>, and some dates that exist in one calendar do not exist in the other; therefore, true compatibility is not possible. The compatibility guaranteed by BDEX streaming version 1 is such that all dates in the range <code>[1752SEP14 .. 9999DEC31]</code>, as well as the default value (<code>0001JAN01</code>), can be successfully exchanged, via BDEX, between <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> classes built to use the POSIX calendar and those built to use the proleptic Gregorian calendar. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.4"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_basic_use_of_bdlt~3A~3Adate"></a> <a class="anchor" id="usage.example_1~3A_basic_use_of_bdlt~3A~3Adate"></a> <a class="anchor" id="description.usage.example_1~3A_basic_use_of_bdlt~3A~3Adate"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.4.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Basic Use of bdlt::Date: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The following snippets of code illustrate how to create and use a <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> object. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we create a default date <code>d1</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Date.html">bdlt::Date</a> d1;           assert(   1 == d1.<a class="code" href="classbdlt_1_1Date.html#a3ff13b0ea13991cdbddce8ce42883e1d">year</a>());
                           assert(   1 == d1.<a class="code" href="classbdlt_1_1Date.html#ad2d91e30b6ae7cba34a3b209cfc7a56c">month</a>());
                           assert(   1 == d1.<a class="code" href="classbdlt_1_1Date.html#a1eb15bac3a6ec6a0d77b278f2d633690">day</a>());
</pre></div><br/>
<br/>
 Next, we set <code>d1</code> to July 4, 1776: <br/>
<br/>
<div class="fragment"><pre class="fragment">  d1.<a class="code" href="classbdlt_1_1Date.html#a41c99f5051d541a3d394d0fa211e54be">setYearMonthDay</a>(1776, 7, 4);
                           assert(1776 == d1.<a class="code" href="classbdlt_1_1Date.html#a3ff13b0ea13991cdbddce8ce42883e1d">year</a>());
                           assert(   7 == d1.<a class="code" href="classbdlt_1_1Date.html#ad2d91e30b6ae7cba34a3b209cfc7a56c">month</a>());
                           assert(   4 == d1.<a class="code" href="classbdlt_1_1Date.html#a1eb15bac3a6ec6a0d77b278f2d633690">day</a>());
</pre></div><br/>
<br/>
 We can also use <code>setYearMonthDayIfValid</code> if we are not sure whether a particular year/month/day combination constitutes a valid <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code>. For example, if we want to set <code>d1</code> to <code>1900/02/29</code>, and it turns out that year 1900 was not a leap year (it wasn't), there will be no effect on the current value of the object: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> ret = d1.<a class="code" href="classbdlt_1_1Date.html#a40c1eefc02e6233ea28883ea312f30f2">setYearMonthDayIfValid</a>(1900, 2, 29);
                           assert(   0 != ret);         <span class="comment">// 1900 not leap year</span>
                           assert(1776 == d1.<a class="code" href="classbdlt_1_1Date.html#a3ff13b0ea13991cdbddce8ce42883e1d">year</a>());   <span class="comment">// no effect on &#39;d1&#39;</span>
                           assert(   7 == d1.<a class="code" href="classbdlt_1_1Date.html#ad2d91e30b6ae7cba34a3b209cfc7a56c">month</a>());
                           assert(   4 == d1.<a class="code" href="classbdlt_1_1Date.html#a1eb15bac3a6ec6a0d77b278f2d633690">day</a>());
</pre></div><br/>
<br/>
 Then, from <code>d1</code>, we can determine the day of the year, and the day of the week, of July 4, 1776: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> dayOfYear = d1.<a class="code" href="classbdlt_1_1Date.html#af52020c2810a71ad336dcac89ad70e66">dayOfYear</a>();
                           assert( 186 == dayOfYear);

  <a class="code" href="structbdlt_1_1DayOfWeek.html#a09b33959b12014fe88ddd8d0d692f573" title="Enumerated day-of-week values.">bdlt::DayOfWeek::Enum</a> dayOfWeek = d1.<a class="code" href="classbdlt_1_1Date.html#a09a32dde23c4cf38fd19336ff249b9b8">dayOfWeek</a>();
                           assert(<a class="code" href="structbdlt_1_1DayOfWeek.html#a09b33959b12014fe88ddd8d0d692f573ac97d36f4645342c3467d383d0b735142">bdlt::DayOfWeek::e_THU</a> == dayOfWeek);
</pre></div><br/>
<br/>
 Next, we create a <code><a class="el" href="classbdlt_1_1Date.html">bdlt::Date</a></code> object, <code>d2</code>, using the year/day-of-year representation for dates: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <a class="code" href="classbdlt_1_1Date.html">bdlt::Date</a> d2(1776, dayOfYear);
                           assert(1776 == d2.year());
                           assert( 186 == d2.dayOfYear());
                           assert(   7 == d2.month());
                           assert(   4 == d2.day());
                           assert(  d1 == d2);
</pre></div><br/>
<br/>
 Then, we add six days to the value of <code>d2</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  d2 += 6;                 assert(1776 == d2.year());
                           assert(   7 == d2.month());
                           assert(  10 == d2.day());
</pre></div><br/>
<br/>
 Now, we subtract <code>d1</code> from <code>d2</code>, storing the (signed) difference in days (a.k.a. <em>actual</em> difference) in <code>daysDiff</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> daysDiff = d2 - d1;  assert(   6 == daysDiff);
</pre></div><br/>
<br/>
 Finally, we stream the value of <code>d2</code> to <code>stdout</code>: <br/>
<br/>
<div class="fragment"><pre class="fragment">  bsl::cout &lt;&lt; d2 &lt;&lt; bsl::endl;
</pre></div><br/>
<br/>
 The streaming operator produces: <br/>
<br/>
<div class="fragment"><pre class="fragment">  10JUL1776
</pre></div><br/>
<br/>
 on <code>stdout</code>. </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:50 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
