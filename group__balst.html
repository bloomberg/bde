<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: balst Package</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#groups">Components</a>  </div>
  <div class="headertitle">
<h1>Package balst<br/>
<small>
[<a class="el" href="group__bal.html">Package Group bal</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a portable facility for obtaining &amp; printing a stack trace.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="groups"></a>
Components</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__assertionlogger.html">Component balst_assertionlogger</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="margin-top: 0; margin-bottom: 0;">Provide configurable logging handler for assertion failures. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__dbghelpdllimpl__windows.html"><span style="color:gray;">Component balst_dbghelpdllimpl_windows<strong>: PRIVATE</strong></span></a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="color: gray;margin-top: 0; margin-bottom: 0;">Provide access to the <code>dbghelp.dll</code> shared library on Windows. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__objectfileformat.html">Component balst_objectfileformat</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="margin-top: 0; margin-bottom: 0;">Provide platform-dependent object file format trait definitions. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stackaddressutil.html">Component balst_stackaddressutil</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="margin-top: 0; margin-bottom: 0;">Provide a utility for obtaining return addresses from the stack. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktrace.html">Component balst_stacktrace</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="margin-top: 0; margin-bottom: 0;">Provide a description of a function-call stack. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktraceframe.html">Component balst_stacktraceframe</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="margin-top: 0; margin-bottom: 0;">Provide an attribute class describing an execution stack frame. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktraceprintutil.html">Component balst_stacktraceprintutil</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="margin-top: 0; margin-bottom: 0;">Provide a single function to perform and print a stack trace. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktraceresolver__filehelper.html"><span style="color:gray;">Component balst_stacktraceresolver_filehelper<strong>: PRIVATE</strong></span></a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="color: gray;margin-top: 0; margin-bottom: 0;">Provide platform-independent file input for stack trace resolvers. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktraceresolverimpl__dladdr.html"><span style="color:gray;">Component balst_stacktraceresolverimpl_dladdr<strong>: PRIVATE</strong></span></a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="color: gray;margin-top: 0; margin-bottom: 0;">Provide functions for resolving a stack trace using <code>dladdr</code>. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktraceresolverimpl__elf.html"><span style="color:gray;">Component balst_stacktraceresolverimpl_elf<strong>: PRIVATE</strong></span></a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="color: gray;margin-top: 0; margin-bottom: 0;">Provide a utility to resolve ELF symbols in a stack trace. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktraceresolverimpl__windows.html"><span style="color:gray;">Component balst_stacktraceresolverimpl_windows<strong>: PRIVATE</strong></span></a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="color: gray;margin-top: 0; margin-bottom: 0;">Provide resolution of symbols in stack trace for Windows objects. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktraceresolverimpl__xcoff.html"><span style="color:gray;">Component balst_stacktraceresolverimpl_xcoff<strong>: PRIVATE</strong></span></a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="color: gray;margin-top: 0; margin-bottom: 0;">Provide a mechanism to resolve xcoff symbols in a stack trace. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktracetestallocator.html">Component balst_stacktracetestallocator</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="margin-top: 0; margin-bottom: 0;">Provide a test allocator that reports the call stack for leaks. </p>
</td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__balst__stacktraceutil.html">Component balst_stacktraceutil</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p style="margin-top: 0; margin-bottom: 0;">Provide low-level utilities for obtaining &amp; printing a stack-trace. </p>
</td></tr>
</p>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">MNEMONIC: Basic Application Library STack utilities (balst)</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Hierarchical Synopsis</a> </li>
<li>
<a href="#3.2">Component Synopsis</a> </li>
<li>
<a href="#3.3">Usage</a> <ul>
<li>
<a href="#3.3.1">Example 1: Printing a Stack Trace to a Stream</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a portable facility for obtaining &amp; printing a stack trace </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="mnemonic~3A_basic_application_library_stack_utilities_(balst)"></a> <a class="anchor" id="mnemonic"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>MNEMONIC: Basic Application Library STack utilities (balst): </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <code>balst</code> package provides a facility for obtaining and printing a stack trace at run time. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="hierarchical_synopsis"></a> <a class="anchor" id="description.hierarchical_synopsis"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Hierarchical Synopsis: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>The <code>balst</code> package currently has 14 components having 5 levels of physical dependency. The list below shows the hierarchical ordering of the components. The order of components within each level is not architecturally significant, just alphabetical. <br/>
<br/>
<div class="fragment"><pre class="fragment">  5. balst_assertionlogger
     balst_stacktraceprintutil
     balst_stacktracetestallocator

  4. balst_stacktraceutil

  3. balst_stacktraceresolverimpl_dladdr                              !PRIVATE!
     balst_stacktraceresolverimpl_elf                                 !PRIVATE!
     balst_stacktraceresolverimpl_windows                             !PRIVATE!
     balst_stacktraceresolverimpl_xcoff                               !PRIVATE!

  2. balst_stackaddressutil
     balst_stacktrace
     balst_stacktraceresolver_filehelper                              !PRIVATE!

  1. balst_dbghelpdllimpl_windows                                     !PRIVATE!
     balst_objectfileformat
     balst_stacktraceframe
</pre></div><br/>
<br/>
 </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="component_synopsis"></a> <a class="anchor" id="description.component_synopsis"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Component Synopsis: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> </div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_assertionlogger</code>: <br/>
 Provide configurable logging handler for assertion failures.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_dbghelpdllimpl_windows</code>: <b>PRIVATE</b> <br/>
 Provide access to the <code>dbghelp.dll</code> shared library on Windows.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_objectfileformat</code>: <br/>
 Provide platform-dependent object file format trait definitions.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stackaddressutil</code>: <br/>
 Provide a utility for obtaining return addresses from the stack.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktrace</code>: <br/>
 Provide a description of a function-call stack.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktraceframe</code>: <br/>
 Provide an attribute class describing an execution stack frame.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktraceprintutil</code>: <br/>
 Provide a single function to perform and print a stack trace.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktraceresolver_filehelper</code>: <b>PRIVATE</b> <br/>
 Provide platform-independent file input for stack trace resolvers.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktraceresolverimpl_dladdr</code>: <b>PRIVATE</b> <br/>
 Provide functions for resolving a stack trace using <code>dladdr</code>.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktraceresolverimpl_elf</code>: <b>PRIVATE</b> <br/>
 Provide a utility to resolve ELF symbols in a stack trace.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktraceresolverimpl_windows</code>: <b>PRIVATE</b> <br/>
 Provide resolution of symbols in stack trace for Windows objects.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktraceresolverimpl_xcoff</code>: <b>PRIVATE</b> <br/>
 Provide a mechanism to resolve xcoff symbols in a stack trace.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktracetestallocator</code>: <br/>
 Provide a test allocator that reports the call stack for leaks.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> <code>balst_stacktraceutil</code>: <br/>
 Provide low-level utilities for obtaining &amp; printing a stack-trace.</div></dd></dl>
<dl class="user"><dt><b></b></dt><dd><div class="hanging"> </div> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.3"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates intended use of this package. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_printing_a_stack_trace_to_a_stream"></a> <a class="anchor" id="usage.example_1~3A_printing_a_stack_trace_to_a_stream"></a> <a class="anchor" id="description.usage.example_1~3A_printing_a_stack_trace_to_a_stream"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.3.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Printing a Stack Trace to a Stream: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This example shows how to obtain a stack trace and print it to a stream, all by calling just the static function <code>balst_StackTracePrintUtil::printStackTrace</code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we define a recursive function <code>recurseAndPrintStack</code> that recurses to the specified <code>depth</code>, then calls <code>balst_StackTracePrintUtil::printStackTrace</code> to obtain a stack trace and print it to <code>cout</code>. When we call <code>printStackTrace</code>, neither of the optional arguments corresponding to <code>maxFrames</code> or <code>demanglingPreferredFlag</code> are supplied; <code>maxFrames</code> defaults to at least 1024 (which is more than we need), and <code>demanglingPreferredFlag</code> defaults to <code>true</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">static</span>
  <span class="keywordtype">void</span> recurseAndPrintStack(<span class="keywordtype">int</span> *depth)
      <span class="comment">// Recurse to the specified &#39;depth&#39;, then print out the stack trace to</span>
      <span class="comment">// &#39;cout&#39;.</span>
  {
      <span class="keywordflow">if</span> (--*depth &gt; 0) {
          recurseAndPrintStack(depth);
      }
      <span class="keywordflow">else</span> {
          balst_StackTracePrintUtil::printStackTrace(cout);
      }

      ++*depth;   <span class="comment">// Prevent compiler from optimizing tail recursion as a</span>
                  <span class="comment">// loop.</span>
  }
</pre></div><br/>
<br/>
 Then, we call <code>recurseAndPrintStack</code> from the main program. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> main()
  {
      <span class="keywordtype">int</span> depth = 5;
      recurseAndPrintStack(&amp;depth);
      assert(5 == depth);
  }
</pre></div><br/>
<br/>
 Now, invoking the main program on AIX produces the following output: <br/>
<br/>
<div class="fragment"><pre class="fragment">  (0): BloombergLP::balst_StackTracePrintUtil::.printStackTrace(
       bdl::basic_ostream&lt;<span class="keywordtype">char</span>,bdl::char_traits&lt;char&gt; &gt;&amp;,<span class="keywordtype">int</span>,<span class="keywordtype">bool</span>)+0x170 at
       0x1000a2c8 source:balst_stacktraceprintutil.cpp:52 in
       balst_stacktraceprintutil.t.dbg_
  (1): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x58 at 0x1000a118
       source:balst_stacktraceprintutil.t.cpp:652 in
       balst_stacktraceprintutil.t.dbg_
  (2): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x40 at 0x1000a100
       source:balst_stacktraceprintutil.t.cpp:650
       in balst_stacktraceprintutil.t.dbg_
  (3): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x40 at 0x1000a100
       source:balst_stacktraceprintutil.t.cpp:650 in
       balst_stacktraceprintutil.t.dbg_
  (4): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x40 at 0x1000a100
       source:balst_stacktraceprintutil.t.cpp:650 in
       balst_stacktraceprintutil.t.dbg_
  (5): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x40 at 0x1000a100
       source:balst_stacktraceprintutil.t.cpp:650 in
       balst_stacktraceprintutil.t.dbg_
  (6): .main+0x2f4 at 0x10000a4c source:balst_stacktraceprintutil.t.cpp:724
       in balst_stacktraceprintutil.t.dbg_
  (7): .__start+0x6c at 0x1000020c source:crt0main.s in
       balst_stacktraceprintutil.t.dbg_
</pre></div><br/>
<br/>
 Finally, we observe the following about the above output to <code>cout</code>. Notice that since the actual output would write each stack trace frame all on a single line, and all the lines here were longer than 80 characters, it has been manually edited to wrap and have every line be less than 80 columns. Also note the program name is truncated to 32 characters in length. </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:29 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
