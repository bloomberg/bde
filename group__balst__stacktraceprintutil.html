<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: balst_stacktraceprintutil Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component balst_stacktraceprintutil<br/>
<small>
[<a class="el" href="group__balst.html">Package balst</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provide a single function to perform and print a stack trace.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebalst.html">balst</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Usage</a> <ul>
<li>
<a href="#3.1.1">Example 1: Printing a Stack Trace</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Provide a single function to perform and print a stack trace. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="structbalst_1_1StackTracePrintUtil.html">balst::StackTracePrintUtil</a> </td><td>namespace for functions to print a stack trace  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__balst__stacktraceutil.html" title="Provide low-level utilities for obtaining &amp; printing a stack-trace.">Component balst_stacktraceutil</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component defines a namespace <code>struct</code>, <code><a class="el" href="structbalst_1_1StackTracePrintUtil.html">balst::StackTracePrintUtil</a></code>, containing static platform-independent functions that will perform a stack trace and print it to a supplied stream. Not all properties of a stack trace are printed on all platforms because the set of properties describing a stack trace that are obtainable varies according to both the platform and build parameters. For example, on Solaris, Linux, and HP-UX, source file names and line numbers are not provided. Function names and addresses are provided on all platforms. The <code>printStackTrace</code> function always prints a description of the stack of the calling thread. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_printing_a_stack_trace"></a> <a class="anchor" id="usage.example_1~3A_printing_a_stack_trace"></a> <a class="anchor" id="description.usage.example_1~3A_printing_a_stack_trace"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.1.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Printing a Stack Trace: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This example shows how to obtain a stack trace and print it to a stream, all by calling just the static function <code><a class="el" href="structbalst_1_1StackTracePrintUtil.html#a3d5fe37a71572eea5c2edf21b5349958">balst::StackTracePrintUtil::printStackTrace</a></code>. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we define a recursive function <code>recurseAndPrintStack</code> that recurses to the specified <code>depth</code>, then calls <code><a class="el" href="structbalst_1_1StackTracePrintUtil.html#a3d5fe37a71572eea5c2edf21b5349958">balst::StackTracePrintUtil::printStackTrace</a></code> to obtain a stack trace and print it to <code>cout</code>. When we call <code>printStackTrace</code>, neither of the optional arguments corresponding to <code>maxFrames</code> or <code>demanglingPreferredFlag</code> are supplied; <code>maxFrames</code> defaults to at least 1024 (which is more than we need), and <code>demanglingPreferredFlag</code> defaults to <code>true</code>. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">static</span>
  <span class="keywordtype">void</span> recurseAndPrintStack(<span class="keywordtype">int</span> *depth)
      <span class="comment">// Recurse to the specified &#39;depth&#39;, then print out the stack trace to</span>
      <span class="comment">// &#39;cout&#39;.</span>
  {
      <span class="keywordflow">if</span> (--*depth &gt; 0) {
          recurseAndPrintStack(depth);
      }
      <span class="keywordflow">else</span> {
          <a class="code" href="structbalst_1_1StackTracePrintUtil.html#a3d5fe37a71572eea5c2edf21b5349958">balst::StackTracePrintUtil::printStackTrace</a>(cout);
      }

      ++*depth;   <span class="comment">// Prevent compiler from optimizing tail recursion as a</span>
                  <span class="comment">// loop.</span>
  }
</pre></div><br/>
<br/>
 Then, we call <code>recurseAndPrintStack</code> from the main program. <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> main()
  {
      <span class="keywordtype">int</span> depth = 5;
      recurseAndPrintStack(&amp;depth);
      assert(5 == depth);
  }
</pre></div><br/>
<br/>
 Now, invoking the main program on AIX produces the following output: <br/>
<br/>
<div class="fragment"><pre class="fragment">  (0): BloombergLP::balst::StackTracePrintUtil::.printStackTrace(
       std::basic_ostream&lt;<span class="keywordtype">char</span>,std::char_traits&lt;char&gt; &gt;&amp;,<span class="keywordtype">int</span>,<span class="keywordtype">bool</span>)+0x170 at
       0x1000a2c8 source:balst_stacktraceprintutil.cpp:52 in
       balst_stacktraceprintutil.t.dbg_
  (1): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x58 at 0x1000a118
       source:balst_stacktraceprintutil.t.cpp:652 in
       balst_stacktraceprintutil.t.dbg_
  (2): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x40 at 0x1000a100
       source:balst_stacktraceprintutil.t.cpp:650
       in balst_stacktraceprintutil.t.dbg_
  (3): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x40 at 0x1000a100
       source:balst_stacktraceprintutil.t.cpp:650 in
       balst_stacktraceprintutil.t.dbg_
  (4): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x40 at 0x1000a100
       source:balst_stacktraceprintutil.t.cpp:650 in
       balst_stacktraceprintutil.t.dbg_
  (5): .recurseAndPrintStack(<span class="keywordtype">int</span>*)+0x40 at 0x1000a100
       source:balst_stacktraceprintutil.t.cpp:650 in
       balst_stacktraceprintutil.t.dbg_
  (6): .main+0x2f4 at 0x10000a4c source:balst_stacktraceprintutil.t.cpp:724
       in balst_stacktraceprintutil.t.dbg_
  (7): .__start+0x6c at 0x1000020c source:crt0main.s in
       balst_stacktraceprintutil.t.dbg_
</pre></div><br/>
<br/>
 Finally, we observe the following about the above output to <code>cout</code>. Notice that since the actual output would write each stack trace frame all on a single line, and all the lines here were longer than 80 characters, it has been manually edited to wrap and have every line be less than 80 columns. Also note the program name is truncated to 32 characters in length. </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:48:29 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
