<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 3.0: Class ball::TestObserver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bal.html" target="_blank">bal</a> | <a class="qindex" href="group__bbl.html" target="_blank">bbl</a> | <a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a> | <a class="qindex" href="group__btl.html" target="_blank">btl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespaceball.html">ball</a>      </li>
      <li><a class="el" href="classball_1_1TestObserver.html">ball::TestObserver</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>ball::TestObserver Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="ball::TestObserver" --><!-- doxytag: inherits="ball::Observer" -->
<p><code>#include &lt;<a class="el" href="ball__testobserver_8h_source.html">ball_testobserver.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ball::TestObserver:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classball_1_1TestObserver.png" usemap="#ball::TestObserver_map" alt=""/>
  <map id="ball::TestObserver_map" name="ball::TestObserver_map">
<area href="classball_1_1Observer.html" alt="ball::Observer" shape="rect" coords="0,0,115,24"/>
</map>
</div>

<p><a href="classball_1_1TestObserver-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#a3a74793cd8d34278ae4a79c54bde35b3">TestObserver</a> (bsl::ostream &amp;stream, <a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *basicAllocator=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#a3f9d56ae3642c62b3ef2eca79f0ebaa8">~TestObserver</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#a1763bdf7d38df77fa9c0c30035d06425">publish</a> (const <a class="el" href="classball_1_1Record.html">Record</a> &amp;record, const <a class="el" href="classball_1_1Context.html">Context</a> &amp;context)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#ad1d06225e095f4c02a4d606f59010d5a">setVerbose</a> (int flagValue)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#a59cbdf24e99d88582a3a277a112bb7e7">id</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#afc8fde3ac37fb54bd7b5fb702241b7f5">numPublishedRecords</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classball_1_1Record.html">Record</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#a1e8cd66608164f0c4c0a0e4192e3554a">lastPublishedRecord</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classball_1_1Context.html">Context</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#a65ad40a10fda61db02e47dbe7c4b2c38">lastPublishedContext</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1Observer.html#a8500c2bf27d837051867c0db6557a072">publish</a> (const <a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt; const <a class="el" href="classball_1_1Record.html">Record</a> &gt; &amp;record, const <a class="el" href="classball_1_1Context.html">Context</a> &amp;context)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1Observer.html#a12a582bec075f1b2769de6ebe961188b">releaseRecords</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classball_1_1TestObserver.html#a0caa17a74daf0a20583c7d413dd520eb">numInstances</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class provides an instrumented implementation of the <code><a class="el" href="classball_1_1Observer.html">Observer</a></code> protocol suitable for testing systems that use <code><a class="el" href="classball_1_1Observer.html">Observer</a></code>. Each instance receives a unique (per process) integer identifier at construction, and keeps count of the number of records that it has published, as well as the contents of the most recently published record and context.</p>
<p>By default, instances publish appropriate diagnostic information, either to <code>stdout</code> or to an optional <code>bsl::ostream</code>. This diagnostic information can be suppressed by a call to <code>setVerbose</code> with a non-zero argument. A subsequent call to <code>setVerbose</code> with a zero argument will restore the default behavior of <code>publish</code>. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3a74793cd8d34278ae4a79c54bde35b3"></a><!-- doxytag: member="ball::TestObserver::TestObserver" ref="a3a74793cd8d34278ae4a79c54bde35b3" args="(bsl::ostream &amp;stream, bslma::Allocator *basicAllocator=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ball::TestObserver::TestObserver </td>
          <td>(</td>
          <td class="paramtype">bsl::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbslma_1_1Allocator.html">bslma::Allocator</a> *&nbsp;</td>
          <td class="paramname"> <em>basicAllocator</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a test observer having a unique integer identifier, whose <code>publish</code> method will send it's output (if any) to the specified <code>stream</code>. Optionally specify a <code>basicAllocator</code> used to supply memory. If <code>basicAllocator</code> is 0, the currently installed default allocator is used. By default, this observer prints nothing to <code>stream</code>. Note that the <code>setVerbose</code> method will affect this default behavior. </p>

</div>
</div>
<a class="anchor" id="a3f9d56ae3642c62b3ef2eca79f0ebaa8"></a><!-- doxytag: member="ball::TestObserver::~TestObserver" ref="a3f9d56ae3642c62b3ef2eca79f0ebaa8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual ball::TestObserver::~TestObserver </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy this test observer. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0caa17a74daf0a20583c7d413dd520eb"></a><!-- doxytag: member="ball::TestObserver::numInstances" ref="a0caa17a74daf0a20583c7d413dd520eb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ball::TestObserver::numInstances </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the total number of instances of this class that have been created since this process has begun. </p>

</div>
</div>
<a class="anchor" id="a1763bdf7d38df77fa9c0c30035d06425"></a><!-- doxytag: member="ball::TestObserver::publish" ref="a1763bdf7d38df77fa9c0c30035d06425" args="(const Record &amp;record, const Context &amp;context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ball::TestObserver::publish </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classball_1_1Record.html">Record</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classball_1_1Context.html">Context</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Store as the most recently published data the specified log <code>record</code> and publishing <code>context</code>. If this test observer is in verbose mode, print an appropriate diagnostic message to the stream specified at construction. Note that at construction test observers are not in verbose mode, but that the <code>setVerbose</code> method will affect this mode, and thus the behavior of this method. </p>

<p>Reimplemented from <a class="el" href="classball_1_1Observer.html#abbc4be4bd050d9922bf23351b40cd314">ball::Observer</a>.</p>

</div>
</div>
<a class="anchor" id="ad1d06225e095f4c02a4d606f59010d5a"></a><!-- doxytag: member="ball::TestObserver::setVerbose" ref="ad1d06225e095f4c02a4d606f59010d5a" args="(int flagValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ball::TestObserver::setVerbose </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flagValue</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the internal verbose mode of this test observer to the specified (boolean) <code>flagValue</code>. The default mode is <em>not</em> verbose. If <code>flagValue</code> is non-zero, calls to <code>publish</code> will print appropriate diagnostics to the <code>bsl::ostream</code> associated with this test observer. This printing is suppressed if <code>flagValue</code> is 0. </p>

</div>
</div>
<a class="anchor" id="a59cbdf24e99d88582a3a277a112bb7e7"></a><!-- doxytag: member="ball::TestObserver::id" ref="a59cbdf24e99d88582a3a277a112bb7e7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ball::TestObserver::id </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the unique (per process) integer identifier of this test observer. </p>

</div>
</div>
<a class="anchor" id="afc8fde3ac37fb54bd7b5fb702241b7f5"></a><!-- doxytag: member="ball::TestObserver::numPublishedRecords" ref="afc8fde3ac37fb54bd7b5fb702241b7f5" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ball::TestObserver::numPublishedRecords </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the total number of records that this test observer has published. </p>

</div>
</div>
<a class="anchor" id="a1e8cd66608164f0c4c0a0e4192e3554a"></a><!-- doxytag: member="ball::TestObserver::lastPublishedRecord" ref="a1e8cd66608164f0c4c0a0e4192e3554a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classball_1_1Record.html">Record</a>&amp; ball::TestObserver::lastPublishedRecord </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a reference to the record most recently published by this test observer. The behavior is undefined unless <code>publish</code> has been called at least once, and no other thread is manipulating this object concurrently (i.e., this function is <em>not</em> thread safe). </p>

</div>
</div>
<a class="anchor" id="a65ad40a10fda61db02e47dbe7c4b2c38"></a><!-- doxytag: member="ball::TestObserver::lastPublishedContext" ref="a65ad40a10fda61db02e47dbe7c4b2c38" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classball_1_1Context.html">Context</a>&amp; ball::TestObserver::lastPublishedContext </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a reference to the context most recently published by this test observer. The behavior is undefined unless <code>publish</code> has been called at least once, and no other thread is manipulating this object concurrently (i.e., this function is <em>not</em> thread safe). </p>

</div>
</div>
<a class="anchor" id="a8500c2bf27d837051867c0db6557a072"></a><!-- doxytag: member="ball::TestObserver::publish" ref="a8500c2bf27d837051867c0db6557a072" args="(const bsl::shared_ptr&lt; const Record &gt; &amp;record, const Context &amp;context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ball::Observer::publish </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbsl_1_1shared__ptr.html">bsl::shared_ptr</a>&lt; const <a class="el" href="classball_1_1Record.html">Record</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classball_1_1Context.html">Context</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process the specified log <code>record</code> having the specified publishing <code>context</code>. The exact definition of publish depends on the implementing class, though the intention is that the log <code>record</code> (whose publication has occurred according to <code>context</code>) be distributed in a human or machine readable form. </p>

<p>Reimplemented in <a class="el" href="classball_1_1AsyncFileObserver.html#a18b5053aec92a204b3c9a36f6eb00290">ball::AsyncFileObserver</a>, <a class="el" href="classball_1_1FileObserver.html#aa90fb39e9d806ceb7aacfadddd0f925d">ball::FileObserver</a>, <a class="el" href="classball_1_1FileObserver2.html#ab4a016cad4b0eeae1c16f67da9b56a2f">ball::FileObserver2</a>, <a class="el" href="classball_1_1MultiplexObserver.html#ac196c0eb5e171ac885a87a8a8bce35e4">ball::MultiplexObserver</a>, and <a class="el" href="classball_1_1ObserverAdapter.html#a8e1a5d7057e64c206ce1ccb8db8d4ba0">ball::ObserverAdapter</a>.</p>

</div>
</div>
<a class="anchor" id="a12a582bec075f1b2769de6ebe961188b"></a><!-- doxytag: member="ball::TestObserver::releaseRecords" ref="a12a582bec075f1b2769de6ebe961188b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ball::Observer::releaseRecords </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Discard any shared reference to a <code><a class="el" href="classball_1_1Record.html">Record</a></code> object that was supplied to the <code>publish</code> method, and is held by this observer. Note that this operation should be called if resources underlying the previously provided shared-pointers must be released. </p>

<p>Reimplemented in <a class="el" href="classball_1_1AsyncFileObserver.html#af30b25e08c5c0a1b04a4f03ce750a762">ball::AsyncFileObserver</a>, <a class="el" href="classball_1_1FileObserver.html#a999093640bc38ffc2522a6827c638d07">ball::FileObserver</a>, <a class="el" href="classball_1_1FileObserver2.html#a9ee79d804584e6ef28cce76b990d4936">ball::FileObserver2</a>, <a class="el" href="classball_1_1MultiplexObserver.html#a510a607faf309858f96408a80aeca269">ball::MultiplexObserver</a>, and <a class="el" href="classball_1_1ObserverAdapter.html#a104eb9385cd96b552034d0ae2922b7f3">ball::ObserverAdapter</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ball__testobserver_8h_source.html">ball_testobserver.h</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 1 2016 16:50:03 for BDE Release 3.0 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
