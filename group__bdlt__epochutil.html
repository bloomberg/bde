<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BDE 2.23.1 OSS: bdlt_epochutil Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <style>
      div.hanging {
        padding-left: 0.75in;
        text-indent: -0.50in;
      }
      div.unhanging {
        text-indent:     0in;
      }
      a.glossary {
        font-weight: bold;
        font-style: italic;
      }
    </style>
</head>
<!--
<body onload='searchBox.OnSelectItem(0);'>
-->
<body>

<table border=2 cellspacing=0 cellpadding=0 align=center>
<tr>
 <td valign=top align=center>
 <p align=center><b><i>Quick Links:</i></b></p>
 </td>
 <td valign=top align=center>
 <p align=center>
<a class="qindex" href="group__bdl.html" target="_blank">bdl</a> | <a class="qindex" href="group__bsl.html" target="_blank">bsl</a>
 </td>
 </tr>
 </table>

  </div>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="components.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<h1>Component bdlt_epochutil<br/>
<small>
[<a class="el" href="group__bdlt.html">Package bdlt</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Conversion between absolute/relative time with respect to epoch.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebdlt.html">bdlt</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="user"><dt><b>Outline</b></dt><dd><ul>
<li>
<a href="#1">Purpose</a> </li>
<li>
<a href="#2">Classes</a> </li>
<li>
<a href="#3">Description</a> <ul>
<li>
<a href="#3.1">Thread-Safety</a> </li>
<li>
<a href="#3.2">Usage</a> <ul>
<li>
<a href="#3.2.1">Example 1: Converting Between Various Representations of Time</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </dd></dl>
<dl class="user"><dt><b>Purpose: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Conversion between absolute/relative time with respect to epoch. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="user"><dt><b>Classes: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><table class="doxtable">
<tr>
<td><a class="el" href="structbdlt_1_1EpochUtil.html">bdlt::EpochUtil</a> </td><td>non-primitive functions on epoch-related conversions  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__bdlt__datetime.html" title="Provide a value-semantic type representing both date and time.">Component bdlt_datetime</a>, <a class="el" href="group__bdlt__datetimeinterval.html" title="Provide a representation of an interval of time.">Component bdlt_datetimeinterval</a>, <a class="el" href="group__bsls__timeinterval.html" title="Provide a representation of a time interval.">Component bsls_timeinterval</a> </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="user"><dt><b>Description: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This component defines a namespace, <code><a class="el" href="structbdlt_1_1EpochUtil.html">bdlt::EpochUtil</a></code>, providing non-primitive conversions between two different concepts of time. Clients can convert between absolute time (<code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code>) and relative time (such as <code>bsl::time_t</code>, <code><a class="el" href="structbdlt_1_1EpochUtil.html#aba3efca2d258e16871da8623f5922e86">bdlt::EpochUtil::TimeT64</a></code>, <code><a class="el" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a></code>, and <code><a class="el" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a></code>) with respect to the Unix standard "epoch" (1970/01/01_00:00:00.000 UTC), henceforth, simply referred to as "the epoch". Also provided is a fast, thread-safe method, <code>epoch</code>, for access to a pre-instantiated <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> object whose (constant) value is that of the epoch. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Due to different resolutions, conversions between absolute/relative time are possibly lossy when converting from a type with higher resolution to one with lower resolution. The value of the type with higher resolution will be truncated (not rounded). The following table lists the resolution of the types involved in this component: <br/>
<br/>
<div class="fragment"><pre class="fragment">  Type                      Reference          Resolution
  ---------------------     --------------     ------------
  bsl::time_t               relative           seconds
  <a class="code" href="structbdlt_1_1EpochUtil.html#aba3efca2d258e16871da8623f5922e86">bdlt::EpochUtil::TimeT64</a>  relative           seconds
  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>            absolute (UTC)     milliseconds
  bdlt::DatetimeInterval    relative           milliseconds
  bsls::TimeInterval        relative           nanoseconds
</pre></div><br/>
<br/>
 Note that the interfaces using <code><a class="el" href="structbdlt_1_1EpochUtil.html#aba3efca2d258e16871da8623f5922e86">bdlt::EpochUtil::TimeT64</a></code> can be validly used for values before the epoch (corresponding to negative <code>TimeT64</code> values), whereas the interfaces using <code>bsl::time_t</code> have undefined behavior for such input. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Also note that these conversions do not take into account the leap seconds (25 as of this writing) added to UTC by the International Earth Rotation and Reference Systems Service, but simply regard each day as having a fixed number of seconds (24 hours * 60 minutes / hour * 60 seconds / minute). </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="thread-safety"></a> <a class="anchor" id="description.thread-safety"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="user"><dt><b>Thread-Safety: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>It is safe to invoke any function defined in this component in two or more separate threads simultaneously, provided no other thread is simultaneously modifying the argument passed by reference to a non-modifiable user-defined type (such as <code><a class="el" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a></code> or <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code>). </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.2"></a> </dd></dl>
<dl class="user"><dt><b>Usage: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>This section illustrates intended use of this component. </dd></dl>
<dl class="user"><dt><b></b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="anchor" id="example_1~3A_converting_between_various_representations_of_time"></a> <a class="anchor" id="usage.example_1~3A_converting_between_various_representations_of_time"></a> <a class="anchor" id="description.usage.example_1~3A_converting_between_various_representations_of_time"></a> <a class="anchor" id="example_1"></a> <a class="anchor" id="usage.example_1"></a> <a class="anchor" id="description.usage.example_1"></a> <a class="anchor" id="3.2.1"></a> </dd></dl>
<dl class="user"><dt><b>Example 1: Converting Between Various Representations of Time: </b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd>When processing date/time data, we are often required to deal with a variety of ways in which to represent that data, and therefore we need to be able to convert between those representations. We can use the methods contained in <code><a class="el" href="structbdlt_1_1EpochUtil.html">bdlt::EpochUtil</a></code> to do this. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>First, we set up date/time input values in a variety of formats. We'll use 900ms past midnight of January 1, 2000 as the base date and time, dropping the 900ms if the resolution of a format doesn't support it: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">const</span> bsl::time_t            inputTime         (946684800);
  <span class="keyword">const</span> <a class="code" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a>     inputTimeInterval (946684800, 900000000);
  <span class="keyword">const</span> <a class="code" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> inputDatetimeInterval(
                                                0, 0, 0, 0, 946684800900LL);
  <span class="keyword">const</span> <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>         inputDatetime     (2000, 1, 1, 0, 0, 0, 900);
</pre></div><br/>
<br/>
 Then, we set up a set of output variables to receive converted values: <br/>
<br/>
<div class="fragment"><pre class="fragment">  bsl::time_t            outputTime;
  <a class="code" href="classbsls_1_1TimeInterval.html">bsls::TimeInterval</a>     outputTimeInterval;
  <a class="code" href="classbdlt_1_1DatetimeInterval.html">bdlt::DatetimeInterval</a> outputDatetimeInterval;
  <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a>         outputDatetime;
</pre></div><br/>
<br/>
 Next, because <code><a class="el" href="structbdlt_1_1EpochUtil.html">bdlt::EpochUtil</a></code> uses <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> as the common format for conversion, we will set up a pair of variables in this format to represent the values we expect to see: <br/>
<br/>
<div class="fragment"><pre class="fragment">  <span class="keyword">const</span> <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> epochDatetimeWithMs   (2000, 1, 1, 0, 0, 0, 900);
  <span class="keyword">const</span> <a class="code" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a> epochDatetimeWithoutMs(2000, 1, 1, 0, 0, 0, 0);
</pre></div><br/>
<br/>
 Now, we perform a set of conversions to <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> and verify that the results are correct. We will use the conversion methods that return by value: <br/>
<br/>
<div class="fragment"><pre class="fragment">  outputDatetime = <a class="code" href="structbdlt_1_1EpochUtil.html#ad5f4405d83c5fafd680d609083cb39f0">bdlt::EpochUtil::convertFromTimeT</a>(inputTime);
  assert(epochDatetimeWithoutMs == outputDatetime);

  outputDatetime =
                 <a class="code" href="structbdlt_1_1EpochUtil.html#a62e9a2dc38b2905d627c0ed7d4818be9">bdlt::EpochUtil::convertFromTimeInterval</a>(inputTimeInterval);
  assert(epochDatetimeWithMs    == outputDatetime);

  outputDatetime =
         <a class="code" href="structbdlt_1_1EpochUtil.html#a146c66013e7a748c5e15f8cc8151e04e">bdlt::EpochUtil::convertFromDatetimeInterval</a>(inputDatetimeInterval);
  assert(epochDatetimeWithMs    == outputDatetime);
</pre></div><br/>
<br/>
 Finally, we perform a set of conversions from <code><a class="el" href="classbdlt_1_1Datetime.html">bdlt::Datetime</a></code> and verify that the results are correct. This time, for variety, we will illustrate the conversion methods which return through an object pointer: <br/>
<br/>
<div class="fragment"><pre class="fragment">  assert(0 == <a class="code" href="structbdlt_1_1EpochUtil.html#a28932a587d941703ade42cbfe71fd560">bdlt::EpochUtil::convertToTimeT</a>(&amp;outputTime, inputDatetime));
  assert(inputTime             == outputTime);

  assert(0 == <a class="code" href="structbdlt_1_1EpochUtil.html#a02844bd25c4aab7b7051b511b60d3cff">bdlt::EpochUtil::convertToTimeInterval</a>(&amp;outputTimeInterval,
                                                     inputDatetime));
  assert(inputTimeInterval     == outputTimeInterval);

  assert(0 == <a class="code" href="structbdlt_1_1EpochUtil.html#a3e5251efe9fc597d2905cfdded1990d2">bdlt::EpochUtil::convertToDatetimeInterval</a>(
                                                     &amp;outputDatetimeInterval,
                                                     inputDatetime));
  assert(inputDatetimeInterval == outputDatetimeInterval);
</pre></div><br/>
<br/>
 </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Jun 2 2015 13:40:19 for BDE Release 2.23.1 OSS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
